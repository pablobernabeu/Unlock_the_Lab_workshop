var xa=Object.defineProperty;var wa=(i,t,e)=>t in i?xa(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var M=(i,t,e)=>wa(i,typeof t!="symbol"?t+"":t,e);import"./modulepreload-polyfill-B5Qt9EMX.js";import{a as oe,s as fo,d as J}from"./firebase-config-CwzURld3.js";import{r as Z,g as Ct,s as Bt,o as ws}from"./firebase-4YSElDcj.js";/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Ue(i){return i+.5|0}const Ot=(i,t,e)=>Math.max(Math.min(i,e),t);function we(i){return Ot(Ue(i*2.55),0,255)}function Ft(i){return Ot(Ue(i*255),0,255)}function kt(i){return Ot(Ue(i/2.55)/100,0,1)}function Hs(i){return Ot(Ue(i*100),0,100)}const dt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},es=[..."0123456789ABCDEF"],_a=i=>es[i&15],ka=i=>es[(i&240)>>4]+es[i&15],Ge=i=>(i&240)>>4===(i&15),Sa=i=>Ge(i.r)&&Ge(i.g)&&Ge(i.b)&&Ge(i.a);function Ma(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&dt[i[1]]*17,g:255&dt[i[2]]*17,b:255&dt[i[3]]*17,a:t===5?dt[i[4]]*17:255}:(t===7||t===9)&&(e={r:dt[i[1]]<<4|dt[i[2]],g:dt[i[3]]<<4|dt[i[4]],b:dt[i[5]]<<4|dt[i[6]],a:t===9?dt[i[7]]<<4|dt[i[8]]:255})),e}const Ta=(i,t)=>i<255?t(i):"";function Da(i){var t=Sa(i)?_a:ka;return i?"#"+t(i.r)+t(i.g)+t(i.b)+Ta(i.a,t):void 0}const Pa=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function go(i,t,e){const s=t*Math.min(e,1-e),n=(o,a=(o+i/30)%12)=>e-s*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function Aa(i,t,e){const s=(n,o=(n+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function Ca(i,t,e){const s=go(i,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function Oa(i,t,e,s,n){return i===n?(t-e)/s+(t<e?6:0):t===n?(e-i)/s+2:(i-t)/s+4}function _s(i){const e=i.r/255,s=i.g/255,n=i.b/255,o=Math.max(e,s,n),a=Math.min(e,s,n),r=(o+a)/2;let l,c,d;return o!==a&&(d=o-a,c=r>.5?d/(2-o-a):d/(o+a),l=Oa(e,s,n,d,o),l=l*60+.5),[l|0,c||0,r]}function ks(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(Ft)}function Ss(i,t,e){return ks(go,i,t,e)}function Ra(i,t,e){return ks(Ca,i,t,e)}function Ea(i,t,e){return ks(Aa,i,t,e)}function po(i){return(i%360+360)%360}function La(i){const t=Pa.exec(i);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?we(+t[5]):Ft(+t[5]));const n=po(+t[2]),o=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?s=Ra(n,o,a):t[1]==="hsv"?s=Ea(n,o,a):s=Ss(n,o,a),{r:s[0],g:s[1],b:s[2],a:e}}function Ia(i,t){var e=_s(i);e[0]=po(e[0]+t),e=Ss(e),i.r=e[0],i.g=e[1],i.b=e[2]}function Ba(i){if(!i)return;const t=_s(i),e=t[0],s=Hs(t[1]),n=Hs(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${n}%, ${kt(i.a)})`:`hsl(${e}, ${s}%, ${n}%)`}const js={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ws={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Fa(){const i={},t=Object.keys(Ws),e=Object.keys(js);let s,n,o,a,r;for(s=0;s<t.length;s++){for(a=r=t[s],n=0;n<e.length;n++)o=e[n],r=r.replace(o,js[o]);o=parseInt(Ws[a],16),i[r]=[o>>16&255,o>>8&255,o&255]}return i}let Ke;function za(i){Ke||(Ke=Fa(),Ke.transparent=[0,0,0,0]);const t=Ke[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Na=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function $a(i){const t=Na.exec(i);let e=255,s,n,o;if(t){if(t[7]!==s){const a=+t[7];e=t[8]?we(a):Ot(a*255,0,255)}return s=+t[1],n=+t[3],o=+t[5],s=255&(t[2]?we(s):Ot(s,0,255)),n=255&(t[4]?we(n):Ot(n,0,255)),o=255&(t[6]?we(o):Ot(o,0,255)),{r:s,g:n,b:o,a:e}}}function Ha(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${kt(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const $i=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,se=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function ja(i,t,e){const s=se(kt(i.r)),n=se(kt(i.g)),o=se(kt(i.b));return{r:Ft($i(s+e*(se(kt(t.r))-s))),g:Ft($i(n+e*(se(kt(t.g))-n))),b:Ft($i(o+e*(se(kt(t.b))-o))),a:i.a+e*(t.a-i.a)}}function Je(i,t,e){if(i){let s=_s(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=Ss(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function mo(i,t){return i&&Object.assign(t||{},i)}function Vs(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=Ft(i[3]))):(t=mo(i,{r:0,g:0,b:0,a:1}),t.a=Ft(t.a)),t}function Wa(i){return i.charAt(0)==="r"?$a(i):La(i)}class Le{constructor(t){if(t instanceof Le)return t;const e=typeof t;let s;e==="object"?s=Vs(t):e==="string"&&(s=Ma(t)||za(t)||Wa(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=mo(this._rgb);return t&&(t.a=kt(t.a)),t}set rgb(t){this._rgb=Vs(t)}rgbString(){return this._valid?Ha(this._rgb):void 0}hexString(){return this._valid?Da(this._rgb):void 0}hslString(){return this._valid?Ba(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,n=t.rgb;let o;const a=e===o?.5:e,r=2*a-1,l=s.a-n.a,c=((r*l===-1?r:(r+l)/(1+r*l))+1)/2;o=1-c,s.r=255&c*s.r+o*n.r+.5,s.g=255&c*s.g+o*n.g+.5,s.b=255&c*s.b+o*n.b+.5,s.a=a*s.a+(1-a)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=ja(this._rgb,t._rgb,e)),this}clone(){return new Le(this.rgb)}alpha(t){return this._rgb.a=Ft(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Ue(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Je(this._rgb,2,t),this}darken(t){return Je(this._rgb,2,-t),this}saturate(t){return Je(this._rgb,1,t),this}desaturate(t){return Je(this._rgb,1,-t),this}rotate(t){return Ia(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function xt(){}const Va=(()=>{let i=0;return()=>i++})();function O(i){return i==null}function $(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function R(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function W(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function rt(i,t){return W(i)?i:t}function P(i,t){return typeof i>"u"?t:i}const Ua=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,bo=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function B(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function L(i,t,e,s){let n,o,a;if($(i))for(o=i.length,n=0;n<o;n++)t.call(e,i[n],n);else if(R(i))for(a=Object.keys(i),o=a.length,n=0;n<o;n++)t.call(e,i[a[n]],a[n])}function bi(i,t){let e,s,n,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function yi(i){if($(i))return i.map(yi);if(R(i)){const t=Object.create(null),e=Object.keys(i),s=e.length;let n=0;for(;n<s;++n)t[e[n]]=yi(i[e[n]]);return t}return i}function yo(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Ya(i,t,e,s){if(!yo(i))return;const n=t[i],o=e[i];R(n)&&R(o)?Ie(n,o,s):t[i]=yi(o)}function Ie(i,t,e){const s=$(t)?t:[t],n=s.length;if(!R(i))return i;e=e||{};const o=e.merger||Ya;let a;for(let r=0;r<n;++r){if(a=s[r],!R(a))continue;const l=Object.keys(a);for(let c=0,d=l.length;c<d;++c)o(l[c],i,a,e)}return i}function De(i,t){return Ie(i,t,{merger:qa})}function qa(i,t,e){if(!yo(i))return;const s=t[i],n=e[i];R(s)&&R(n)?De(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=yi(n))}const Us={"":i=>i,x:i=>i.x,y:i=>i.y};function Xa(i){const t=i.split("."),e=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function Ga(i){const t=Xa(i);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function zt(i,t){return(Us[t]||(Us[t]=Ga(t)))(i)}function Ms(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Be=i=>typeof i<"u",Nt=i=>typeof i=="function",Ys=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function Ka(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const E=Math.PI,z=2*E,Ja=z+E,vi=Number.POSITIVE_INFINITY,Za=E/180,q=E/2,Wt=E/4,qs=E*2/3,Rt=Math.log10,vt=Math.sign;function Pe(i,t,e){return Math.abs(i-t)<e}function Xs(i){const t=Math.round(i);i=Pe(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Rt(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function Qa(i){const t=[],e=Math.sqrt(i);let s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}function tr(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function le(i){return!tr(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function er(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function vo(i,t,e){let s,n,o;for(s=0,n=i.length;s<n;s++)o=i[s][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ft(i){return i*(E/180)}function Ts(i){return i*(180/E)}function Gs(i){if(!W(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function xo(i,t){const e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s);let o=Math.atan2(s,e);return o<-.5*E&&(o+=z),{angle:o,distance:n}}function is(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function ir(i,t){return(i-t+Ja)%z-E}function et(i){return(i%z+z)%z}function Fe(i,t,e,s){const n=et(i),o=et(t),a=et(e),r=et(o-n),l=et(a-n),c=et(n-o),d=et(n-a);return n===o||n===a||s&&o===a||r>l&&c<d}function K(i,t,e){return Math.max(t,Math.min(e,i))}function sr(i){return K(i,-32768,32767)}function Mt(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function Ds(i,t,e){e=e||(a=>i[a]<t);let s=i.length-1,n=0,o;for(;s-n>1;)o=n+s>>1,e(o)?n=o:s=o;return{lo:n,hi:s}}const Tt=(i,t,e,s)=>Ds(i,e,s?n=>{const o=i[n][t];return o<e||o===e&&i[n+1][t]===e}:n=>i[n][t]<e),nr=(i,t,e)=>Ds(i,e,s=>i[s][t]>=e);function or(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}const wo=["push","pop","shift","splice","unshift"];function ar(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),wo.forEach(e=>{const s="_onData"+Ms(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const a=n.apply(this,o);return i._chartjs.listeners.forEach(r=>{typeof r[s]=="function"&&r[s](...o)}),a}})})}function Ks(i,t){const e=i._chartjs;if(!e)return;const s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(wo.forEach(o=>{delete i[o]}),delete i._chartjs)}function _o(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const ko=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function So(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,ko.call(window,()=>{s=!1,i.apply(t,e)}))}}function rr(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}const Ps=i=>i==="start"?"left":i==="end"?"right":"center",tt=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,lr=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function Mo(i,t,e){const s=t.length;let n=0,o=s;if(i._sorted){const{iScale:a,vScale:r,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,d=a.axis,{min:h,max:u,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(n=Math.min(Tt(l,d,h).lo,e?s:Tt(t,d,a.getPixelForValue(h)).lo),c){const g=l.slice(0,n+1).reverse().findIndex(m=>!O(m[r.axis]));n-=Math.max(0,g)}n=K(n,0,s-1)}if(p){let g=Math.max(Tt(l,a.axis,u,!0).hi+1,e?0:Tt(t,d,a.getPixelForValue(u),!0).hi+1);if(c){const m=l.slice(g-1).findIndex(b=>!O(b[r.axis]));g+=Math.max(0,m)}o=K(g,n,s)-n}else o=s-n}return{start:n,count:o}}function To(i){const{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;const o=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),o}const Ze=i=>i===0||i===1,Js=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*z/e)),Zs=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*z/e)+1,Ae={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*q)+1,easeOutSine:i=>Math.sin(i*q),easeInOutSine:i=>-.5*(Math.cos(E*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Ze(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Ze(i)?i:Js(i,.075,.3),easeOutElastic:i=>Ze(i)?i:Zs(i,.075,.3),easeInOutElastic(i){return Ze(i)?i:i<.5?.5*Js(i*2,.1125,.45):.5+.5*Zs(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-Ae.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?Ae.easeInBounce(i*2)*.5:Ae.easeOutBounce(i*2-1)*.5+.5};function As(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Qs(i){return As(i)?i:new Le(i)}function Hi(i){return As(i)?i:new Le(i).saturate(.5).darken(.1).hexString()}const cr=["x","y","borderWidth","radius","tension"],dr=["color","borderColor","backgroundColor"];function hr(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:dr},numbers:{type:"number",properties:cr}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function ur(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const tn=new Map;function fr(i,t){t=t||{};const e=i+JSON.stringify(t);let s=tn.get(e);return s||(s=new Intl.NumberFormat(i,t),tn.set(e,s)),s}function Ye(i,t,e){return fr(t,e).format(i)}const Do={values(i){return $(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const s=this.chart.options.locale;let n,o=i;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),o=gr(i,e)}const a=Rt(Math.abs(o)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),Ye(i,s,l)},logarithmic(i,t,e){if(i===0)return"0";const s=e[t].significand||i/Math.pow(10,Math.floor(Rt(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?Do.numeric.call(this,i,t,e):""}};function gr(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var Oi={formatters:Do};function pr(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Oi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Zt=Object.create(null),ss=Object.create(null);function Ce(i,t){if(!t)return i;const e=t.split(".");for(let s=0,n=e.length;s<n;++s){const o=e[s];i=i[o]||(i[o]=Object.create(null))}return i}function ji(i,t,e){return typeof t=="string"?Ie(Ce(i,t),e):Ie(Ce(i,""),t)}class mr{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>Hi(n.backgroundColor),this.hoverBorderColor=(s,n)=>Hi(n.borderColor),this.hoverColor=(s,n)=>Hi(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ji(this,t,e)}get(t){return Ce(this,t)}describe(t,e){return ji(ss,t,e)}override(t,e){return ji(Zt,t,e)}route(t,e,s,n){const o=Ce(this,t),a=Ce(this,s),r="_"+e;Object.defineProperties(o,{[r]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[r],c=a[n];return R(l)?Object.assign({},c,l):P(l,c)},set(l){this[r]=l}}})}apply(t){t.forEach(e=>e(this))}}var H=new mr({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[hr,ur,pr]);function br(i){return!i||O(i.size)||O(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function xi(i,t,e,s,n){let o=t[n];return o||(o=t[n]=i.measureText(n).width,e.push(n)),o>s&&(s=o),s}function yr(i,t,e,s){s=s||{};let n=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},o=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let a=0;const r=e.length;let l,c,d,h,u;for(l=0;l<r;l++)if(h=e[l],h!=null&&!$(h))a=xi(i,n,o,a,h);else if($(h))for(c=0,d=h.length;c<d;c++)u=h[c],u!=null&&!$(u)&&(a=xi(i,n,o,a,u));i.restore();const f=o.length/2;if(f>e.length){for(l=0;l<f;l++)delete n[o[l]];o.splice(0,f)}return a}function Vt(i,t,e){const s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function en(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function ns(i,t,e,s){Po(i,t,e,s,null)}function Po(i,t,e,s,n){let o,a,r,l,c,d,h,u;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Za;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(m),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),f){default:n?i.ellipse(e,s,n/2,g,0,0,z):i.arc(e,s,g,0,z),i.closePath();break;case"triangle":d=n?n/2:g,i.moveTo(e+Math.sin(m)*d,s-Math.cos(m)*g),m+=qs,i.lineTo(e+Math.sin(m)*d,s-Math.cos(m)*g),m+=qs,i.lineTo(e+Math.sin(m)*d,s-Math.cos(m)*g),i.closePath();break;case"rectRounded":c=g*.516,l=g-c,a=Math.cos(m+Wt)*l,h=Math.cos(m+Wt)*(n?n/2-c:l),r=Math.sin(m+Wt)*l,u=Math.sin(m+Wt)*(n?n/2-c:l),i.arc(e-h,s-r,c,m-E,m-q),i.arc(e+u,s-a,c,m-q,m),i.arc(e+h,s+r,c,m,m+q),i.arc(e-u,s+a,c,m+q,m+E),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,d=n?n/2:l,i.rect(e-d,s-l,2*d,2*l);break}m+=Wt;case"rectRot":h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+u,s-a),i.lineTo(e+h,s+r),i.lineTo(e-u,s+a),i.closePath();break;case"crossRot":m+=Wt;case"cross":h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+h,s+r),i.moveTo(e+u,s-a),i.lineTo(e-u,s+a);break;case"star":h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+h,s+r),i.moveTo(e+u,s-a),i.lineTo(e-u,s+a),m+=Wt,h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+h,s+r),i.moveTo(e+u,s-a),i.lineTo(e-u,s+a);break;case"line":a=n?n/2:Math.cos(m)*g,r=Math.sin(m)*g,i.moveTo(e-a,s-r),i.lineTo(e+a,s+r);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Dt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function Ri(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Ei(i){i.restore()}function vr(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){const o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function xr(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function wr(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),O(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function _r(i,t,e,s,n){if(n.strikethrough||n.underline){const o=i.measureText(s),a=t-o.actualBoundingBoxLeft,r=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,d=n.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(a,d),i.lineTo(r,d),i.stroke()}}function kr(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Qt(i,t,e,s,n,o={}){const a=$(t)?t:[t],r=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(i.save(),i.font=n.string,wr(i,o),l=0;l<a.length;++l)c=a[l],o.backdrop&&kr(i,o.backdrop),r&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),O(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(c,e,s,o.maxWidth)),i.fillText(c,e,s,o.maxWidth),_r(i,e,s,c,o),s+=Number(n.lineHeight);i.restore()}function ze(i,t){const{x:e,y:s,w:n,h:o,radius:a}=t;i.arc(e+a.topLeft,s+a.topLeft,a.topLeft,1.5*E,E,!0),i.lineTo(e,s+o-a.bottomLeft),i.arc(e+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,E,q,!0),i.lineTo(e+n-a.bottomRight,s+o),i.arc(e+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,q,0,!0),i.lineTo(e+n,s+a.topRight),i.arc(e+n-a.topRight,s+a.topRight,a.topRight,0,-q,!0),i.lineTo(e+a.topLeft,s)}const Sr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Mr=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Tr(i,t){const e=(""+i).match(Sr);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const Dr=i=>+i||0;function Cs(i,t){const e={},s=R(t),n=s?Object.keys(t):t,o=R(i)?s?a=>P(i[a],i[t[a]]):a=>i[a]:()=>i;for(const a of n)e[a]=Dr(o(a));return e}function Ao(i){return Cs(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Kt(i){return Cs(i,["topLeft","topRight","bottomLeft","bottomRight"])}function st(i){const t=Ao(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function X(i,t){i=i||{},t=t||H.font;let e=P(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=P(i.style,t.style);s&&!(""+s).match(Mr)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:P(i.family,t.family),lineHeight:Tr(P(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:P(i.weight,t.weight),string:""};return n.string=br(n),n}function _e(i,t,e,s){let n,o,a;for(n=0,o=i.length;n<o;++n)if(a=i[n],a!==void 0&&a!==void 0)return a}function Pr(i,t,e){const{min:s,max:n}=i,o=bo(t,(n-s)/2),a=(r,l)=>e&&r===0?0:r+l;return{min:a(s,-Math.abs(o)),max:a(n,o)}}function $t(i,t){return Object.assign(Object.create(i),t)}function Os(i,t=[""],e,s,n=()=>i[0]){const o=e||i;typeof s>"u"&&(s=Eo("_fallback",i));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:s,_getTarget:n,override:r=>Os([r,...i],t,o,s)};return new Proxy(a,{deleteProperty(r,l){return delete r[l],delete r._keys,delete i[0][l],!0},get(r,l){return Oo(r,l,()=>Br(l,t,i,r))},getOwnPropertyDescriptor(r,l){return Reflect.getOwnPropertyDescriptor(r._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(r,l){return nn(r).includes(l)},ownKeys(r){return nn(r)},set(r,l,c){const d=r._storage||(r._storage=n());return r[l]=d[l]=c,delete r._keys,!0}})}function ce(i,t,e,s){const n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Co(i,s),setContext:o=>ce(i,o,e,s),override:o=>ce(i.override(o),t,e,s)};return new Proxy(n,{deleteProperty(o,a){return delete o[a],delete i[a],!0},get(o,a,r){return Oo(o,a,()=>Cr(o,a,r))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,a){return Reflect.has(i,a)},ownKeys(){return Reflect.ownKeys(i)},set(o,a,r){return i[a]=r,delete o[a],!0}})}function Co(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:Nt(e)?e:()=>e,isIndexable:Nt(s)?s:()=>s}}const Ar=(i,t)=>i?i+Ms(t):t,Rs=(i,t)=>R(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Oo(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const s=e();return i[t]=s,s}function Cr(i,t,e){const{_proxy:s,_context:n,_subProxy:o,_descriptors:a}=i;let r=s[t];return Nt(r)&&a.isScriptable(t)&&(r=Or(t,r,i,e)),$(r)&&r.length&&(r=Rr(t,r,i,a.isIndexable)),Rs(t,r)&&(r=ce(r,n,o&&o[t],a)),r}function Or(i,t,e,s){const{_proxy:n,_context:o,_subProxy:a,_stack:r}=e;if(r.has(i))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+i);r.add(i);let l=t(o,a||s);return r.delete(i),Rs(i,l)&&(l=Es(n._scopes,n,i,l)),l}function Rr(i,t,e,s){const{_proxy:n,_context:o,_subProxy:a,_descriptors:r}=e;if(typeof o.index<"u"&&s(i))return t[o.index%t.length];if(R(t[0])){const l=t,c=n._scopes.filter(d=>d!==l);t=[];for(const d of l){const h=Es(c,n,i,d);t.push(ce(h,o,a&&a[i],r))}}return t}function Ro(i,t,e){return Nt(i)?i(t,e):i}const Er=(i,t)=>i===!0?t:typeof i=="string"?zt(t,i):void 0;function Lr(i,t,e,s,n){for(const o of t){const a=Er(e,o);if(a){i.add(a);const r=Ro(a._fallback,e,n);if(typeof r<"u"&&r!==e&&r!==s)return r}else if(a===!1&&typeof s<"u"&&e!==s)return null}return!1}function Es(i,t,e,s){const n=t._rootScopes,o=Ro(t._fallback,e,s),a=[...i,...n],r=new Set;r.add(s);let l=sn(r,a,e,o||e,s);return l===null||typeof o<"u"&&o!==e&&(l=sn(r,a,o,l,s),l===null)?!1:Os(Array.from(r),[""],n,o,()=>Ir(t,e,s))}function sn(i,t,e,s,n){for(;e;)e=Lr(i,t,e,s,n);return e}function Ir(i,t,e){const s=i._getTarget();t in s||(s[t]={});const n=s[t];return $(n)&&R(e)?e:n||{}}function Br(i,t,e,s){let n;for(const o of t)if(n=Eo(Ar(o,i),e),typeof n<"u")return Rs(i,n)?Es(e,s,i,n):n}function Eo(i,t){for(const e of t){if(!e)continue;const s=e[i];if(typeof s<"u")return s}}function nn(i){let t=i._keys;return t||(t=i._keys=Fr(i._scopes)),t}function Fr(i){const t=new Set;for(const e of i)for(const s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function Lo(i,t,e,s){const{iScale:n}=i,{key:o="r"}=this._parsing,a=new Array(s);let r,l,c,d;for(r=0,l=s;r<l;++r)c=r+e,d=t[c],a[r]={r:n.parse(zt(d,o),c)};return a}const zr=Number.EPSILON||1e-14,de=(i,t)=>t<i.length&&!i[t].skip&&i[t],Io=i=>i==="x"?"y":"x";function Nr(i,t,e,s){const n=i.skip?t:i,o=t,a=e.skip?t:e,r=is(o,n),l=is(a,o);let c=r/(r+l),d=l/(r+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=s*c,u=s*d;return{previous:{x:o.x-h*(a.x-n.x),y:o.y-h*(a.y-n.y)},next:{x:o.x+u*(a.x-n.x),y:o.y+u*(a.y-n.y)}}}function $r(i,t,e){const s=i.length;let n,o,a,r,l,c=de(i,0);for(let d=0;d<s-1;++d)if(l=c,c=de(i,d+1),!(!l||!c)){if(Pe(t[d],0,zr)){e[d]=e[d+1]=0;continue}n=e[d]/t[d],o=e[d+1]/t[d],r=Math.pow(n,2)+Math.pow(o,2),!(r<=9)&&(a=3/Math.sqrt(r),e[d]=n*a*t[d],e[d+1]=o*a*t[d])}}function Hr(i,t,e="x"){const s=Io(e),n=i.length;let o,a,r,l=de(i,0);for(let c=0;c<n;++c){if(a=r,r=l,l=de(i,c+1),!r)continue;const d=r[e],h=r[s];a&&(o=(d-a[e])/3,r[`cp1${e}`]=d-o,r[`cp1${s}`]=h-o*t[c]),l&&(o=(l[e]-d)/3,r[`cp2${e}`]=d+o,r[`cp2${s}`]=h+o*t[c])}}function jr(i,t="x"){const e=Io(t),s=i.length,n=Array(s).fill(0),o=Array(s);let a,r,l,c=de(i,0);for(a=0;a<s;++a)if(r=l,l=c,c=de(i,a+1),!!l){if(c){const d=c[t]-l[t];n[a]=d!==0?(c[e]-l[e])/d:0}o[a]=r?c?vt(n[a-1])!==vt(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}$r(i,n,o),Hr(i,o,t)}function Qe(i,t,e){return Math.max(Math.min(i,e),t)}function Wr(i,t){let e,s,n,o,a,r=Dt(i[0],t);for(e=0,s=i.length;e<s;++e)a=o,o=r,r=e<s-1&&Dt(i[e+1],t),o&&(n=i[e],a&&(n.cp1x=Qe(n.cp1x,t.left,t.right),n.cp1y=Qe(n.cp1y,t.top,t.bottom)),r&&(n.cp2x=Qe(n.cp2x,t.left,t.right),n.cp2y=Qe(n.cp2y,t.top,t.bottom)))}function Vr(i,t,e,s,n){let o,a,r,l;if(t.spanGaps&&(i=i.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")jr(i,n);else{let c=s?i[i.length-1]:i[0];for(o=0,a=i.length;o<a;++o)r=i[o],l=Nr(c,r,i[Math.min(o+1,a-(s?0:1))%a],t.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,c=r}t.capBezierPoints&&Wr(i,e)}function Ls(){return typeof window<"u"&&typeof document<"u"}function Is(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function wi(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}const Li=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function Ur(i,t){return Li(i).getPropertyValue(t)}const Yr=["top","right","bottom","left"];function Jt(i,t,e){const s={};e=e?"-"+e:"";for(let n=0;n<4;n++){const o=Yr[n];s[o]=parseFloat(i[t+"-"+o+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const qr=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Xr(i,t){const e=i.touches,s=e&&e.length?e[0]:i,{offsetX:n,offsetY:o}=s;let a=!1,r,l;if(qr(n,o,i.target))r=n,l=o;else{const c=t.getBoundingClientRect();r=s.clientX-c.left,l=s.clientY-c.top,a=!0}return{x:r,y:l,box:a}}function qt(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:s}=t,n=Li(e),o=n.boxSizing==="border-box",a=Jt(n,"padding"),r=Jt(n,"border","width"),{x:l,y:c,box:d}=Xr(i,e),h=a.left+(d&&r.left),u=a.top+(d&&r.top);let{width:f,height:p}=t;return o&&(f-=a.width+r.width,p-=a.height+r.height),{x:Math.round((l-h)/f*e.width/s),y:Math.round((c-u)/p*e.height/s)}}function Gr(i,t,e){let s,n;if(t===void 0||e===void 0){const o=i&&Is(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const a=o.getBoundingClientRect(),r=Li(o),l=Jt(r,"border","width"),c=Jt(r,"padding");t=a.width-c.width-l.width,e=a.height-c.height-l.height,s=wi(r.maxWidth,o,"clientWidth"),n=wi(r.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:s||vi,maxHeight:n||vi}}const Et=i=>Math.round(i*10)/10;function Kr(i,t,e,s){const n=Li(i),o=Jt(n,"margin"),a=wi(n.maxWidth,i,"clientWidth")||vi,r=wi(n.maxHeight,i,"clientHeight")||vi,l=Gr(i,t,e);let{width:c,height:d}=l;if(n.boxSizing==="content-box"){const u=Jt(n,"border","width"),f=Jt(n,"padding");c-=f.width+u.width,d-=f.height+u.height}return c=Math.max(0,c-o.width),d=Math.max(0,s?c/s:d-o.height),c=Et(Math.min(c,a,l.maxWidth)),d=Et(Math.min(d,r,l.maxHeight)),c&&!d&&(d=Et(c/2)),(t!==void 0||e!==void 0)&&s&&l.height&&d>l.height&&(d=l.height,c=Et(Math.floor(d*s))),{width:c,height:d}}function on(i,t,e){const s=t||1,n=Et(i.height*s),o=Et(i.width*s);i.height=Et(i.height),i.width=Et(i.width);const a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||a.height!==n||a.width!==o?(i.currentDevicePixelRatio=s,a.height=n,a.width=o,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Jr=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};Ls()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function an(i,t){const e=Ur(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Xt(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Zr(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Qr(i,t,e,s){const n={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},a=Xt(i,n,e),r=Xt(n,o,e),l=Xt(o,t,e),c=Xt(a,r,e),d=Xt(r,l,e);return Xt(c,d,e)}const tl=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},el=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function ae(i,t,e){return i?tl(t,e):el()}function Bo(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function Fo(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function zo(i){return i==="angle"?{between:Fe,compare:ir,normalize:et}:{between:Mt,compare:(t,e)=>t-e,normalize:t=>t}}function rn({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:n}}function il(i,t,e){const{property:s,start:n,end:o}=e,{between:a,normalize:r}=zo(s),l=t.length;let{start:c,end:d,loop:h}=i,u,f;if(h){for(c+=l,d+=l,u=0,f=l;u<f&&a(r(t[c%l][s]),n,o);++u)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:i.style}}function No(i,t,e){if(!e)return[i];const{property:s,start:n,end:o}=e,a=t.length,{compare:r,between:l,normalize:c}=zo(s),{start:d,end:h,loop:u,style:f}=il(i,t,e),p=[];let g=!1,m=null,b,y,w;const x=()=>l(n,w,b)&&r(n,w)!==0,v=()=>r(o,b)===0||l(o,w,b),_=()=>g||x(),k=()=>!g||v();for(let S=d,T=d;S<=h;++S)y=t[S%a],!y.skip&&(b=c(y[s]),b!==w&&(g=l(b,n,o),m===null&&_()&&(m=r(b,n)===0?S:T),m!==null&&k()&&(p.push(rn({start:m,end:S,loop:u,count:a,style:f})),m=null),T=S,w=b));return m!==null&&p.push(rn({start:m,end:h,loop:u,count:a,style:f})),p}function $o(i,t){const e=[],s=i.segments;for(let n=0;n<s.length;n++){const o=No(s[n],i.points,t);o.length&&e.push(...o)}return e}function sl(i,t,e,s){let n=0,o=t-1;if(e&&!s)for(;n<t&&!i[n].skip;)n++;for(;n<t&&i[n].skip;)n++;for(n%=t,e&&(o+=n);o>n&&i[o%t].skip;)o--;return o%=t,{start:n,end:o}}function nl(i,t,e,s){const n=i.length,o=[];let a=t,r=i[t],l;for(l=t+1;l<=e;++l){const c=i[l%n];c.skip||c.stop?r.skip||(s=!1,o.push({start:t%n,end:(l-1)%n,loop:s}),t=a=c.stop?l:null):(a=l,r.skip&&(t=l)),r=c}return a!==null&&o.push({start:t%n,end:a%n,loop:s}),o}function ol(i,t){const e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];const o=!!i._loop,{start:a,end:r}=sl(e,n,o,s);if(s===!0)return ln(i,[{start:a,end:r,loop:o}],e,t);const l=r<a?r+n:r,c=!!i._fullLoop&&a===0&&r===n-1;return ln(i,nl(e,a,l,c),e,t)}function ln(i,t,e,s){return!s||!s.setContext||!e?t:al(i,t,e,s)}function al(i,t,e,s){const n=i._chart.getContext(),o=cn(i.options),{_datasetIndex:a,options:{spanGaps:r}}=i,l=e.length,c=[];let d=o,h=t[0].start,u=h;function f(p,g,m,b){const y=r?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=y;for(;e[g%l].skip;)g+=y;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:b}),d=b,h=g%l)}}for(const p of t){h=r?h:p.start;let g=e[h%l],m;for(u=h+1;u<=p.end;u++){const b=e[u%l];m=cn(s.setContext($t(n,{type:"segment",p0:g,p1:b,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:a}))),rl(m,d)&&f(h,u-1,p.loop,d),g=b,d=m}h<u-1&&f(h,u-1,p.loop,d)}return c}function cn(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function rl(i,t){if(!t)return!1;const e=[],s=function(n,o){return As(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,s)!==JSON.stringify(t,s)}function ti(i,t,e){return i.options.clip?i[e]:t[e]}function ll(i,t){const{xScale:e,yScale:s}=i;return e&&s?{left:ti(e,t,"left"),right:ti(e,t,"right"),top:ti(s,t,"top"),bottom:ti(s,t,"bottom")}:t}function Ho(i,t){const e=t._clip;if(e.disabled)return!1;const s=ll(t,i.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:s.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class cl{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){const o=e.listeners[n],a=e.duration;o.forEach(r=>r({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(s-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=ko.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const o=s.items;let a=o.length-1,r=!1,l;for(;a>=0;--a)l=o[a],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),r=!0):(o[a]=o[o.length-1],o.pop());r&&(n.draw(),this._notify(n,s,t,"progress")),o.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var wt=new cl;const dn="transparent",dl={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const s=Qs(i||dn),n=s.valid&&Qs(t||dn);return n&&n.valid?n.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class hl{constructor(t,e,s,n){const o=e[s];n=_e([t.to,n,o,t.from]);const a=_e([t.from,o,n]);this._active=!0,this._fn=t.fn||dl[t.type||typeof a],this._easing=Ae[t.easing]||Ae.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const n=this._target[this._prop],o=s-this._start,a=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=_e([t.to,e,n,t.from]),this._from=_e([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,n=this._prop,o=this._from,a=this._loop,r=this._to;let l;if(this._active=o!==r&&(a||e<s),!this._active){this._target[n]=r,this._notify(!0);return}if(e<0){this._target[n]=o;return}l=e/s%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(o,r,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}}class jo{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!R(t))return;const e=Object.keys(H.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const o=t[n];if(!R(o))return;const a={};for(const r of e)a[r]=o[r];($(o.properties)&&o.properties||[n]).forEach(r=>{(r===n||!s.has(r))&&s.set(r,a)})})}_animateOptions(t,e){const s=e.options,n=fl(t,s);if(!n)return[];const o=this._createAnimations(n,s);return s.$shared&&ul(t.options.$animations,s).then(()=>{t.options=s},()=>{}),o}_createAnimations(t,e){const s=this._properties,n=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),r=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,e));continue}const d=e[c];let h=o[c];const u=s.get(c);if(h)if(u&&h.active()){h.update(u,d,r);continue}else h.cancel();if(!u||!u.duration){t[c]=d;continue}o[c]=h=new hl(u,t,c,d),n.push(h)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return wt.add(this._chart,s),!0}}function ul(i,t){const e=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const o=i[s[n]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function fl(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function hn(i,t){const e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:s?o:n,end:s?n:o}}function gl(i,t,e){if(e===!1)return!1;const s=hn(i,e),n=hn(t,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function pl(i){let t,e,s,n;return R(i)?(t=i.top,e=i.right,s=i.bottom,n=i.left):t=e=s=n=i,{top:t,right:e,bottom:s,left:n,disabled:i===!1}}function Wo(i,t){const e=[],s=i._getSortedDatasetMetas(t);let n,o;for(n=0,o=s.length;n<o;++n)e.push(s[n].index);return e}function un(i,t,e,s={}){const n=i.keys,o=s.mode==="single";let a,r,l,c;if(t===null)return;let d=!1;for(a=0,r=n.length;a<r;++a){if(l=+n[a],l===e){if(d=!0,s.all)continue;break}c=i.values[l],W(c)&&(o||t===0||vt(t)===vt(c))&&(t+=c)}return!d&&!s.all?0:t}function ml(i,t){const{iScale:e,vScale:s}=t,n=e.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",a=Object.keys(i),r=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],r[l]={[n]:d,[o]:i[d]};return r}function Wi(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function bl(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function yl(i){const{min:t,max:e,minDefined:s,maxDefined:n}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function vl(i,t,e){const s=i[t]||(i[t]={});return s[e]||(s[e]={})}function fn(i,t,e,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const o=i[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function gn(i,t){const{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:o,vScale:a,index:r}=s,l=o.axis,c=a.axis,d=bl(o,a,s),h=t.length;let u;for(let f=0;f<h;++f){const p=t[f],{[l]:g,[c]:m}=p,b=p._stacks||(p._stacks={});u=b[c]=vl(n,d,g),u[r]=m,u._top=fn(u,a,!0,s.type),u._bottom=fn(u,a,!1,s.type);const y=u._visualValues||(u._visualValues={});y[r]=m}}function Vi(i,t){const e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function xl(i,t){return $t(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function wl(i,t,e){return $t(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function me(i,t){const e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(const n of t){const o=n._stacks;if(!o||o[s]===void 0||o[s][e]===void 0)return;delete o[s][e],o[s]._visualValues!==void 0&&o[s]._visualValues[e]!==void 0&&delete o[s]._visualValues[e]}}}const Ui=i=>i==="reset"||i==="none",pn=(i,t)=>t?i:Object.assign({},i),_l=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:Wo(e,!0),values:null};class gt{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Wi(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&me(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),n=(h,u,f,p)=>h==="x"?u:h==="r"?p:f,o=e.xAxisID=P(s.xAxisID,Vi(t,"x")),a=e.yAxisID=P(s.yAxisID,Vi(t,"y")),r=e.rAxisID=P(s.rAxisID,Vi(t,"r")),l=e.indexAxis,c=e.iAxisID=n(l,o,a,r),d=e.vAxisID=n(l,a,o,r);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ks(this._data,this),t._stacked&&me(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(R(e)){const n=this._cachedMeta;this._data=ml(e,n)}else if(s!==e){if(s){Ks(s,this);const n=this._cachedMeta;me(n),n._parsed=[]}e&&Object.isExtensible(e)&&ar(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=Wi(e.vScale,e),e.stack!==s.stack&&(n=!0,me(e),e.stack=s.stack),this._resyncElements(t),(n||o!==e._stacked)&&(gn(this,e._parsed),e._stacked=Wi(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:a}=s,r=o.axis;let l=t===0&&e===n.length?!0:s._sorted,c=t>0&&s._parsed[t-1],d,h,u;if(this._parsing===!1)s._parsed=n,s._sorted=!0,u=n;else{$(n[t])?u=this.parseArrayData(s,n,t,e):R(n[t])?u=this.parseObjectData(s,n,t,e):u=this.parsePrimitiveData(s,n,t,e);const f=()=>h[r]===null||c&&h[r]<c[r];for(d=0;d<e;++d)s._parsed[d+t]=h=u[d],l&&(f()&&(l=!1),c=h);s._sorted=l}a&&gn(this,u)}parsePrimitiveData(t,e,s,n){const{iScale:o,vScale:a}=t,r=o.axis,l=a.axis,c=o.getLabels(),d=o===a,h=new Array(n);let u,f,p;for(u=0,f=n;u<f;++u)p=u+s,h[u]={[r]:d||o.parse(c[p],p),[l]:a.parse(e[p],p)};return h}parseArrayData(t,e,s,n){const{xScale:o,yScale:a}=t,r=new Array(n);let l,c,d,h;for(l=0,c=n;l<c;++l)d=l+s,h=e[d],r[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return r}parseObjectData(t,e,s,n){const{xScale:o,yScale:a}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let d,h,u,f;for(d=0,h=n;d<h;++d)u=d+s,f=e[u],c[d]={x:o.parse(zt(f,r),u),y:a.parse(zt(f,l),u)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const n=this.chart,o=this._cachedMeta,a=e[t.axis],r={keys:Wo(n,!0),values:e._stacks[t.axis]._visualValues};return un(r,a,o.index,{mode:s})}updateRangeFromParsed(t,e,s,n){const o=s[e.axis];let a=o===null?NaN:o;const r=n&&s._stacks[e.axis];n&&r&&(n.values=r,a=un(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const s=this._cachedMeta,n=s._parsed,o=s._sorted&&t===s.iScale,a=n.length,r=this._getOtherScale(t),l=_l(e,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=yl(r);let u,f;function p(){f=n[u];const g=f[r.axis];return!W(f[t.axis])||d>g||h<g}for(u=0;u<a&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),o));++u);if(o){for(u=a-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let n,o,a;for(n=0,o=e.length;n<o;++n)a=e[n][t.axis],W(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=pl(P(this.options.clip,gl(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,n=s.data||[],o=e.chartArea,a=[],r=this._drawStart||0,l=this._drawCount||n.length-r,c=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,o,r,l),d=r;d<r+l;++d){const h=n[d];h.hidden||(h.active&&c?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=wl(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=xl(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const n=e==="active",o=this._cachedDataOpts,a=t+"-"+e,r=o[a],l=this.enableOptionSharing&&Be(s);if(r)return pn(r,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,t),h=n?[`${t}Hover`,"hover",t,""]:[t,""],u=c.getOptionScopes(this.getDataset(),d),f=Object.keys(H.elements[t]),p=()=>this.getContext(s,n,e),g=c.resolveNamedOptions(u,f,p,h);return g.$shared&&(g.$shared=l,o[a]=Object.freeze(pn(g,l))),g}_resolveAnimations(t,e,s){const n=this.chart,o=this._cachedDataOpts,a=`animation-${e}`,r=o[a];if(r)return r;let l;if(n.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,e),u=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(u,this.getContext(t,s,e))}const c=new jo(n,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Ui(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,s),{sharedOptions:o,includeOptions:a}}updateElement(t,e,s,n){Ui(n)?Object.assign(t,s):this._resolveAnimations(e,n).update(t,s)}updateSharedOptions(t,e,s){t&&!Ui(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,s,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[r,l,c]of this._syncList)this[r](l,c);this._syncList=[];const n=s.length,o=e.length,a=Math.min(o,n);a&&this.parse(0,a),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,s=!0){const n=this._cachedMeta,o=n.data,a=t+e;let r;const l=c=>{for(c.length+=e,r=c.length-1;r>=a;r--)c[r]=c[r-e]};for(l(o),r=t;r<a;++r)o[r]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,e),s&&this.updateElements(o,t,e,"reset")}updateElements(t,e,s,n){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,e);s._stacked&&me(s,n)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,n]=t;this[e](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}M(gt,"defaults",{}),M(gt,"datasetElementType",null),M(gt,"dataElementType",null);function kl(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let s=[];for(let n=0,o=e.length;n<o;n++)s=s.concat(e[n].controller.getAllParsedValues(i));i._cache.$bar=_o(s.sort((n,o)=>n-o))}return i._cache.$bar}function Sl(i){const t=i.iScale,e=kl(t,i.type);let s=t._length,n,o,a,r;const l=()=>{a===32767||a===-32768||(Be(r)&&(s=Math.min(s,Math.abs(a-r)||s)),r=a)};for(n=0,o=e.length;n<o;++n)a=t.getPixelForValue(e[n]),l();for(r=void 0,n=0,o=t.ticks.length;n<o;++n)a=t.getPixelForTick(n),l();return s}function Ml(i,t,e,s){const n=e.barThickness;let o,a;return O(n)?(o=t.min*e.categoryPercentage,a=e.barPercentage):(o=n*s,a=1),{chunk:o/s,ratio:a,start:t.pixels[i]-o/2}}function Tl(i,t,e,s){const n=t.pixels,o=n[i];let a=i>0?n[i-1]:null,r=i<n.length-1?n[i+1]:null;const l=e.categoryPercentage;a===null&&(a=o-(r===null?t.end-t.start:r-o)),r===null&&(r=o+o-a);const c=o-(o-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/s,ratio:e.barPercentage,start:c}}function Dl(i,t,e,s){const n=e.parse(i[0],s),o=e.parse(i[1],s),a=Math.min(n,o),r=Math.max(n,o);let l=a,c=r;Math.abs(a)>Math.abs(r)&&(l=r,c=a),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:o,min:a,max:r}}function Vo(i,t,e,s){return $(i)?Dl(i,t,e,s):t[e.axis]=e.parse(i,s),t}function mn(i,t,e,s){const n=i.iScale,o=i.vScale,a=n.getLabels(),r=n===o,l=[];let c,d,h,u;for(c=e,d=e+s;c<d;++c)u=t[c],h={},h[n.axis]=r||n.parse(a[c],c),l.push(Vo(u,h,o,c));return l}function Yi(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Pl(i,t,e){return i!==0?vt(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Al(i){let t,e,s,n,o;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(n="end",o="start"):(n="start",o="end"),{start:e,end:s,reverse:t,top:n,bottom:o}}function Cl(i,t,e,s){let n=t.borderSkipped;const o={};if(!n){i.borderSkipped=o;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:r,reverse:l,top:c,bottom:d}=Al(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=c:(e._bottom||0)===s?n=d:(o[bn(d,a,r,l)]=!0,n=c)),o[bn(n,a,r,l)]=!0,i.borderSkipped=o}function bn(i,t,e,s){return s?(i=Ol(i,t,e),i=yn(i,e,t)):i=yn(i,t,e),i}function Ol(i,t,e){return i===t?e:i===e?t:i}function yn(i,t,e){return i==="start"?t:i==="end"?e:i}function Rl(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class li extends gt{parsePrimitiveData(t,e,s,n){return mn(t,e,s,n)}parseArrayData(t,e,s,n){return mn(t,e,s,n)}parseObjectData(t,e,s,n){const{iScale:o,vScale:a}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?r:l,d=a.axis==="x"?r:l,h=[];let u,f,p,g;for(u=s,f=s+n;u<f;++u)g=e[u],p={},p[o.axis]=o.parse(zt(g,c),u),h.push(Vo(zt(g,d),p,a,u));return h}updateRangeFromParsed(t,e,s,n){super.updateRangeFromParsed(t,e,s,n);const o=s._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:n}=e,o=this.getParsed(t),a=o._custom,r=Yi(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,n){const o=n==="reset",{index:a,_cachedMeta:{vScale:r}}=this,l=r.getBasePixel(),c=r.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,n);for(let f=e;f<e+s;f++){const p=this.getParsed(f),g=o||O(p[r.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,d),b=(p._stacks||{})[r.axis],y={horizontal:c,base:g.base,enableBorderRadius:!b||Yi(p._custom)||a===b._top||a===b._bottom,x:c?g.head:m.center,y:c?m.center:g.head,height:c?m.size:Math.abs(g.size),width:c?Math.abs(g.size):m.size};u&&(y.options=h||this.resolveDataElementOptions(f,t[f].active?"active":n));const w=y.options||t[f].options;Cl(y,w,b,a),Rl(y,w,d.ratio),this.updateElement(t[f],f,y,n)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=s.options.stacked,a=[],r=this._cachedMeta.controller.getParsed(e),l=r&&r[s.axis],c=d=>{const h=d._parsed.find(f=>f[s.axis]===l),u=h&&h[d.vScale.axis];if(O(u)||isNaN(u))return!0};for(const d of n)if(!(e!==void 0&&c(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[P(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const n=this._getStacks(t,s),o=e!==void 0?n.indexOf(e):-1;return o===-1?n.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,n=[];let o,a;for(o=0,a=e.data.length;o<a;++o)n.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const r=t.barThickness;return{min:r||Sl(e),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:n},options:{base:o,minBarLength:a}}=this,r=o||0,l=this.getParsed(t),c=l._custom,d=Yi(c);let h=l[e.axis],u=0,f=s?this.applyStack(e,l,s):h,p,g;f!==h&&(u=f-h,f=h),d&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&vt(h)!==vt(c.barEnd)&&(u=0),u+=h);const m=!O(o)&&!d?o:u;let b=e.getPixelForValue(m);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(u+f):p=b,g=p-b,Math.abs(g)<a){g=Pl(g,e,r)*a,h===r&&(b-=g/2);const y=e.getPixelForDecimal(0),w=e.getPixelForDecimal(1),x=Math.min(y,w),v=Math.max(y,w);b=Math.max(Math.min(b,v),x),p=b+g,s&&!d&&(l._stacks[e.axis]._visualValues[n]=e.getValueForPixel(p)-e.getValueForPixel(b))}if(b===e.getPixelForValue(r)){const y=vt(g)*e.getLineWidthForValue(r)/2;b+=y,g-=y}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(t,e){const s=e.scale,n=this.options,o=n.skipNull,a=P(n.maxBarThickness,1/0);let r,l;const c=this._getAxisCount();if(e.grouped){const d=o?this._getStackCount(t):e.stackCount,h=n.barThickness==="flex"?Tl(t,e,n,d*c):Ml(t,e,n,d*c),u=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(P(u,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+f;r=h.start+h.chunk*p+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else r=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(a,e.min*e.ratio);return{base:r-l/2,head:r+l/2,center:r,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,n=s.length;let o=0;for(;o<n;++o)this.getParsed(o)[e.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}M(li,"id","bar"),M(li,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),M(li,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ci extends gt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,n){const o=super.parsePrimitiveData(t,e,s,n);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(t,e,s,n){const o=super.parseArrayData(t,e,s,n);for(let a=0;a<o.length;a++){const r=e[s+a];o[a]._custom=P(r[2],this.resolveDataElementOptions(a+s).radius)}return o}parseObjectData(t,e,s,n){const o=super.parseObjectData(t,e,s,n);for(let a=0;a<o.length;a++){const r=e[s+a];o[a]._custom=P(r&&r.r&&+r.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=e,a=this.getParsed(t),r=n.getLabelForValue(a.x),l=o.getLabelForValue(a.y),c=a._custom;return{label:s[t]||"",value:"("+r+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,n){const o=n==="reset",{iScale:a,vScale:r}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,n),d=a.axis,h=r.axis;for(let u=e;u<e+s;u++){const f=t[u],p=!o&&this.getParsed(u),g={},m=g[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(p[d]),b=g[h]=o?r.getBasePixel():r.getPixelForValue(p[h]);g.skip=isNaN(m)||isNaN(b),c&&(g.options=l||this.resolveDataElementOptions(u,f.active?"active":n),o&&(g.options.radius=0)),this.updateElement(f,u,g,n)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return e!=="active"&&(n.radius=0),n.radius+=P(s&&s._custom,o),n}}M(ci,"id","bubble"),M(ci,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),M(ci,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function El(i,t,e){let s=1,n=1,o=0,a=0;if(t<z){const r=i,l=r+t,c=Math.cos(r),d=Math.sin(r),h=Math.cos(l),u=Math.sin(l),f=(w,x,v)=>Fe(w,r,l,!0)?1:Math.max(x,x*e,v,v*e),p=(w,x,v)=>Fe(w,r,l,!0)?-1:Math.min(x,x*e,v,v*e),g=f(0,c,h),m=f(q,d,u),b=p(E,c,h),y=p(E+q,d,u);s=(g-b)/2,n=(m-y)/2,o=-(g+b)/2,a=-(m+y)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:a}}class Gt extends gt{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let o=l=>+s[l];if(R(s[t])){const{key:l="value"}=this._parsing;o=c=>+zt(s[c],l)}let a,r;for(a=t,r=t+e;a<r;++a)n._parsed[a]=o(a)}}_getRotation(){return ft(this.options.rotation-90)}_getCircumference(){return ft(this.options.circumference)}_getRotationExtents(){let t=z,e=-z;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),a=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,n=this._cachedMeta,o=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,r=Math.max((Math.min(s.width,s.height)-a)/2,0),l=Math.min(Ua(this.options.cutout,r),1),c=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:u,ratioY:f,offsetX:p,offsetY:g}=El(h,d,l),m=(s.width-a)/u,b=(s.height-a)/f,y=Math.max(Math.min(m,b)/2,0),w=bo(this.options.radius,y),x=Math.max(w*l,0),v=(w-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,n.total=this.calculateTotal(),this.outerRadius=w-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const s=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/z)}updateElements(t,e,s,n){const o=n==="reset",a=this.chart,r=a.chartArea,c=a.options.animation,d=(r.left+r.right)/2,h=(r.top+r.bottom)/2,u=o&&c.animateScale,f=u?0:this.innerRadius,p=u?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,n);let b=this._getRotation(),y;for(y=0;y<e;++y)b+=this._circumference(y,o);for(y=e;y<e+s;++y){const w=this._circumference(y,o),x=t[y],v={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:p,innerRadius:f};m&&(v.options=g||this.resolveDataElementOptions(y,x.active?"active":n)),b+=w,this.updateElement(x,y,v,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,n;for(n=0;n<e.length;n++){const o=t._parsed[n];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!e[n].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?z*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=Ye(e._parsed[t],s.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const s=this.chart;let n,o,a,r,l;if(!t){for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){a=s.getDatasetMeta(n),t=a.data,r=a.controller;break}}if(!t)return 0;for(n=0,o=t.length;n<o;++n)l=r.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,n=t.length;s<n;++s){const o=this.resolveDataElementOptions(s);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(P(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}M(Gt,"id","doughnut"),M(Gt,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),M(Gt,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),M(Gt,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,c)=>{const h=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:n,pointStyle:s,borderRadius:a&&(r||h.borderRadius),index:c}}):[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}});class di extends gt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:n=[],_dataset:o}=e,a=this.chart._animationsDisabled;let{start:r,count:l}=Mo(e,n,a);this._drawStart=r,this._drawCount=l,To(e)&&(r=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=n;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:c},t),this.updateElements(n,r,l,t)}updateElements(t,e,s,n){const o=n==="reset",{iScale:a,vScale:r,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(e,n),u=a.axis,f=r.axis,{spanGaps:p,segment:g}=this.options,m=le(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||n==="none",y=e+s,w=t.length;let x=e>0&&this.getParsed(e-1);for(let v=0;v<w;++v){const _=t[v],k=b?_:{};if(v<e||v>=y){k.skip=!0;continue}const S=this.getParsed(v),T=O(S[f]),A=k[u]=a.getPixelForValue(S[u],v),D=k[f]=o||T?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,S,l):S[f],v);k.skip=isNaN(A)||isNaN(D)||T,k.stop=v>0&&Math.abs(S[u]-x[u])>m,g&&(k.parsed=S,k.raw=c.data[v]),h&&(k.options=d||this.resolveDataElementOptions(v,_.active?"active":n)),b||this.updateElement(_,v,k,n),x=S}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}M(di,"id","line"),M(di,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),M(di,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Oe extends gt{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=Ye(e._parsed[t].r,s.options.locale);return{label:n[t]||"",value:o}}parseObjectData(t,e,s,n){return Lo.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(n/2,0),a=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),r=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,s,n){const o=n==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,h=c.yCenter,u=c.getIndexAngle(0)-.5*E;let f=u,p;const g=360/this.countVisibleElements();for(p=0;p<e;++p)f+=this._computeAngle(p,n,g);for(p=e;p<e+s;p++){const m=t[p];let b=f,y=f+this._computeAngle(p,n,g),w=a.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=y,o&&(l.animateScale&&(w=0),l.animateRotate&&(b=y=u));const x={x:d,y:h,innerRadius:0,outerRadius:w,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(p,m.active?"active":n)};this.updateElement(m,p,x,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?ft(this.resolveDataElementOptions(t,e).angle||s):0}}M(Oe,"id","polarArea"),M(Oe,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),M(Oe,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((o,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class os extends Gt{}M(os,"id","pie"),M(os,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class hi extends gt{getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,n){return Lo.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta,s=e.dataset,n=e.data||[],o=e.iScale.getLabels();if(s.points=n,t!=="resize"){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);const r={_loop:!0,_fullLoop:o.length===n.length,options:a};this.updateElement(s,void 0,r,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,s,n){const o=this._cachedMeta.rScale,a=n==="reset";for(let r=e;r<e+s;r++){const l=t[r],c=this.resolveDataElementOptions(r,l.active?"active":n),d=o.getPointPositionForValue(r,this.getParsed(r).r),h=a?o.xCenter:d.x,u=a?o.yCenter:d.y,f={x:h,y:u,angle:d.angle,skip:isNaN(h)||isNaN(u),options:c};this.updateElement(l,r,f,n)}}}M(hi,"id","radar"),M(hi,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),M(hi,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class ui extends gt{getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=e,a=this.getParsed(t),r=n.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:s[t]||"",value:"("+r+", "+l+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,n=this.chart._animationsDisabled;let{start:o,count:a}=Mo(e,s,n);if(this._drawStart=o,this._drawCount=a,To(e)&&(o=0,a=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:l}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!l._decimated,r.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!n,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,o,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,n){const o=n==="reset",{iScale:a,vScale:r,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(e,n),h=this.getSharedOptions(d),u=this.includeOptions(n,h),f=a.axis,p=r.axis,{spanGaps:g,segment:m}=this.options,b=le(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||n==="none";let w=e>0&&this.getParsed(e-1);for(let x=e;x<e+s;++x){const v=t[x],_=this.getParsed(x),k=y?v:{},S=O(_[p]),T=k[f]=a.getPixelForValue(_[f],x),A=k[p]=o||S?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,_,l):_[p],x);k.skip=isNaN(T)||isNaN(A)||S,k.stop=x>0&&Math.abs(_[f]-w[f])>b,m&&(k.parsed=_,k.raw=c.data[x]),u&&(k.options=h||this.resolveDataElementOptions(x,v.active?"active":n)),y||this.updateElement(v,x,k,n),w=_}this.updateSharedOptions(h,n,d)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let r=0;for(let l=e.length-1;l>=0;--l)r=Math.max(r,e[l].size(this.resolveDataElementOptions(l))/2);return r>0&&r}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!e.length)return n;const o=e[0].size(this.resolveDataElementOptions(0)),a=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,o,a)/2}}M(ui,"id","scatter"),M(ui,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),M(ui,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ll=Object.freeze({__proto__:null,BarController:li,BubbleController:ci,DoughnutController:Gt,LineController:di,PieController:os,PolarAreaController:Oe,RadarController:hi,ScatterController:ui});function Ut(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Bs{constructor(t){M(this,"options");this.options=t||{}}static override(t){Object.assign(Bs.prototype,t)}init(){}formats(){return Ut()}parse(){return Ut()}format(){return Ut()}add(){return Ut()}diff(){return Ut()}startOf(){return Ut()}endOf(){return Ut()}}var Il={_date:Bs};function Bl(i,t,e,s){const{controller:n,data:o,_sorted:a}=i,r=n._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(r&&t===r.axis&&t!=="r"&&a&&o.length){const c=r._reversePixels?nr:Tt;if(s){if(n._sharedOptions){const d=o[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const u=c(o,t,e-h),f=c(o,t,e+h);return{lo:u.lo,hi:f.hi}}}}else{const d=c(o,t,e);if(l){const{vScale:h}=n._cachedMeta,{_parsed:u}=i,f=u.slice(0,d.lo+1).reverse().findIndex(g=>!O(g[h.axis]));d.lo-=Math.max(0,f);const p=u.slice(d.hi).findIndex(g=>!O(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:o.length-1}}function Ii(i,t,e,s,n){const o=i.getSortedVisibleDatasetMetas(),a=e[t];for(let r=0,l=o.length;r<l;++r){const{index:c,data:d}=o[r],{lo:h,hi:u}=Bl(o[r],t,a,n);for(let f=h;f<=u;++f){const p=d[f];p.skip||s(p,c,f)}}}function Fl(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,n){const o=t?Math.abs(s.x-n.x):0,a=e?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function qi(i,t,e,s,n){const o=[];return!n&&!i.isPointInArea(t)||Ii(i,e,t,function(r,l,c){!n&&!Dt(r,i.chartArea,0)||r.inRange(t.x,t.y,s)&&o.push({element:r,datasetIndex:l,index:c})},!0),o}function zl(i,t,e,s){let n=[];function o(a,r,l){const{startAngle:c,endAngle:d}=a.getProps(["startAngle","endAngle"],s),{angle:h}=xo(a,{x:t.x,y:t.y});Fe(h,c,d)&&n.push({element:a,datasetIndex:r,index:l})}return Ii(i,e,t,o),n}function Nl(i,t,e,s,n,o){let a=[];const r=Fl(e);let l=Number.POSITIVE_INFINITY;function c(d,h,u){const f=d.inRange(t.x,t.y,n);if(s&&!f)return;const p=d.getCenterPoint(n);if(!(!!o||i.isPointInArea(p))&&!f)return;const m=r(t,p);m<l?(a=[{element:d,datasetIndex:h,index:u}],l=m):m===l&&a.push({element:d,datasetIndex:h,index:u})}return Ii(i,e,t,c),a}function Xi(i,t,e,s,n,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!s?zl(i,t,e,n):Nl(i,t,e,s,n,o)}function vn(i,t,e,s,n){const o=[],a=e==="x"?"inXRange":"inYRange";let r=!1;return Ii(i,e,t,(l,c,d)=>{l[a]&&l[a](t[e],n)&&(o.push({element:l,datasetIndex:c,index:d}),r=r||l.inRange(t.x,t.y,n))}),s&&!r?[]:o}var $l={modes:{index(i,t,e,s){const n=qt(t,i),o=e.axis||"x",a=e.includeInvisible||!1,r=e.intersect?qi(i,n,o,s,a):Xi(i,n,o,!1,s,a),l=[];return r.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{const d=r[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(i,t,e,s){const n=qt(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;let r=e.intersect?qi(i,n,o,s,a):Xi(i,n,o,!1,s,a);if(r.length>0){const l=r[0].datasetIndex,c=i.getDatasetMeta(l).data;r=[];for(let d=0;d<c.length;++d)r.push({element:c[d],datasetIndex:l,index:d})}return r},point(i,t,e,s){const n=qt(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;return qi(i,n,o,s,a)},nearest(i,t,e,s){const n=qt(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;return Xi(i,n,o,e.intersect,s,a)},x(i,t,e,s){const n=qt(t,i);return vn(i,n,"x",e.intersect,s)},y(i,t,e,s){const n=qt(t,i);return vn(i,n,"y",e.intersect,s)}}};const Uo=["left","top","right","bottom"];function be(i,t){return i.filter(e=>e.pos===t)}function xn(i,t){return i.filter(e=>Uo.indexOf(e.pos)===-1&&e.box.axis===t)}function ye(i,t){return i.sort((e,s)=>{const n=t?s:e,o=t?e:s;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function Hl(i){const t=[];let e,s,n,o,a,r;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:o,options:{stack:a,stackWeight:r=1}}=n,t.push({index:e,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&o+a,stackWeight:r});return t}function jl(i){const t={};for(const e of i){const{stack:s,pos:n,stackWeight:o}=e;if(!s||!Uo.includes(n))continue;const a=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return t}function Wl(i,t){const e=jl(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let o,a,r;for(o=0,a=i.length;o<a;++o){r=i[o];const{fullSize:l}=r.box,c=e[r.stack],d=c&&r.stackWeight/c.weight;r.horizontal?(r.width=d?d*s:l&&t.availableWidth,r.height=n):(r.width=s,r.height=d?d*n:l&&t.availableHeight)}return e}function Vl(i){const t=Hl(i),e=ye(t.filter(c=>c.box.fullSize),!0),s=ye(be(t,"left"),!0),n=ye(be(t,"right")),o=ye(be(t,"top"),!0),a=ye(be(t,"bottom")),r=xn(t,"x"),l=xn(t,"y");return{fullSize:e,leftAndTop:s.concat(o),rightAndBottom:n.concat(l).concat(a).concat(r),chartArea:be(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:o.concat(a).concat(r)}}function wn(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function Yo(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function Ul(i,t,e,s){const{pos:n,box:o}=e,a=i.maxPadding;if(!R(n)){e.size&&(i[n]-=e.size);const h=s[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?o.height:o.width),e.size=h.size/h.count,i[n]+=e.size}o.getPadding&&Yo(a,o.getPadding());const r=Math.max(0,t.outerWidth-wn(a,i,"left","right")),l=Math.max(0,t.outerHeight-wn(a,i,"top","bottom")),c=r!==i.w,d=l!==i.h;return i.w=r,i.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function Yl(i){const t=i.maxPadding;function e(s){const n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function ql(i,t){const e=t.maxPadding;function s(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{o[a]=Math.max(t[a],e[a])}),o}return s(i?["left","right"]:["top","bottom"])}function ke(i,t,e,s){const n=[];let o,a,r,l,c,d;for(o=0,a=i.length,c=0;o<a;++o){r=i[o],l=r.box,l.update(r.width||t.w,r.height||t.h,ql(r.horizontal,t));const{same:h,other:u}=Ul(t,e,r,s);c|=h&&n.length,d=d||u,l.fullSize||n.push(r)}return c&&ke(n,t,e,s)||d}function ei(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function _n(i,t,e,s){const n=e.padding;let{x:o,y:a}=t;for(const r of i){const l=r.box,c=s[r.stack]||{placed:0,weight:1},d=r.stackWeight/c.weight||1;if(r.horizontal){const h=t.w*d,u=c.size||l.height;Be(c.start)&&(a=c.start),l.fullSize?ei(l,n.left,a,e.outerWidth-n.right-n.left,u):ei(l,t.left+c.placed,a,h,u),c.start=a,c.placed+=h,a=l.bottom}else{const h=t.h*d,u=c.size||l.width;Be(c.start)&&(o=c.start),l.fullSize?ei(l,o,n.top,u,e.outerHeight-n.bottom-n.top):ei(l,o,t.top+c.placed,u,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=a}var it={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;const n=st(i.options.layout.padding),o=Math.max(t-n.width,0),a=Math.max(e-n.height,0),r=Vl(i.boxes),l=r.vertical,c=r.horizontal;L(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/d,hBoxMaxHeight:a/2}),u=Object.assign({},n);Yo(u,st(s));const f=Object.assign({maxPadding:u,w:o,h:a,x:n.left,y:n.top},n),p=Wl(l.concat(c),h);ke(r.fullSize,f,h,p),ke(l,f,h,p),ke(c,f,h,p)&&ke(l,f,h,p),Yl(f),_n(r.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,_n(r.rightAndBottom,f,h,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},L(r.chartArea,g=>{const m=g.box;Object.assign(m,i.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class qo{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}}class Xl extends qo{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const fi="$chartjs",Gl={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},kn=i=>i===null||i==="";function Kl(i,t){const e=i.style,s=i.getAttribute("height"),n=i.getAttribute("width");if(i[fi]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",kn(n)){const o=an(i,"width");o!==void 0&&(i.width=o)}if(kn(s))if(i.style.height==="")i.height=i.width/(t||2);else{const o=an(i,"height");o!==void 0&&(i.height=o)}return i}const Xo=Jr?{passive:!0}:!1;function Jl(i,t,e){i&&i.addEventListener(t,e,Xo)}function Zl(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,Xo)}function Ql(i,t){const e=Gl[i.type]||i.type,{x:s,y:n}=qt(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:n!==void 0?n:null}}function _i(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function tc(i,t,e){const s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(const r of o)a=a||_i(r.addedNodes,s),a=a&&!_i(r.removedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function ec(i,t,e){const s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(const r of o)a=a||_i(r.removedNodes,s),a=a&&!_i(r.addedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Ne=new Map;let Sn=0;function Go(){const i=window.devicePixelRatio;i!==Sn&&(Sn=i,Ne.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function ic(i,t){Ne.size||window.addEventListener("resize",Go),Ne.set(i,t)}function sc(i){Ne.delete(i),Ne.size||window.removeEventListener("resize",Go)}function nc(i,t,e){const s=i.canvas,n=s&&Is(s);if(!n)return;const o=So((r,l)=>{const c=n.clientWidth;e(r,l),c<n.clientWidth&&e()},window),a=new ResizeObserver(r=>{const l=r[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return a.observe(n),ic(i,o),a}function Gi(i,t,e){e&&e.disconnect(),t==="resize"&&sc(i)}function oc(i,t,e){const s=i.canvas,n=So(o=>{i.ctx!==null&&e(Ql(o,i))},i);return Jl(s,t,n),n}class ac extends qo{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(Kl(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[fi])return!1;const s=e[fi].initial;["height","width"].forEach(o=>{const a=s[o];O(a)?e.removeAttribute(o):e.setAttribute(o,a)});const n=s.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[fi],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),a={attach:tc,detach:ec,resize:nc}[e]||oc;n[e]=a(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),n=s[e];if(!n)return;({attach:Gi,detach:Gi,resize:Gi}[e]||Zl)(t,e,n),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return Kr(t,e,s,n)}isAttached(t){const e=t&&Is(t);return!!(e&&e.isConnected)}}function rc(i){return!Ls()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Xl:ac}class pt{constructor(){M(this,"x");M(this,"y");M(this,"active",!1);M(this,"options");M(this,"$animations")}tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return le(this.x)&&le(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const n={};return t.forEach(o=>{n[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),n}}M(pt,"defaults",{}),M(pt,"defaultRoutes");function lc(i,t){const e=i.options.ticks,s=cc(i),n=Math.min(e.maxTicksLimit||s,s),o=e.major.enabled?hc(t):[],a=o.length,r=o[0],l=o[a-1],c=[];if(a>n)return uc(t,c,o,a/n),c;const d=dc(o,t,n);if(a>0){let h,u;const f=a>1?Math.round((l-r)/(a-1)):null;for(ii(t,c,d,O(f)?0:r-f,r),h=0,u=a-1;h<u;h++)ii(t,c,d,o[h],o[h+1]);return ii(t,c,d,l,O(f)?t.length:l+f),c}return ii(t,c,d),c}function cc(i){const t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),n=i._maxLength/e;return Math.floor(Math.min(s,n))}function dc(i,t,e){const s=fc(i),n=t.length/e;if(!s)return Math.max(n,1);const o=Qa(s);for(let a=0,r=o.length-1;a<r;a++){const l=o[a];if(l>n)return l}return Math.max(n,1)}function hc(i){const t=[];let e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function uc(i,t,e,s){let n=0,o=e[0],a;for(s=Math.ceil(s),a=0;a<i.length;a++)a===o&&(t.push(i[a]),n++,o=e[n*s])}function ii(i,t,e,s,n){const o=P(s,0),a=Math.min(P(n,i.length),i.length);let r=0,l,c,d;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),d=o;d<0;)r++,d=Math.round(o+r*e);for(c=Math.max(o,0);c<a;c++)c===d&&(t.push(i[c]),r++,d=Math.round(o+r*e))}function fc(i){const t=i.length;let e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}const gc=i=>i==="left"?"right":i==="right"?"left":i,Mn=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Tn=(i,t)=>Math.min(t||i,i);function Dn(i,t){const e=[],s=i.length/t,n=i.length;let o=0;for(;o<n;o+=s)e.push(i[Math.floor(o)]);return e}function pc(i,t,e){const s=i.ticks.length,n=Math.min(t,s-1),o=i._startPixel,a=i._endPixel,r=1e-6;let l=i.getPixelForTick(n),c;if(!(e&&(s===1?c=Math.max(l-o,a-l):t===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<o-r||l>a+r)))return l}function mc(i,t){L(i,e=>{const s=e.gc,n=s.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[s[o]];s.splice(0,n)}})}function ve(i){return i.drawTicks?i.tickLength:0}function Pn(i,t){if(!i.display)return 0;const e=X(i.font,t),s=st(i.padding);return($(i.text)?i.text.length:1)*e.lineHeight+s.height}function bc(i,t){return $t(i,{scale:t,type:"scale"})}function yc(i,t,e){return $t(i,{tick:e,index:t,type:"tick"})}function vc(i,t,e){let s=Ps(i);return(e&&t!=="right"||!e&&t==="right")&&(s=gc(s)),s}function xc(i,t,e,s){const{top:n,left:o,bottom:a,right:r,chart:l}=i,{chartArea:c,scales:d}=l;let h=0,u,f,p;const g=a-n,m=r-o;if(i.isHorizontal()){if(f=tt(s,o,r),R(e)){const b=Object.keys(e)[0],y=e[b];p=d[b].getPixelForValue(y)+g-t}else e==="center"?p=(c.bottom+c.top)/2+g-t:p=Mn(i,e,t);u=r-o}else{if(R(e)){const b=Object.keys(e)[0],y=e[b];f=d[b].getPixelForValue(y)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=Mn(i,e,t);p=tt(s,a,n),h=e==="left"?-q:q}return{titleX:f,titleY:p,maxWidth:u,rotation:h}}class te extends pt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=rt(t,Number.POSITIVE_INFINITY),e=rt(e,Number.NEGATIVE_INFINITY),s=rt(s,Number.POSITIVE_INFINITY),n=rt(n,Number.NEGATIVE_INFINITY),{min:rt(t,s),max:rt(e,n),minDefined:W(t),maxDefined:W(e)}}getMinMax(t){let{min:e,max:s,minDefined:n,maxDefined:o}=this.getUserBounds(),a;if(n&&o)return{min:e,max:s};const r=this.getMatchingVisibleMetas();for(let l=0,c=r.length;l<c;++l)a=r[l].controller.getMinMax(this,t),n||(e=Math.min(e,a.min)),o||(s=Math.max(s,a.max));return e=o&&e>s?s:e,s=n&&e>s?e:s,{min:rt(e,rt(s,e)),max:rt(s,rt(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){B(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:n,grace:o,ticks:a}=this.options,r=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Pr(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=r<this.ticks.length;this._convertTicksToLabels(l?Dn(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=lc(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){B(this.options.afterUpdate,[this])}beforeSetDimensions(){B(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){B(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),B(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){B(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s],o.label=B(e.callback,[o.value,s,t],this)}afterTickToLabelConversion(){B(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){B(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=Tn(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation;let a=n,r,l,c;if(!this._isVisible()||!e.display||n>=o||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const d=this._getLabelSizes(),h=d.widest.width,u=d.highest.height,f=K(this.chart.width-h,0,this.maxWidth);r=t.offset?this.maxWidth/s:f/(s-1),h+6>r&&(r=f/(s-(t.offset?.5:1)),l=this.maxHeight-ve(t.grid)-e.padding-Pn(t.title,this.chart.options.font),c=Math.sqrt(h*h+u*u),a=Ts(Math.min(Math.asin(K((d.highest.height+6)/r,-1,1)),Math.asin(K(l/c,-1,1))-Math.asin(K(u/c,-1,1)))),a=Math.max(n,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){B(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){B(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:o}}=this,a=this._isVisible(),r=this.isHorizontal();if(a){const l=Pn(n,e.options.font);if(r?(t.width=this.maxWidth,t.height=ve(o)+l):(t.height=this.maxHeight,t.width=ve(o)+l),s.display&&this.ticks.length){const{first:c,last:d,widest:h,highest:u}=this._getLabelSizes(),f=s.padding*2,p=ft(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(r){const b=s.mirror?0:m*h.width+g*u.height;t.height=Math.min(this.maxHeight,t.height+b+f)}else{const b=s.mirror?0:g*h.width+m*u.height;t.width=Math.min(this.maxWidth,t.width+b+f)}this._calculatePadding(c,d,m,g)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){const{ticks:{align:o,padding:a},position:r}=this.options,l=this.labelRotation!==0,c=r!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,f=0;l?c?(u=n*t.width,f=s*e.height):(u=s*t.height,f=n*e.width):o==="start"?f=e.width:o==="end"?u=t.width:o!=="inner"&&(u=t.width/2,f=e.width/2),this.paddingLeft=Math.max((u-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((f-h+a)*this.width/(this.width-h),0)}else{let d=e.height/2,h=t.height/2;o==="start"?(d=0,h=t.height):o==="end"&&(d=e.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){B(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)O(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=Dn(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:n,_longestTextCache:o}=this,a=[],r=[],l=Math.floor(e/Tn(e,s));let c=0,d=0,h,u,f,p,g,m,b,y,w,x,v;for(h=0;h<e;h+=l){if(p=t[h].label,g=this._resolveTickFontOptions(h),n.font=m=g.string,b=o[m]=o[m]||{data:{},gc:[]},y=g.lineHeight,w=x=0,!O(p)&&!$(p))w=xi(n,b.data,b.gc,w,p),x=y;else if($(p))for(u=0,f=p.length;u<f;++u)v=p[u],!O(v)&&!$(v)&&(w=xi(n,b.data,b.gc,w,v),x+=y);a.push(w),r.push(x),c=Math.max(w,c),d=Math.max(x,d)}mc(o,e);const _=a.indexOf(c),k=r.indexOf(d),S=T=>({width:a[T]||0,height:r[T]||0});return{first:S(0),last:S(e-1),widest:S(_),highest:S(k),widths:a,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return sr(this._alignToPixels?Vt(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=yc(this.getContext(),t,s))}return this.$context||(this.$context=bc(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ft(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),a=t.autoSkipPadding||0,r=o?o.widest.width+a:0,l=o?o.highest.height+a:0;return this.isHorizontal()?l*s>r*n?r/s:l/n:l*n<r*s?l/s:r/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,n=this.options,{grid:o,position:a,border:r}=n,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),u=ve(o),f=[],p=r.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,b=function(N){return Vt(s,N,g)};let y,w,x,v,_,k,S,T,A,D,C,U;if(a==="top")y=b(this.bottom),k=this.bottom-u,T=y-m,D=b(t.top)+m,U=t.bottom;else if(a==="bottom")y=b(this.top),D=t.top,U=b(t.bottom)-m,k=y+m,T=this.top+u;else if(a==="left")y=b(this.right),_=this.right-u,S=y-m,A=b(t.left)+m,C=t.right;else if(a==="right")y=b(this.left),A=t.left,C=b(t.right)-m,_=y+m,S=this.left+u;else if(e==="x"){if(a==="center")y=b((t.top+t.bottom)/2+.5);else if(R(a)){const N=Object.keys(a)[0],Y=a[N];y=b(this.chart.scales[N].getPixelForValue(Y))}D=t.top,U=t.bottom,k=y+m,T=k+u}else if(e==="y"){if(a==="center")y=b((t.left+t.right)/2);else if(R(a)){const N=Object.keys(a)[0],Y=a[N];y=b(this.chart.scales[N].getPixelForValue(Y))}_=y-m,S=_-u,A=t.left,C=t.right}const at=P(n.ticks.maxTicksLimit,h),I=Math.max(1,Math.ceil(h/at));for(w=0;w<h;w+=I){const N=this.getContext(w),Y=o.setContext(N),ut=r.setContext(N),Q=Y.lineWidth,ee=Y.color,Xe=ut.dash||[],ie=ut.dashOffset,ge=Y.tickWidth,Ht=Y.tickColor,pe=Y.tickBorderDash||[],jt=Y.tickBorderDashOffset;x=pc(this,w,l),x!==void 0&&(v=Vt(s,x,Q),c?_=S=A=C=v:k=T=D=U=v,f.push({tx1:_,ty1:k,tx2:S,ty2:T,x1:A,y1:D,x2:C,y2:U,width:Q,color:ee,borderDash:Xe,borderDashOffset:ie,tickWidth:ge,tickColor:Ht,tickBorderDash:pe,tickBorderDashOffset:jt}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(t){const e=this.axis,s=this.options,{position:n,ticks:o}=s,a=this.isHorizontal(),r=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=o,u=ve(s.grid),f=u+d,p=h?-d:f,g=-ft(this.labelRotation),m=[];let b,y,w,x,v,_,k,S,T,A,D,C,U="middle";if(n==="top")_=this.bottom-p,k=this._getXAxisLabelAlignment();else if(n==="bottom")_=this.top+p,k=this._getXAxisLabelAlignment();else if(n==="left"){const I=this._getYAxisLabelAlignment(u);k=I.textAlign,v=I.x}else if(n==="right"){const I=this._getYAxisLabelAlignment(u);k=I.textAlign,v=I.x}else if(e==="x"){if(n==="center")_=(t.top+t.bottom)/2+f;else if(R(n)){const I=Object.keys(n)[0],N=n[I];_=this.chart.scales[I].getPixelForValue(N)+f}k=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")v=(t.left+t.right)/2-f;else if(R(n)){const I=Object.keys(n)[0],N=n[I];v=this.chart.scales[I].getPixelForValue(N)}k=this._getYAxisLabelAlignment(u).textAlign}e==="y"&&(l==="start"?U="top":l==="end"&&(U="bottom"));const at=this._getLabelSizes();for(b=0,y=r.length;b<y;++b){w=r[b],x=w.label;const I=o.setContext(this.getContext(b));S=this.getPixelForTick(b)+o.labelOffset,T=this._resolveTickFontOptions(b),A=T.lineHeight,D=$(x)?x.length:1;const N=D/2,Y=I.color,ut=I.textStrokeColor,Q=I.textStrokeWidth;let ee=k;a?(v=S,k==="inner"&&(b===y-1?ee=this.options.reverse?"left":"right":b===0?ee=this.options.reverse?"right":"left":ee="center"),n==="top"?c==="near"||g!==0?C=-D*A+A/2:c==="center"?C=-at.highest.height/2-N*A+A:C=-at.highest.height+A/2:c==="near"||g!==0?C=A/2:c==="center"?C=at.highest.height/2-N*A:C=at.highest.height-D*A,h&&(C*=-1),g!==0&&!I.showLabelBackdrop&&(v+=A/2*Math.sin(g))):(_=S,C=(1-D)*A/2);let Xe;if(I.showLabelBackdrop){const ie=st(I.backdropPadding),ge=at.heights[b],Ht=at.widths[b];let pe=C-ie.top,jt=0-ie.left;switch(U){case"middle":pe-=ge/2;break;case"bottom":pe-=ge;break}switch(k){case"center":jt-=Ht/2;break;case"right":jt-=Ht;break;case"inner":b===y-1?jt-=Ht:b>0&&(jt-=Ht/2);break}Xe={left:jt,top:pe,width:Ht+ie.width,height:ge+ie.height,color:I.backdropColor}}m.push({label:x,font:T,textOffset:C,options:{rotation:g,color:Y,strokeColor:ut,strokeWidth:Q,textAlign:ee,textBaseline:U,translation:[v,_],backdrop:Xe}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ft(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,a=this._getLabelSizes(),r=t+o,l=a.widest.width;let c,d;return e==="left"?n?(d=this.right+o,s==="near"?c="left":s==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-r,s==="near"?c="right":s==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?n?(d=this.left+o,s==="near"?c="right":s==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+r,s==="near"?c="left":s==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:n,width:o,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,o,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(o=>o.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,a;const r=(l,c,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(o=0,a=n.length;o<a;++o){const l=n[o];e.drawOnChartArea&&r({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&r({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:n}}=this,o=s.setContext(this.getContext()),a=s.display?o.width:0;if(!a)return;const r=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,h,u;this.isHorizontal()?(c=Vt(t,this.left,a)-a/2,d=Vt(t,this.right,r)+r/2,h=u=l):(h=Vt(t,this.top,a)-a/2,u=Vt(t,this.bottom,r)+r/2,c=d=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,h),e.lineTo(d,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&Ri(s,n);const o=this.getLabelItems(t);for(const a of o){const r=a.options,l=a.font,c=a.label,d=a.textOffset;Qt(s,c,0,d,l,r)}n&&Ei(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;const o=X(s.font),a=st(s.padding),r=s.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||R(e)?(l+=a.bottom,$(s.text)&&(l+=o.lineHeight*(s.text.length-1))):l+=a.top;const{titleX:c,titleY:d,maxWidth:h,rotation:u}=xc(this,l,e,r);Qt(t,s.text,0,0,o,{color:s.color,maxWidth:h,rotation:u,textAlign:vc(r,e,n),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=P(t.grid&&t.grid.z,-1),n=P(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==te.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let o,a;for(o=0,a=e.length;o<a;++o){const r=e[o];r[s]===this.id&&(!t||r.type===t)&&n.push(r)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return X(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class si{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;kc(e)&&(s=this.register(e));const n=this.items,o=t.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,wc(t,a,s),this.override&&H.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in H[n]&&(delete H[n][s],this.override&&delete Zt[s])}}function wc(i,t,e){const s=Ie(Object.create(null),[e?H.get(e):{},H.get(t),i.defaults]);H.set(t,s),i.defaultRoutes&&_c(t,i.defaultRoutes),i.descriptors&&H.describe(t,i.descriptors)}function _c(i,t){Object.keys(t).forEach(e=>{const s=e.split("."),n=s.pop(),o=[i].concat(s).join("."),a=t[e].split("."),r=a.pop(),l=a.join(".");H.route(o,n,l,r)})}function kc(i){return"id"in i&&"defaults"in i}class Sc{constructor(){this.controllers=new si(gt,"datasets",!0),this.elements=new si(pt,"elements"),this.plugins=new si(Object,"plugins"),this.scales=new si(te,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{const o=s||this._getRegistryForType(n);s||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):L(n,a=>{const r=s||this._getRegistryForType(a);this._exec(t,r,a)})})}_exec(t,e,s){const n=Ms(t);B(s["before"+n],[],s),e[t](s),B(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var yt=new Sc;class Mc{constructor(){this._init=void 0}notify(t,e,s,n){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=n?this._descriptors(t).filter(n):this._descriptors(t),a=this._notify(o,t,e,s);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,s,n){n=n||{};for(const o of t){const a=o.plugin,r=a[s],l=[e,n,o.options];if(B(r,l,a)===!1&&n.cancelable)return!1}return!0}invalidate(){O(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,n=P(s.options&&s.options.plugins,{}),o=Tc(s);return n===!1&&!e?[]:Pc(t,o,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,n=(o,a)=>o.filter(r=>!a.some(l=>r.plugin.id===l.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}}function Tc(i){const t={},e=[],s=Object.keys(yt.plugins.items);for(let o=0;o<s.length;o++)e.push(yt.getPlugin(s[o]));const n=i.plugins||[];for(let o=0;o<n.length;o++){const a=n[o];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function Dc(i,t){return!t&&i===!1?null:i===!0?{}:i}function Pc(i,{plugins:t,localIds:e},s,n){const o=[],a=i.getContext();for(const r of t){const l=r.id,c=Dc(s[l],n);c!==null&&o.push({plugin:r,options:Ac(i.config,{plugin:r,local:e[l]},c,a)})}return o}function Ac(i,{plugin:t,local:e},s,n){const o=i.pluginScopeKeys(t),a=i.getOptionScopes(s,o);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function as(i,t){const e=H.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Cc(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Oc(i,t){return i===t?"_index_":"_value_"}function An(i){if(i==="x"||i==="y"||i==="r")return i}function Rc(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function rs(i,...t){if(An(i))return i;for(const e of t){const s=e.axis||Rc(e.position)||i.length>1&&An(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Cn(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Ec(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(e.length)return Cn(i,"x",e[0])||Cn(i,"y",e[0])}return{}}function Lc(i,t){const e=Zt[i.type]||{scales:{}},s=t.scales||{},n=as(i.type,t),o=Object.create(null);return Object.keys(s).forEach(a=>{const r=s[a];if(!R(r))return console.error(`Invalid scale configuration for scale: ${a}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=rs(a,r,Ec(a,i),H.scales[r.type]),c=Oc(l,n),d=e.scales||{};o[a]=De(Object.create(null),[{axis:l},r,d[l],d[c]])}),i.data.datasets.forEach(a=>{const r=a.type||i.type,l=a.indexAxis||as(r,t),d=(Zt[r]||{}).scales||{};Object.keys(d).forEach(h=>{const u=Cc(h,l),f=a[u+"AxisID"]||u;o[f]=o[f]||Object.create(null),De(o[f],[{axis:u},s[f],d[h]])})}),Object.keys(o).forEach(a=>{const r=o[a];De(r,[H.scales[r.type],H.scale])}),o}function Ko(i){const t=i.options||(i.options={});t.plugins=P(t.plugins,{}),t.scales=Lc(i,t)}function Jo(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Ic(i){return i=i||{},i.data=Jo(i.data),Ko(i),i}const On=new Map,Zo=new Set;function ni(i,t){let e=On.get(i);return e||(e=t(),On.set(i,e),Zo.add(e)),e}const xe=(i,t,e)=>{const s=zt(t,e);s!==void 0&&i.add(s)};class Bc{constructor(t){this._config=Ic(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Jo(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Ko(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ni(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ni(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ni(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return ni(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let n=s.get(t);return(!n||e)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){const{options:n,type:o}=this,a=this._cachedScopes(t,s),r=a.get(e);if(r)return r;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(h=>xe(l,t,h))),d.forEach(h=>xe(l,n,h)),d.forEach(h=>xe(l,Zt[o]||{},h)),d.forEach(h=>xe(l,H,h)),d.forEach(h=>xe(l,ss,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Zo.has(e)&&a.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Zt[e]||{},H.datasets[e]||{},{type:e},H,ss]}resolveNamedOptions(t,e,s,n=[""]){const o={$shared:!0},{resolver:a,subPrefixes:r}=Rn(this._resolverCache,t,n);let l=a;if(zc(a,e)){o.$shared=!1,s=Nt(s)?s():s;const c=this.createResolver(t,s,r);l=ce(a,s,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,s=[""],n){const{resolver:o}=Rn(this._resolverCache,t,s);return R(e)?ce(o,e,void 0,n):o}}function Rn(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));const n=e.join();let o=s.get(n);return o||(o={resolver:Os(t,e),subPrefixes:e.filter(r=>!r.toLowerCase().includes("hover"))},s.set(n,o)),o}const Fc=i=>R(i)&&Object.getOwnPropertyNames(i).some(t=>Nt(i[t]));function zc(i,t){const{isScriptable:e,isIndexable:s}=Co(i);for(const n of t){const o=e(n),a=s(n),r=(a||o)&&i[n];if(o&&(Nt(r)||Fc(r))||a&&$(r))return!0}return!1}var Nc="4.5.1";const $c=["top","bottom","left","right","chartArea"];function En(i,t){return i==="top"||i==="bottom"||$c.indexOf(i)===-1&&t==="x"}function Ln(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function In(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),B(e&&e.onComplete,[i],t)}function Hc(i){const t=i.chart,e=t.options.animation;B(e&&e.onProgress,[i],t)}function Qo(i){return Ls()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const gi={},Bn=i=>{const t=Qo(i);return Object.values(gi).filter(e=>e.canvas===t).pop()};function jc(i,t,e){const s=Object.keys(i);for(const n of s){const o=+n;if(o>=t){const a=i[n];delete i[n],(e>0||o>t)&&(i[o+e]=a)}}}function Wc(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}class St{static register(...t){yt.add(...t),Fn()}static unregister(...t){yt.remove(...t),Fn()}constructor(t,e){const s=this.config=new Bc(e),n=Qo(t),o=Bn(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||rc(n)),this.platform.updateConfig(s);const r=this.platform.acquireContext(n,a.aspectRatio),l=r&&r.canvas,c=l&&l.height,d=l&&l.width;if(this.id=Va(),this.ctx=r,this.canvas=l,this.width=d,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Mc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=rr(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],gi[this.id]=this,!r||!l){console.error("Failed to create chart: can't acquire context from the given item");return}wt.listen(this,"complete",In),wt.listen(this,"progress",Hc),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:n,_aspectRatio:o}=this;return O(t)?e&&o?o:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return yt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():on(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return en(this.canvas,this.ctx),this}stop(){return wt.stop(this),this}resize(t,e){wt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,n=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,t,e,o),r=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,on(this,r,!0)&&(this.notifyPlugins("resize",{size:a}),B(s.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};L(e,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,n=Object.keys(s).reduce((a,r)=>(a[r]=!1,a),{});let o=[];e&&(o=o.concat(Object.keys(e).map(a=>{const r=e[a],l=rs(a,r),c=l==="r",d=l==="x";return{options:r,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),L(o,a=>{const r=a.options,l=r.id,c=rs(l,r),d=P(r.type,a.dtype);(r.position===void 0||En(r.position,c)!==En(a.dposition))&&(r.position=a.dposition),n[l]=!0;let h=null;if(l in s&&s[l].type===d)h=s[l];else{const u=yt.getScale(d);h=new u({id:l,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(r,t)}),L(n,(a,r)=>{a||delete s[r]}),L(s,a=>{it.configure(this,a,a.options),it.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((n,o)=>n.index-o.index),s>e){for(let n=e;n<s;++n)this._destroyDatasetMeta(n);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Ln("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,n)=>{e.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=e.length;s<n;s++){const o=e[s];let a=this.getDatasetMeta(s);const r=o.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=r,a.indexAxis=o.indexAxis||as(r,this.options),a.order=o.order||0,a.index=s,a.label=""+o.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const l=yt.getController(r),{datasetElementType:c,dataElementType:d}=H.datasets[r];Object.assign(l,{dataElementType:yt.getElement(d),datasetElementType:c&&yt.getElement(c)}),a.controller=new l(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){L(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:h}=this.getDatasetMeta(c),u=!n&&o.indexOf(h)===-1;h.buildOrUpdateElements(u),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),n||L(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Ln("z","_idx"));const{_active:r,_lastEvent:l}=this;l?this._eventHandler(l,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){L(this.scales,t=>{it.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Ys(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:o}of e){const a=s==="_removeElements"?-o:o;jc(t,n,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=o=>new Set(t.filter(a=>a[0]===o).map((a,r)=>r+","+a.splice(1).join(","))),n=s(0);for(let o=1;o<e;o++)if(!Ys(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;it.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],L(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,Nt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(wt.has(this)?this.attached&&!wt.running(this)&&wt.start(this):(this.draw(),In({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let n,o;for(n=0,o=e.length;n<o;++n){const a=e[n];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},n=Ho(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&Ri(e,n),t.controller.draw(),n&&Ei(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Dt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,n){const o=$l.modes[e];return typeof o=="function"?o(this,t,s,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let n=s.filter(o=>o&&o._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=$t(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const n=s?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,n);Be(e)?(o.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(o,{visible:s}),this.update(r=>r.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),wt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),en(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete gi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(o,a)=>{e.addEventListener(this,o,a),t[o]=a},n=(o,a,r)=>{o.offsetX=a,o.offsetY=r,this._eventHandler(o)};L(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const r=()=>{n("attach",r),this.attached=!0,this.resize(),s("resize",o),s("detach",a)};a=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",r)},e.isAttached(this.canvas)?r():a()}unbindEvents(){L(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},L(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const n=s?"set":"remove";let o,a,r,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),r=0,l=t.length;r<l;++r){a=t[r];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:o,index:a})=>{const r=this.getDatasetMeta(o);if(!r)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:r.data[a],index:a}});!bi(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const n=this.options.hover,o=(l,c)=>l.filter(d=>!c.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(e,t),r=s?t:o(t,e);a.length&&this.updateHoverStyle(a,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const o=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:n=[],options:o}=this,a=e,r=this._getActiveElements(t,n,s,a),l=Ka(t),c=Wc(t,this._lastEvent,s,l);s&&(this._lastEvent=null,B(o.onHover,[t,r,this],this),l&&B(o.onClick,[t,r,this],this));const d=!bi(r,n);return(d||e)&&(this._active=r,this._updateHoverStyles(r,n,e)),this._lastEvent=c,d}_getActiveElements(t,e,s,n){if(t.type==="mouseout")return[];if(!s)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}M(St,"defaults",H),M(St,"instances",gi),M(St,"overrides",Zt),M(St,"registry",yt),M(St,"version",Nc),M(St,"getChart",Bn);function Fn(){return L(St.instances,i=>i._plugins.invalidate())}function Vc(i,t,e){const{startAngle:s,x:n,y:o,outerRadius:a,innerRadius:r,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/a,et(s-e));if(i.beginPath(),i.arc(n,o,a-c/2,s+h/2,e-h/2),r>0){const u=Math.min(c/r,et(s-e));i.arc(n,o,r+c/2,e-u/2,s+u/2,!0)}else{const u=Math.min(c/2,a*et(s-e));if(d==="round")i.arc(n,o,u,e-E/2,s+E/2,!0);else if(d==="bevel"){const f=2*u*u,p=-f*Math.cos(e+E/2)+n,g=-f*Math.sin(e+E/2)+o,m=f*Math.cos(s+E/2)+n,b=f*Math.sin(s+E/2)+o;i.lineTo(p,g),i.lineTo(m,b)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function Uc(i,t,e){const{startAngle:s,pixelMargin:n,x:o,y:a,outerRadius:r,innerRadius:l}=t;let c=n/r;i.beginPath(),i.arc(o,a,r,s-c,e+c),l>n?(c=n/l,i.arc(o,a,l,e+c,s-c,!0)):i.arc(o,a,n,e+q,s-q),i.closePath(),i.clip()}function Yc(i){return Cs(i,["outerStart","outerEnd","innerStart","innerEnd"])}function qc(i,t,e,s){const n=Yc(i.options.borderRadius),o=(e-t)/2,a=Math.min(o,s*t/2),r=l=>{const c=(e-Math.min(o,l))*s/2;return K(l,0,Math.min(o,c))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:K(n.innerStart,0,a),innerEnd:K(n.innerEnd,0,a)}}function ne(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function ki(i,t,e,s,n,o){const{x:a,y:r,startAngle:l,pixelMargin:c,innerRadius:d}=t,h=Math.max(t.outerRadius+s+e-c,0),u=d>0?d+s+e+c:0;let f=0;const p=n-l;if(s){const I=d>0?d-s:0,N=h>0?h-s:0,Y=(I+N)/2,ut=Y!==0?p*Y/(Y+s):p;f=(p-ut)/2}const g=Math.max(.001,p*h-e/E)/h,m=(p-g)/2,b=l+m+f,y=n-m-f,{outerStart:w,outerEnd:x,innerStart:v,innerEnd:_}=qc(t,u,h,y-b),k=h-w,S=h-x,T=b+w/k,A=y-x/S,D=u+v,C=u+_,U=b+v/D,at=y-_/C;if(i.beginPath(),o){const I=(T+A)/2;if(i.arc(a,r,h,T,I),i.arc(a,r,h,I,A),x>0){const Q=ne(S,A,a,r);i.arc(Q.x,Q.y,x,A,y+q)}const N=ne(C,y,a,r);if(i.lineTo(N.x,N.y),_>0){const Q=ne(C,at,a,r);i.arc(Q.x,Q.y,_,y+q,at+Math.PI)}const Y=(y-_/u+(b+v/u))/2;if(i.arc(a,r,u,y-_/u,Y,!0),i.arc(a,r,u,Y,b+v/u,!0),v>0){const Q=ne(D,U,a,r);i.arc(Q.x,Q.y,v,U+Math.PI,b-q)}const ut=ne(k,b,a,r);if(i.lineTo(ut.x,ut.y),w>0){const Q=ne(k,T,a,r);i.arc(Q.x,Q.y,w,b-q,T)}}else{i.moveTo(a,r);const I=Math.cos(T)*h+a,N=Math.sin(T)*h+r;i.lineTo(I,N);const Y=Math.cos(A)*h+a,ut=Math.sin(A)*h+r;i.lineTo(Y,ut)}i.closePath()}function Xc(i,t,e,s,n){const{fullCircles:o,startAngle:a,circumference:r}=t;let l=t.endAngle;if(o){ki(i,t,e,s,l,n);for(let c=0;c<o;++c)i.fill();isNaN(r)||(l=a+(r%z||z))}return ki(i,t,e,s,l,n),i.fill(),l}function Gc(i,t,e,s,n){const{fullCircles:o,startAngle:a,circumference:r,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:u,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;i.setLineDash(h||[]),i.lineDashOffset=u,p?(i.lineWidth=c*2,i.lineJoin=d||"round"):(i.lineWidth=c,i.lineJoin=d||"bevel");let g=t.endAngle;if(o){ki(i,t,e,s,g,n);for(let m=0;m<o;++m)i.stroke();isNaN(r)||(g=a+(r%z||z))}p&&Uc(i,t,g),l.selfJoin&&g-a>=E&&f===0&&d!=="miter"&&Vc(i,t,g),o||(ki(i,t,e,s,g,n),i.stroke())}class Se extends pt{constructor(e){super();M(this,"circumference");M(this,"endAngle");M(this,"fullCircles");M(this,"innerRadius");M(this,"outerRadius");M(this,"pixelMargin");M(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const o=this.getProps(["x","y"],n),{angle:a,distance:r}=xo(o,{x:e,y:s}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=(this.options.spacing+this.options.borderWidth)/2,p=P(u,c-l),g=Fe(a,l,c)&&l!==c,m=p>=z||g,b=Mt(r,d+f,h+f);return m&&b}getCenterPoint(e){const{x:s,y:n,startAngle:o,endAngle:a,innerRadius:r,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,h=(o+a)/2,u=(r+l+d+c)/2;return{x:s+Math.cos(h)*u,y:n+Math.sin(h)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,o=(s.offset||0)/4,a=(s.spacing||0)/2,r=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>z?Math.floor(n/z):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(E,n||0)),d=o*c;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,Xc(e,this,d,a,r),Gc(e,this,d,a,r),e.restore()}}M(Se,"id","arc"),M(Se,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),M(Se,"defaultRoutes",{backgroundColor:"backgroundColor"}),M(Se,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function ta(i,t,e=t){i.lineCap=P(e.borderCapStyle,t.borderCapStyle),i.setLineDash(P(e.borderDash,t.borderDash)),i.lineDashOffset=P(e.borderDashOffset,t.borderDashOffset),i.lineJoin=P(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=P(e.borderWidth,t.borderWidth),i.strokeStyle=P(e.borderColor,t.borderColor)}function Kc(i,t,e){i.lineTo(e.x,e.y)}function Jc(i){return i.stepped?vr:i.tension||i.cubicInterpolationMode==="monotone"?xr:Kc}function ea(i,t,e={}){const s=i.length,{start:n=0,end:o=s-1}=e,{start:a,end:r}=t,l=Math.max(n,a),c=Math.min(o,r),d=n<a&&o<a||n>r&&o>r;return{count:s,start:l,loop:t.loop,ilen:c<l&&!d?s+c-l:c-l}}function Zc(i,t,e,s){const{points:n,options:o}=t,{count:a,start:r,loop:l,ilen:c}=ea(n,e,s),d=Jc(o);let{move:h=!0,reverse:u}=s||{},f,p,g;for(f=0;f<=c;++f)p=n[(r+(u?c-f:f))%a],!p.skip&&(h?(i.moveTo(p.x,p.y),h=!1):d(i,g,p,u,o.stepped),g=p);return l&&(p=n[(r+(u?c:0))%a],d(i,g,p,u,o.stepped)),!!l}function Qc(i,t,e,s){const n=t.points,{count:o,start:a,ilen:r}=ea(n,e,s),{move:l=!0,reverse:c}=s||{};let d=0,h=0,u,f,p,g,m,b;const y=x=>(a+(c?r-x:x))%o,w=()=>{g!==m&&(i.lineTo(d,m),i.lineTo(d,g),i.lineTo(d,b))};for(l&&(f=n[y(0)],i.moveTo(f.x,f.y)),u=0;u<=r;++u){if(f=n[y(u)],f.skip)continue;const x=f.x,v=f.y,_=x|0;_===p?(v<g?g=v:v>m&&(m=v),d=(h*d+x)/++h):(w(),i.lineTo(x,v),p=_,h=0,g=m=v),b=v}w()}function ls(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Qc:Zc}function td(i){return i.stepped?Zr:i.tension||i.cubicInterpolationMode==="monotone"?Qr:Xt}function ed(i,t,e,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,s)&&n.closePath()),ta(i,t.options),i.stroke(n)}function id(i,t,e,s){const{segments:n,options:o}=t,a=ls(t);for(const r of n)ta(i,o,r.style),i.beginPath(),a(i,t,r,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}const sd=typeof Path2D=="function";function nd(i,t,e,s){sd&&!t.options.segment?ed(i,t,e,s):id(i,t,e,s)}class Lt extends pt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;Vr(this._points,s,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=ol(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,n=t[e],o=this.points,a=$o(this,{property:e,start:n,end:n});if(!a.length)return;const r=[],l=td(s);let c,d;for(c=0,d=a.length;c<d;++c){const{start:h,end:u}=a[c],f=o[h],p=o[u];if(f===p){r.push(f);continue}const g=Math.abs((n-f[e])/(p[e]-f[e])),m=l(f,p,g,s.stepped);m[e]=t[e],r.push(m)}return r.length===1?r[0]:r}pathSegment(t,e,s){return ls(this)(t,this,e,s)}path(t,e,s){const n=this.segments,o=ls(this);let a=this._loop;e=e||0,s=s||this.points.length-e;for(const r of n)a&=o(t,this,r,{start:e,end:e+s-1});return!!a}draw(t,e,s,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),nd(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}M(Lt,"id","line"),M(Lt,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),M(Lt,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),M(Lt,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function zn(i,t,e,s){const n=i.options,{[e]:o}=i.getProps([e],s);return Math.abs(t-o)<n.radius+n.hitRadius}class pi extends pt{constructor(e){super();M(this,"parsed");M(this,"skip");M(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const o=this.options,{x:a,y:r}=this.getProps(["x","y"],n);return Math.pow(e-a,2)+Math.pow(s-r,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,s){return zn(this,e,"x",s)}inYRange(e,s){return zn(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!Dt(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,ns(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}M(pi,"id","point"),M(pi,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),M(pi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ia(i,t){const{x:e,y:s,base:n,width:o,height:a}=i.getProps(["x","y","base","width","height"],t);let r,l,c,d,h;return i.horizontal?(h=a/2,r=Math.min(e,n),l=Math.max(e,n),c=s-h,d=s+h):(h=o/2,r=e-h,l=e+h,c=Math.min(s,n),d=Math.max(s,n)),{left:r,top:c,right:l,bottom:d}}function It(i,t,e,s){return i?0:K(t,e,s)}function od(i,t,e){const s=i.options.borderWidth,n=i.borderSkipped,o=Ao(s);return{t:It(n.top,o.top,0,e),r:It(n.right,o.right,0,t),b:It(n.bottom,o.bottom,0,e),l:It(n.left,o.left,0,t)}}function ad(i,t,e){const{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,o=Kt(n),a=Math.min(t,e),r=i.borderSkipped,l=s||R(n);return{topLeft:It(!l||r.top||r.left,o.topLeft,0,a),topRight:It(!l||r.top||r.right,o.topRight,0,a),bottomLeft:It(!l||r.bottom||r.left,o.bottomLeft,0,a),bottomRight:It(!l||r.bottom||r.right,o.bottomRight,0,a)}}function rd(i){const t=ia(i),e=t.right-t.left,s=t.bottom-t.top,n=od(i,e/2,s/2),o=ad(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function Ki(i,t,e,s){const n=t===null,o=e===null,r=i&&!(n&&o)&&ia(i,s);return r&&(n||Mt(t,r.left,r.right))&&(o||Mt(e,r.top,r.bottom))}function ld(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function cd(i,t){i.rect(t.x,t.y,t.w,t.h)}function Ji(i,t,e={}){const s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-s,a=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+o,h:i.h+a,radius:i.radius}}class mi extends pt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:n}}=this,{inner:o,outer:a}=rd(this),r=ld(a.radius)?ze:cd;t.save(),(a.w!==o.w||a.h!==o.h)&&(t.beginPath(),r(t,Ji(a,e,o)),t.clip(),r(t,Ji(o,-e,a)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),r(t,Ji(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,s){return Ki(this,t,e,s)}inXRange(t,e){return Ki(this,t,null,e)}inYRange(t,e){return Ki(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}M(mi,"id","bar"),M(mi,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),M(mi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var dd=Object.freeze({__proto__:null,ArcElement:Se,BarElement:mi,LineElement:Lt,PointElement:pi});const cs=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Nn=cs.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function sa(i){return cs[i%cs.length]}function na(i){return Nn[i%Nn.length]}function hd(i,t){return i.borderColor=sa(t),i.backgroundColor=na(t),++t}function ud(i,t){return i.backgroundColor=i.data.map(()=>sa(t++)),t}function fd(i,t){return i.backgroundColor=i.data.map(()=>na(t++)),t}function gd(i){let t=0;return(e,s)=>{const n=i.getDatasetMeta(s).controller;n instanceof Gt?t=ud(e,t):n instanceof Oe?t=fd(e,t):n&&(t=hd(e,t))}}function $n(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function pd(i){return i&&(i.borderColor||i.backgroundColor)}function md(){return H.borderColor!=="rgba(0,0,0,0.1)"||H.backgroundColor!=="rgba(0,0,0,0.1)"}var bd={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;const{data:{datasets:s},options:n}=i.config,{elements:o}=n,a=$n(s)||pd(n)||o&&$n(o)||md();if(!e.forceOverride&&a)return;const r=gd(i);s.forEach(r)}};function yd(i,t,e,s,n){const o=n.samples||s;if(o>=e)return i.slice(t,t+e);const a=[],r=(e-2)/(o-2);let l=0;const c=t+e-1;let d=t,h,u,f,p,g;for(a[l++]=i[d],h=0;h<o-2;h++){let m=0,b=0,y;const w=Math.floor((h+1)*r)+1+t,x=Math.min(Math.floor((h+2)*r)+1,e)+t,v=x-w;for(y=w;y<x;y++)m+=i[y].x,b+=i[y].y;m/=v,b/=v;const _=Math.floor(h*r)+1+t,k=Math.min(Math.floor((h+1)*r)+1,e)+t,{x:S,y:T}=i[d];for(f=p=-1,y=_;y<k;y++)p=.5*Math.abs((S-m)*(i[y].y-T)-(S-i[y].x)*(b-T)),p>f&&(f=p,u=i[y],g=y);a[l++]=u,d=g}return a[l++]=i[c],a}function vd(i,t,e,s){let n=0,o=0,a,r,l,c,d,h,u,f,p,g;const m=[],b=t+e-1,y=i[t].x,x=i[b].x-y;for(a=t;a<t+e;++a){r=i[a],l=(r.x-y)/x*s,c=r.y;const v=l|0;if(v===d)c<p?(p=c,h=a):c>g&&(g=c,u=a),n=(o*n+r.x)/++o;else{const _=a-1;if(!O(h)&&!O(u)){const k=Math.min(h,u),S=Math.max(h,u);k!==f&&k!==_&&m.push({...i[k],x:n}),S!==f&&S!==_&&m.push({...i[S],x:n})}a>0&&_!==f&&m.push(i[_]),m.push(r),d=v,o=0,p=g=c,h=u=f=a}}return m}function oa(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Hn(i){i.data.datasets.forEach(t=>{oa(t)})}function xd(i,t){const e=t.length;let s=0,n;const{iScale:o}=i,{min:a,max:r,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(s=K(Tt(t,o.axis,a).lo,0,e-1)),c?n=K(Tt(t,o.axis,r).hi+1,s,e)-s:n=e-s,{start:s,count:n}}var wd={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){Hn(i);return}const s=i.width;i.data.datasets.forEach((n,o)=>{const{_data:a,indexAxis:r}=n,l=i.getDatasetMeta(o),c=a||n.data;if(_e([r,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=i.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||i.options.parsing)return;let{start:h,count:u}=xd(l,c);const f=e.threshold||4*s;if(u<=f){oa(n);return}O(a)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=yd(c,h,u,s,e);break;case"min-max":p=vd(c,h,u,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=p})},destroy(i){Hn(i)}};function _d(i,t,e){const s=i.segments,n=i.points,o=t.points,a=[];for(const r of s){let{start:l,end:c}=r;c=Bi(l,c,n);const d=ds(e,n[l],n[c],r.loop);if(!t.segments){a.push({source:r,target:d,start:n[l],end:n[c]});continue}const h=$o(t,d);for(const u of h){const f=ds(e,o[u.start],o[u.end],u.loop),p=No(r,n,f);for(const g of p)a.push({source:g,target:u,start:{[e]:jn(d,f,"start",Math.max)},end:{[e]:jn(d,f,"end",Math.min)}})}}return a}function ds(i,t,e,s){if(s)return;let n=t[i],o=e[i];return i==="angle"&&(n=et(n),o=et(o)),{property:i,start:n,end:o}}function kd(i,t){const{x:e=null,y:s=null}=i||{},n=t.points,o=[];return t.segments.forEach(({start:a,end:r})=>{r=Bi(a,r,n);const l=n[a],c=n[r];s!==null?(o.push({x:l.x,y:s}),o.push({x:c.x,y:s})):e!==null&&(o.push({x:e,y:l.y}),o.push({x:e,y:c.y}))}),o}function Bi(i,t,e){for(;t>i;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function jn(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function aa(i,t){let e=[],s=!1;return $(i)?(s=!0,e=i):e=kd(i,t),e.length?new Lt({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function Wn(i){return i&&i.fill!==!1}function Sd(i,t,e){let n=i[t].fill;const o=[t];let a;if(!e)return n;for(;n!==!1&&o.indexOf(n)===-1;){if(!W(n))return n;if(a=i[n],!a)return!1;if(a.visible)return n;o.push(n),n=a.fill}return!1}function Md(i,t,e){const s=Ad(i);if(R(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return W(n)&&Math.floor(n)===n?Td(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Td(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function Dd(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:R(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Pd(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:R(i)?s=i.value:s=t.getBaseValue(),s}function Ad(i){const t=i.options,e=t.fill;let s=P(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Cd(i){const{scale:t,index:e,line:s}=i,n=[],o=s.segments,a=s.points,r=Od(t,e);r.push(aa({x:null,y:t.bottom},s));for(let l=0;l<o.length;l++){const c=o[l];for(let d=c.start;d<=c.end;d++)Rd(n,a[d],r)}return new Lt({points:n,options:{}})}function Od(i,t){const e=[],s=i.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const o=s[n];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function Rd(i,t,e){const s=[];for(let n=0;n<e.length;n++){const o=e[n],{first:a,last:r,point:l}=Ed(o,t,"x");if(!(!l||a&&r)){if(a)s.unshift(l);else if(i.push(l),!r)break}}i.push(...s)}function Ed(i,t,e){const s=i.interpolate(t,e);if(!s)return{};const n=s[e],o=i.segments,a=i.points;let r=!1,l=!1;for(let c=0;c<o.length;c++){const d=o[c],h=a[d.start][e],u=a[d.end][e];if(Mt(n,h,u)){r=n===h,l=n===u;break}}return{first:r,last:l,point:s}}class ra{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:n,y:o,radius:a}=this;return e=e||{start:0,end:z},t.arc(n,o,a,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:s+Math.sin(o)*n,angle:o}}}function Ld(i){const{chart:t,fill:e,line:s}=i;if(W(e))return Id(t,e);if(e==="stack")return Cd(i);if(e==="shape")return!0;const n=Bd(i);return n instanceof ra?n:aa(n,s)}function Id(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function Bd(i){return(i.scale||{}).getPointPositionForValue?zd(i):Fd(i)}function Fd(i){const{scale:t={},fill:e}=i,s=Dd(e,t);if(W(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function zd(i){const{scale:t,fill:e}=i,s=t.options,n=t.getLabels().length,o=s.reverse?t.max:t.min,a=Pd(e,t,o),r=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,o);return new ra({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<n;++l)r.push(t.getPointPositionForValue(l,a));return r}function Zi(i,t,e){const s=Ld(t),{chart:n,index:o,line:a,scale:r,axis:l}=t,c=a.options,d=c.fill,h=c.backgroundColor,{above:u=h,below:f=h}=d||{},p=n.getDatasetMeta(o),g=Ho(n,p);s&&a.points.length&&(Ri(i,e),Nd(i,{line:a,target:s,above:u,below:f,area:e,scale:r,axis:l,clip:g}),Ei(i))}function Nd(i,t){const{line:e,target:s,above:n,below:o,area:a,scale:r,clip:l}=t,c=e._loop?"angle":t.axis;i.save();let d=o;o!==n&&(c==="x"?(Vn(i,s,a.top),Qi(i,{line:e,target:s,color:n,scale:r,property:c,clip:l}),i.restore(),i.save(),Vn(i,s,a.bottom)):c==="y"&&(Un(i,s,a.left),Qi(i,{line:e,target:s,color:o,scale:r,property:c,clip:l}),i.restore(),i.save(),Un(i,s,a.right),d=n)),Qi(i,{line:e,target:s,color:d,scale:r,property:c,clip:l}),i.restore()}function Vn(i,t,e){const{segments:s,points:n}=t;let o=!0,a=!1;i.beginPath();for(const r of s){const{start:l,end:c}=r,d=n[l],h=n[Bi(l,c,n)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(d.x,e),i.lineTo(d.x,d.y)),a=!!t.pathSegment(i,r,{move:a}),a?i.closePath():i.lineTo(h.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function Un(i,t,e){const{segments:s,points:n}=t;let o=!0,a=!1;i.beginPath();for(const r of s){const{start:l,end:c}=r,d=n[l],h=n[Bi(l,c,n)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(e,d.y),i.lineTo(d.x,d.y)),a=!!t.pathSegment(i,r,{move:a}),a?i.closePath():i.lineTo(e,h.y)}i.lineTo(e,t.first().y),i.closePath(),i.clip()}function Qi(i,t){const{line:e,target:s,property:n,color:o,scale:a,clip:r}=t,l=_d(e,s,n);for(const{source:c,target:d,start:h,end:u}of l){const{style:{backgroundColor:f=o}={}}=c,p=s!==!0;i.save(),i.fillStyle=f,$d(i,a,r,p&&ds(n,h,u)),i.beginPath();const g=!!e.pathSegment(i,c);let m;if(p){g?i.closePath():Yn(i,s,u,n);const b=!!s.pathSegment(i,d,{move:g,reverse:!0});m=g&&b,m||Yn(i,s,h,n)}i.closePath(),i.fill(m?"evenodd":"nonzero"),i.restore()}}function $d(i,t,e,s){const n=t.chart.chartArea,{property:o,start:a,end:r}=s||{};if(o==="x"||o==="y"){let l,c,d,h;o==="x"?(l=a,c=n.top,d=r,h=n.bottom):(l=n.left,c=a,d=n.right,h=r),i.beginPath(),e&&(l=Math.max(l,e.left),d=Math.min(d,e.right),c=Math.max(c,e.top),h=Math.min(h,e.bottom)),i.rect(l,c,d-l,h-c),i.clip()}}function Yn(i,t,e,s){const n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var Hd={id:"filler",afterDatasetsUpdate(i,t,e){const s=(i.data.datasets||[]).length,n=[];let o,a,r,l;for(a=0;a<s;++a)o=i.getDatasetMeta(a),r=o.dataset,l=null,r&&r.options&&r instanceof Lt&&(l={visible:i.isDatasetVisible(a),index:a,fill:Md(r,a,s),chart:i,axis:o.controller.options.indexAxis,scale:o.vScale,line:r}),o.$filler=l,n.push(l);for(a=0;a<s;++a)l=n[a],!(!l||l.fill===!1)&&(l.fill=Sd(n,a,e.propagate))},beforeDraw(i,t,e){const s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),o=i.chartArea;for(let a=n.length-1;a>=0;--a){const r=n[a].$filler;r&&(r.line.updateControlPoints(o,r.axis),s&&r.fill&&Zi(i.ctx,r,o))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const o=s[n].$filler;Wn(o)&&Zi(i.ctx,o,i.chartArea)}},beforeDatasetDraw(i,t,e){const s=t.meta.$filler;!Wn(s)||e.drawTime!=="beforeDatasetDraw"||Zi(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const qn=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},jd=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class Xn extends pt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=B(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=X(s.font),o=n.size,a=this._computeTitleHeight(),{boxWidth:r,itemHeight:l}=qn(s,o);let c,d;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(a,o,r,l)+10):(d=this.maxHeight,c=this._fitCols(a,n,r,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){const{ctx:o,maxWidth:a,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=n+r;let h=t;o.textAlign="left",o.textBaseline="middle";let u=-1,f=-d;return this.legendItems.forEach((p,g)=>{const m=s+e/2+o.measureText(p.text).width;(g===0||c[c.length-1]+m+2*r>a)&&(h+=d,c[c.length-(g>0?0:1)]=0,f+=d,u++),l[g]={left:0,top:f,row:u,width:m,height:n},c[c.length-1]+=m+r}),h}_fitCols(t,e,s,n){const{ctx:o,maxHeight:a,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=a-t;let h=r,u=0,f=0,p=0,g=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:y,itemHeight:w}=Wd(s,e,o,m,n);b>0&&f+w+2*r>d&&(h+=u+r,c.push({width:u,height:f}),p+=u+r,g++,u=f=0),l[b]={left:p,top:f,col:g,width:y,height:w},u=Math.max(u,y),f+=w+r}),h+=u,c.push({width:u,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:o}}=this,a=ae(o,this.left,this.width);if(this.isHorizontal()){let r=0,l=tt(s,this.left+n,this.right-this.lineWidths[r]);for(const c of e)r!==c.row&&(r=c.row,l=tt(s,this.left+n,this.right-this.lineWidths[r])),c.top+=this.top+t+n,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+n}else{let r=0,l=tt(s,this.top+t+n,this.bottom-this.columnSizes[r].height);for(const c of e)c.col!==r&&(r=c.col,l=tt(s,this.top+t+n,this.bottom-this.columnSizes[r].height)),c.top=l,c.left+=this.left+n,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ri(t,this),this._draw(),Ei(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:o,labels:a}=t,r=H.color,l=ae(t.rtl,this.left,this.width),c=X(a.font),{padding:d}=a,h=c.size,u=h/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=qn(a,h),b=function(_,k,S){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const T=P(S.lineWidth,1);if(n.fillStyle=P(S.fillStyle,r),n.lineCap=P(S.lineCap,"butt"),n.lineDashOffset=P(S.lineDashOffset,0),n.lineJoin=P(S.lineJoin,"miter"),n.lineWidth=T,n.strokeStyle=P(S.strokeStyle,r),n.setLineDash(P(S.lineDash,[])),a.usePointStyle){const A={radius:g*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:T},D=l.xPlus(_,p/2),C=k+u;Po(n,A,D,C,a.pointStyleWidth&&p)}else{const A=k+Math.max((h-g)/2,0),D=l.leftForLtr(_,p),C=Kt(S.borderRadius);n.beginPath(),Object.values(C).some(U=>U!==0)?ze(n,{x:D,y:A,w:p,h:g,radius:C}):n.rect(D,A,p,g),n.fill(),T!==0&&n.stroke()}n.restore()},y=function(_,k,S){Qt(n,S.text,_,k+m/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},w=this.isHorizontal(),x=this._computeTitleHeight();w?f={x:tt(o,this.left+d,this.right-s[0]),y:this.top+d+x,line:0}:f={x:this.left+d,y:tt(o,this.top+x+d,this.bottom-e[0].height),line:0},Bo(this.ctx,t.textDirection);const v=m+d;this.legendItems.forEach((_,k)=>{n.strokeStyle=_.fontColor,n.fillStyle=_.fontColor;const S=n.measureText(_.text).width,T=l.textAlign(_.textAlign||(_.textAlign=a.textAlign)),A=p+u+S;let D=f.x,C=f.y;l.setWidth(this.width),w?k>0&&D+A+d>this.right&&(C=f.y+=v,f.line++,D=f.x=tt(o,this.left+d,this.right-s[f.line])):k>0&&C+v>this.bottom&&(D=f.x=D+e[f.line].width+d,f.line++,C=f.y=tt(o,this.top+x+d,this.bottom-e[f.line].height));const U=l.x(D);if(b(U,C,_),D=lr(T,D+p+u,w?D+A:this.right,t.rtl),y(l.x(D),C,_),w)f.x+=A+d;else if(typeof _.text!="string"){const at=c.lineHeight;f.y+=la(_,at)+d}else f.y+=v}),Fo(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=X(e.font),n=st(e.padding);if(!e.display)return;const o=ae(t.rtl,this.left,this.width),a=this.ctx,r=e.position,l=s.size/2,c=n.top+l;let d,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+c,h=tt(t.align,h,this.right-u);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);d=c+tt(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=tt(r,h,h+u);a.textAlign=o.textAlign(Ps(r)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=s.string,Qt(a,e.text,f,d,s)}_computeTitleHeight(){const t=this.options.title,e=X(t.font),s=st(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,o;if(Mt(t,this.left,this.right)&&Mt(e,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(n=o[s],Mt(t,n.left,n.left+n.width)&&Mt(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!Yd(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,o=jd(n,s);n&&!o&&B(e.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!o&&B(e.onHover,[t,s,this],this)}else s&&B(e.onClick,[t,s,this],this)}}function Wd(i,t,e,s,n){const o=Vd(s,i,t,e),a=Ud(n,s,t.lineHeight);return{itemWidth:o,itemHeight:a}}function Vd(i,t,e,s){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((o,a)=>o.length>a.length?o:a)),t+e.size/2+s.measureText(n).width}function Ud(i,t,e){let s=i;return typeof t.text!="string"&&(s=la(t,e)),s}function la(i,t){const e=i.text?i.text.length:0;return t*e}function Yd(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var qd={id:"legend",_element:Xn,start(i,t,e){const s=i.legend=new Xn({ctx:i.ctx,options:e,chart:i});it.configure(i,s,e),it.addBox(i,s)},stop(i){it.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const s=i.legend;it.configure(i,s,e),s.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),d=st(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:a&&(r||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Fs extends pt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=$(s.text)?s.text.length:1;this._padding=st(s.padding);const o=n*X(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:n,right:o,options:a}=this,r=a.align;let l=0,c,d,h;return this.isHorizontal()?(d=tt(r,s,o),h=e+t,c=o-s):(a.position==="left"?(d=s+t,h=tt(r,n,e),l=E*-.5):(d=o-t,h=tt(r,e,n),l=E*.5),c=n-e),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=X(e.font),o=s.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:l,rotation:c}=this._drawArgs(o);Qt(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:Ps(e.align),textBaseline:"middle",translation:[a,r]})}}function Xd(i,t){const e=new Fs({ctx:i.ctx,options:t,chart:i});it.configure(i,e,t),it.addBox(i,e),i.titleBlock=e}var Gd={id:"title",_element:Fs,start(i,t,e){Xd(i,e)},stop(i){const t=i.titleBlock;it.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const s=i.titleBlock;it.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const oi=new WeakMap;var Kd={id:"subtitle",start(i,t,e){const s=new Fs({ctx:i.ctx,options:e,chart:i});it.configure(i,s,e),it.addBox(i,s),oi.set(i,s)},stop(i){it.removeBox(i,oi.get(i)),oi.delete(i)},beforeUpdate(i,t,e){const s=oi.get(i);it.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Me={average(i){if(!i.length)return!1;let t,e,s=new Set,n=0,o=0;for(t=0,e=i.length;t<e;++t){const r=i[t].element;if(r&&r.hasValue()){const l=r.tooltipPosition();s.add(l.x),n+=l.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((r,l)=>r+l)/s.size,y:n/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,n=Number.POSITIVE_INFINITY,o,a,r;for(o=0,a=i.length;o<a;++o){const l=i[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=is(t,c);d<n&&(n=d,r=l)}}if(r){const l=r.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function bt(i,t){return t&&($(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function _t(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Jd(i,t){const{element:e,datasetIndex:s,index:n}=t,o=i.getDatasetMeta(s).controller,{label:a,value:r}=o.getLabelAndValue(n);return{chart:i,label:a,parsed:o.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function Gn(i,t){const e=i.chart.ctx,{body:s,footer:n,title:o}=i,{boxWidth:a,boxHeight:r}=t,l=X(t.bodyFont),c=X(t.titleFont),d=X(t.footerFont),h=o.length,u=n.length,f=s.length,p=st(t.padding);let g=p.height,m=0,b=s.reduce((x,v)=>x+v.before.length+v.lines.length+v.after.length,0);if(b+=i.beforeBody.length+i.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const x=t.displayColors?Math.max(r,l.lineHeight):l.lineHeight;g+=f*x+(b-f)*l.lineHeight+(b-1)*t.bodySpacing}u&&(g+=t.footerMarginTop+u*d.lineHeight+(u-1)*t.footerSpacing);let y=0;const w=function(x){m=Math.max(m,e.measureText(x).width+y)};return e.save(),e.font=c.string,L(i.title,w),e.font=l.string,L(i.beforeBody.concat(i.afterBody),w),y=t.displayColors?a+2+t.boxPadding:0,L(s,x=>{L(x.before,w),L(x.lines,w),L(x.after,w)}),y=0,e.font=d.string,L(i.footer,w),e.restore(),m+=p.width,{width:m,height:g}}function Zd(i,t){const{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function Qd(i,t,e,s){const{x:n,width:o}=s,a=e.caretSize+e.caretPadding;if(i==="left"&&n+o+a>t.width||i==="right"&&n-o-a<0)return!0}function th(i,t,e,s){const{x:n,width:o}=e,{width:a,chartArea:{left:r,right:l}}=i;let c="center";return s==="center"?c=n<=(r+l)/2?"left":"right":n<=o/2?c="left":n>=a-o/2&&(c="right"),Qd(c,i,t,e)&&(c="center"),c}function Kn(i,t,e){const s=e.yAlign||t.yAlign||Zd(i,e);return{xAlign:e.xAlign||t.xAlign||th(i,t,e,s),yAlign:s}}function eh(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function ih(i,t,e){let{y:s,height:n}=i;return t==="top"?s+=e:t==="bottom"?s-=n+e:s-=n/2,s}function Jn(i,t,e,s){const{caretSize:n,caretPadding:o,cornerRadius:a}=i,{xAlign:r,yAlign:l}=e,c=n+o,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:f}=Kt(a);let p=eh(t,r);const g=ih(t,l,c);return l==="center"?r==="left"?p+=c:r==="right"&&(p-=c):r==="left"?p-=Math.max(d,u)+n:r==="right"&&(p+=Math.max(h,f)+n),{x:K(p,0,s.width-t.width),y:K(g,0,s.height-t.height)}}function ai(i,t,e){const s=st(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function Zn(i){return bt([],_t(i))}function sh(i,t,e){return $t(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Qn(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const ca={beforeTitle:xt,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:xt,beforeBody:xt,beforeLabel:xt,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return O(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:xt,afterBody:xt,beforeFooter:xt,footer:xt,afterFooter:xt};function nt(i,t,e,s){const n=i[t].call(e,s);return typeof n>"u"?ca[t].call(e,s):n}class hs extends pt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&e.options.animation&&s.animations,o=new jo(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=sh(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,n=nt(s,"beforeTitle",this,t),o=nt(s,"title",this,t),a=nt(s,"afterTitle",this,t);let r=[];return r=bt(r,_t(n)),r=bt(r,_t(o)),r=bt(r,_t(a)),r}getBeforeBody(t,e){return Zn(nt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,n=[];return L(t,o=>{const a={before:[],lines:[],after:[]},r=Qn(s,o);bt(a.before,_t(nt(r,"beforeLabel",this,o))),bt(a.lines,nt(r,"label",this,o)),bt(a.after,_t(nt(r,"afterLabel",this,o))),n.push(a)}),n}getAfterBody(t,e){return Zn(nt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,n=nt(s,"beforeFooter",this,t),o=nt(s,"footer",this,t),a=nt(s,"afterFooter",this,t);let r=[];return r=bt(r,_t(n)),r=bt(r,_t(o)),r=bt(r,_t(a)),r}_createItems(t){const e=this._active,s=this.chart.data,n=[],o=[],a=[];let r=[],l,c;for(l=0,c=e.length;l<c;++l)r.push(Jd(this.chart,e[l]));return t.filter&&(r=r.filter((d,h,u)=>t.filter(d,h,u,s))),t.itemSort&&(r=r.sort((d,h)=>t.itemSort(d,h,s))),L(r,d=>{const h=Qn(t.callbacks,d);n.push(nt(h,"labelColor",this,d)),o.push(nt(h,"labelPointStyle",this,d)),a.push(nt(h,"labelTextColor",this,d))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=r,r}update(t,e){const s=this.options.setContext(this.getContext()),n=this._active;let o,a=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const r=Me[s.position].call(this,n,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const l=this._size=Gn(this,s),c=Object.assign({},r,l),d=Kn(this.chart,s,c),h=Jn(s,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:r.x,caretY:r.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,n){const o=this.getCaretPosition(t,s,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,s){const{xAlign:n,yAlign:o}=this,{caretSize:a,cornerRadius:r}=s,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:h}=Kt(r),{x:u,y:f}=t,{width:p,height:g}=e;let m,b,y,w,x,v;return o==="center"?(x=f+g/2,n==="left"?(m=u,b=m-a,w=x+a,v=x-a):(m=u+p,b=m+a,w=x-a,v=x+a),y=m):(n==="left"?b=u+Math.max(l,d)+a:n==="right"?b=u+p-Math.max(c,h)-a:b=this.caretX,o==="top"?(w=f,x=w-a,m=b-a,y=b+a):(w=f+g,x=w+a,m=b+a,y=b-a),v=w),{x1:m,x2:b,x3:y,y1:w,y2:x,y3:v}}drawTitle(t,e,s){const n=this.title,o=n.length;let a,r,l;if(o){const c=ae(s.rtl,this.x,this.width);for(t.x=ai(this,s.titleAlign,s),e.textAlign=c.textAlign(s.titleAlign),e.textBaseline="middle",a=X(s.titleFont),r=s.titleSpacing,e.fillStyle=s.titleColor,e.font=a.string,l=0;l<o;++l)e.fillText(n[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r,l+1===o&&(t.y+=s.titleMarginBottom-r)}}_drawColorBox(t,e,s,n,o){const a=this.labelColors[s],r=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=o,d=X(o.bodyFont),h=ai(this,"left",o),u=n.x(h),f=l<d.lineHeight?(d.lineHeight-l)/2:0,p=e.y+f;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},m=n.leftForLtr(u,c)+c/2,b=p+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ns(t,g,m,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ns(t,g,m,b)}else{t.lineWidth=R(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=n.leftForLtr(u,c),m=n.leftForLtr(n.xPlus(u,1),c-2),b=Kt(a.borderRadius);Object.values(b).some(y=>y!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,ze(t,{x:g,y:p,w:c,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),ze(t,{x:m,y:p+1,w:c-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,p,c,l),t.strokeRect(g,p,c,l),t.fillStyle=a.backgroundColor,t.fillRect(m,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:n}=this,{bodySpacing:o,bodyAlign:a,displayColors:r,boxHeight:l,boxWidth:c,boxPadding:d}=s,h=X(s.bodyFont);let u=h.lineHeight,f=0;const p=ae(s.rtl,this.x,this.width),g=function(S){e.fillText(S,p.x(t.x+f),t.y+u/2),t.y+=u+o},m=p.textAlign(a);let b,y,w,x,v,_,k;for(e.textAlign=a,e.textBaseline="middle",e.font=h.string,t.x=ai(this,m,s),e.fillStyle=s.bodyColor,L(this.beforeBody,g),f=r&&m!=="right"?a==="center"?c/2+d:c+2+d:0,x=0,_=n.length;x<_;++x){for(b=n[x],y=this.labelTextColors[x],e.fillStyle=y,L(b.before,g),w=b.lines,r&&w.length&&(this._drawColorBox(e,t,x,p,s),u=Math.max(h.lineHeight,l)),v=0,k=w.length;v<k;++v)g(w[v]),u=h.lineHeight;L(b.after,g)}f=0,u=h.lineHeight,L(this.afterBody,g),t.y-=o}drawFooter(t,e,s){const n=this.footer,o=n.length;let a,r;if(o){const l=ae(s.rtl,this.x,this.width);for(t.x=ai(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=l.textAlign(s.footerAlign),e.textBaseline="middle",a=X(s.footerFont),e.fillStyle=s.footerColor,e.font=a.string,r=0;r<o;++r)e.fillText(n[r],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,e,s,n){const{xAlign:o,yAlign:a}=this,{x:r,y:l}=t,{width:c,height:d}=s,{topLeft:h,topRight:u,bottomLeft:f,bottomRight:p}=Kt(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(r+h,l),a==="top"&&this.drawCaret(t,e,s,n),e.lineTo(r+c-u,l),e.quadraticCurveTo(r+c,l,r+c,l+u),a==="center"&&o==="right"&&this.drawCaret(t,e,s,n),e.lineTo(r+c,l+d-p),e.quadraticCurveTo(r+c,l+d,r+c-p,l+d),a==="bottom"&&this.drawCaret(t,e,s,n),e.lineTo(r+f,l+d),e.quadraticCurveTo(r,l+d,r,l+d-f),a==="center"&&o==="left"&&this.drawCaret(t,e,s,n),e.lineTo(r,l+h),e.quadraticCurveTo(r,l,r+h,l),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){const a=Me[t.position].call(this,this._active,this._eventPosition);if(!a)return;const r=this._size=Gn(this,t),l=Object.assign({},a,this._size),c=Kn(e,t,l),d=Jn(t,l,c,e);(n._to!==d.x||o._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=r.width,this.height=r.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=st(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,n,e),Bo(t,e.textDirection),o.y+=a.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Fo(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,n=t.map(({datasetIndex:r,index:l})=>{const c=this.chart.getDatasetMeta(r);if(!c)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:c.data[l],index:l}}),o=!bi(s,n),a=this._positionChanged(n,e);(o||a)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],a=this._getActiveElements(t,o,e,s),r=this._positionChanged(a,t),l=e||!bi(a,o)||r;return l&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,s,n){const o=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(r=>this.chart.data.datasets[r.datasetIndex]&&this.chart.getDatasetMeta(r.datasetIndex).controller.getParsed(r.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:s,caretY:n,options:o}=this,a=Me[o.position].call(this,t,e);return a!==!1&&(s!==a.x||n!==a.y)}}M(hs,"positioners",Me);var nh={id:"tooltip",_element:hs,positioners:Me,afterInit(i,t,e){e&&(i.tooltip=new hs({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ca},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},oh=Object.freeze({__proto__:null,Colors:bd,Decimation:wd,Filler:Hd,Legend:qd,SubTitle:Kd,Title:Gd,Tooltip:nh});const ah=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function rh(i,t,e,s){const n=i.indexOf(t);if(n===-1)return ah(i,t,e,s);const o=i.lastIndexOf(t);return n!==o?e:n}const lh=(i,t)=>i===null?null:K(Math.round(i),0,t);function to(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class us extends te{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:n,label:o}of e)s[n]===o&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(O(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:rh(s,t,P(e,t),this._addedLabels),lh(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,n=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=t;a<=e;a++)n.push({value:a});return n}getLabelForValue(t){return to.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}M(us,"id","category"),M(us,"defaults",{ticks:{callback:to}});function ch(i,t){const e=[],{bounds:n,step:o,min:a,max:r,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:u}=i,f=o||1,p=d-1,{min:g,max:m}=t,b=!O(a),y=!O(r),w=!O(c),x=(m-g)/(h+1);let v=Xs((m-g)/p/f)*f,_,k,S,T;if(v<1e-14&&!b&&!y)return[{value:g},{value:m}];T=Math.ceil(m/v)-Math.floor(g/v),T>p&&(v=Xs(T*v/p/f)*f),O(l)||(_=Math.pow(10,l),v=Math.ceil(v*_)/_),n==="ticks"?(k=Math.floor(g/v)*v,S=Math.ceil(m/v)*v):(k=g,S=m),b&&y&&o&&er((r-a)/o,v/1e3)?(T=Math.round(Math.min((r-a)/v,d)),v=(r-a)/T,k=a,S=r):w?(k=b?a:k,S=y?r:S,T=c-1,v=(S-k)/T):(T=(S-k)/v,Pe(T,Math.round(T),v/1e3)?T=Math.round(T):T=Math.ceil(T));const A=Math.max(Gs(v),Gs(k));_=Math.pow(10,O(l)?A:l),k=Math.round(k*_)/_,S=Math.round(S*_)/_;let D=0;for(b&&(u&&k!==a?(e.push({value:a}),k<a&&D++,Pe(Math.round((k+D*v)*_)/_,a,eo(a,x,i))&&D++):k<a&&D++);D<T;++D){const C=Math.round((k+D*v)*_)/_;if(y&&C>r)break;e.push({value:C})}return y&&u&&S!==r?e.length&&Pe(e[e.length-1].value,r,eo(r,x,i))?e[e.length-1].value=r:e.push({value:r}):(!y||S===r)&&e.push({value:S}),e}function eo(i,t,{horizontal:e,minRotation:s}){const n=ft(s),o=(e?Math.sin(n):Math.cos(n))||.001,a=.75*t*(""+i).length;return Math.min(t/o,a)}class Si extends te{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return O(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:o}=this;const a=l=>n=e?n:l,r=l=>o=s?o:l;if(t){const l=vt(n),c=vt(o);l<0&&c<0?r(0):l>0&&c>0&&a(0)}if(n===o){let l=o===0?1:Math.abs(o*.05);r(o+l),t||a(n-l)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,a=ch(n,o);return t.bounds==="ticks"&&vo(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return Ye(t,this.chart.options.locale,this.options.ticks.format)}}class fs extends Si{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=W(t)?t:0,this.max=W(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=ft(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}M(fs,"id","linear"),M(fs,"defaults",{ticks:{callback:Oi.formatters.numeric}});const $e=i=>Math.floor(Rt(i)),Yt=(i,t)=>Math.pow(10,$e(i)+t);function io(i){return i/Math.pow(10,$e(i))===1}function so(i,t,e){const s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function dh(i,t){const e=t-i;let s=$e(e);for(;so(i,t,s)>10;)s++;for(;so(i,t,s)<10;)s--;return Math.min(s,$e(i))}function hh(i,{min:t,max:e}){t=rt(i.min,t);const s=[],n=$e(t);let o=dh(t,e),a=o<0?Math.pow(10,Math.abs(o)):1;const r=Math.pow(10,o),l=n>o?Math.pow(10,n):0,c=Math.round((t-l)*a)/a,d=Math.floor((t-l)/r/10)*r*10;let h=Math.floor((c-d)/Math.pow(10,o)),u=rt(i.min,Math.round((l+d+h*Math.pow(10,o))*a)/a);for(;u<e;)s.push({value:u,major:io(u),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),u=Math.round((l+d+h*Math.pow(10,o))*a)/a;const f=rt(i.max,u);return s.push({value:f,major:io(f),significand:h}),s}class gs extends te{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=Si.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return W(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=W(t)?Math.max(0,t):null,this.max=W(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!W(this._userMin)&&(this.min=t===Yt(this.min,0)?Yt(this.min,-1):Yt(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,n=this.max;const o=r=>s=t?s:r,a=r=>n=e?n:r;s===n&&(s<=0?(o(1),a(10)):(o(Yt(s,-1)),a(Yt(n,1)))),s<=0&&o(Yt(n,-1)),n<=0&&a(Yt(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=hh(e,this);return t.bounds==="ticks"&&vo(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Ye(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Rt(t),this._valueRange=Rt(this.max)-Rt(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Rt(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}M(gs,"id","logarithmic"),M(gs,"defaults",{ticks:{callback:Oi.formatters.logarithmic,major:{enabled:!0}}});function ps(i){const t=i.ticks;if(t.display&&i.display){const e=st(t.backdropPadding);return P(t.font&&t.font.size,H.font.size)+e.height}return 0}function uh(i,t,e){return e=$(e)?e:[e],{w:yr(i,t.string,e),h:e.length*t.lineHeight}}function no(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function fh(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],o=i._pointLabels.length,a=i.options.pointLabels,r=a.centerPointLabels?E/o:0;for(let l=0;l<o;l++){const c=a.setContext(i.getPointLabelContext(l));n[l]=c.padding;const d=i.getPointPosition(l,i.drawingArea+n[l],r),h=X(c.font),u=uh(i.ctx,h,i._pointLabels[l]);s[l]=u;const f=et(i.getIndexAngle(l)+r),p=Math.round(Ts(f)),g=no(p,d.x,u.w,0,180),m=no(p,d.y,u.h,90,270);gh(e,t,f,g,m)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=bh(i,s,n)}function gh(i,t,e,s,n){const o=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let r=0,l=0;s.start<t.l?(r=(t.l-s.start)/o,i.l=Math.min(i.l,t.l-r)):s.end>t.r&&(r=(s.end-t.r)/o,i.r=Math.max(i.r,t.r+r)),n.start<t.t?(l=(t.t-n.start)/a,i.t=Math.min(i.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/a,i.b=Math.max(i.b,t.b+l))}function ph(i,t,e){const s=i.drawingArea,{extra:n,additionalAngle:o,padding:a,size:r}=e,l=i.getPointPosition(t,s+n+a,o),c=Math.round(Ts(et(l.angle+q))),d=xh(l.y,r.h,c),h=yh(c),u=vh(l.x,r.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:u,top:d,right:u+r.w,bottom:d+r.h}}function mh(i,t){if(!t)return!0;const{left:e,top:s,right:n,bottom:o}=i;return!(Dt({x:e,y:s},t)||Dt({x:e,y:o},t)||Dt({x:n,y:s},t)||Dt({x:n,y:o},t))}function bh(i,t,e){const s=[],n=i._pointLabels.length,o=i.options,{centerPointLabels:a,display:r}=o.pointLabels,l={extra:ps(o)/2,additionalAngle:a?E/n:0};let c;for(let d=0;d<n;d++){l.padding=e[d],l.size=t[d];const h=ph(i,d,l);s.push(h),r==="auto"&&(h.visible=mh(h,c),h.visible&&(c=h))}return s}function yh(i){return i===0||i===180?"center":i<180?"left":"right"}function vh(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function xh(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function wh(i,t,e){const{left:s,top:n,right:o,bottom:a}=e,{backdropColor:r}=t;if(!O(r)){const l=Kt(t.borderRadius),c=st(t.backdropPadding);i.fillStyle=r;const d=s-c.left,h=n-c.top,u=o-s+c.width,f=a-n+c.height;Object.values(l).some(p=>p!==0)?(i.beginPath(),ze(i,{x:d,y:h,w:u,h:f,radius:l}),i.fill()):i.fillRect(d,h,u,f)}}function _h(i,t){const{ctx:e,options:{pointLabels:s}}=i;for(let n=t-1;n>=0;n--){const o=i._pointLabelItems[n];if(!o.visible)continue;const a=s.setContext(i.getPointLabelContext(n));wh(e,a,o);const r=X(a.font),{x:l,y:c,textAlign:d}=o;Qt(e,i._pointLabels[n],l,c+r.lineHeight/2,r,{color:a.color,textAlign:d,textBaseline:"middle"})}}function da(i,t,e,s){const{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,z);else{let o=i.getPointPosition(0,t);n.moveTo(o.x,o.y);for(let a=1;a<s;a++)o=i.getPointPosition(a,t),n.lineTo(o.x,o.y)}}function kh(i,t,e,s,n){const o=i.ctx,a=t.circular,{color:r,lineWidth:l}=t;!a&&!s||!r||!l||e<0||(o.save(),o.strokeStyle=r,o.lineWidth=l,o.setLineDash(n.dash||[]),o.lineDashOffset=n.dashOffset,o.beginPath(),da(i,e,a,s),o.closePath(),o.stroke(),o.restore())}function Sh(i,t,e){return $t(i,{label:e,index:t,type:"pointLabel"})}class Te extends Si{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=st(ps(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=W(t)&&!isNaN(t)?t:0,this.max=W(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ps(this.options))}generateTickLabels(t){Si.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const n=B(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?fh(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){const e=z/(this._pointLabels.length||1),s=this.options.startAngle||0;return et(t*e+ft(s))}getDistanceFromCenterForValue(t){if(O(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(O(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return Sh(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const n=this.getIndexAngle(t)-q+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),da(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:n,border:o}=e,a=this._pointLabels.length;let r,l,c;if(e.pointLabels.display&&_h(this,a),n.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);const u=this.getContext(h),f=n.setContext(u),p=o.setContext(u);kh(this,f,l,a,p)}}),s.display){for(t.save(),r=a-1;r>=0;r--){const d=s.setContext(this.getPointLabelContext(r)),{color:h,lineWidth:u}=d;!u||!h||(t.lineWidth=u,t.strokeStyle=h,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(r,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let o,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=s.setContext(this.getContext(l)),d=X(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,a=t.measureText(r.label).width,t.fillStyle=c.backdropColor;const h=st(c.backdropPadding);t.fillRect(-a/2-h.left,-o-d.size/2-h.top,a+h.width,d.size+h.height)}Qt(t,r.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}M(Te,"id","radialLinear"),M(Te,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Oi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),M(Te,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),M(Te,"descriptors",{angleLines:{_fallback:"grid"}});const Fi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ot=Object.keys(Fi);function oo(i,t){return i-t}function ao(i,t){if(O(t))return null;const e=i._adapter,{parser:s,round:n,isoWeekday:o}=i._parseOpts;let a=t;return typeof s=="function"&&(a=s(a)),W(a)||(a=typeof s=="string"?e.parse(a,s):e.parse(a)),a===null?null:(n&&(a=n==="week"&&(le(o)||o===!0)?e.startOf(a,"isoWeek",o):e.startOf(a,n)),+a)}function ro(i,t,e,s){const n=ot.length;for(let o=ot.indexOf(i);o<n-1;++o){const a=Fi[ot[o]],r=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(r*a.size))<=s)return ot[o]}return ot[n-1]}function Mh(i,t,e,s,n){for(let o=ot.length-1;o>=ot.indexOf(e);o--){const a=ot[o];if(Fi[a].common&&i._adapter.diff(n,s,a)>=t-1)return a}return ot[e?ot.indexOf(e):0]}function Th(i){for(let t=ot.indexOf(i)+1,e=ot.length;t<e;++t)if(Fi[ot[t]].common)return ot[t]}function lo(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:s,hi:n}=Ds(e,t),o=e[s]>=t?e[s]:e[n];i[o]=!0}}function Dh(i,t,e,s){const n=i._adapter,o=+n.startOf(t[0].value,s),a=t[t.length-1].value;let r,l;for(r=o;r<=a;r=+n.add(r,1,s))l=e[r],l>=0&&(t[l].major=!0);return t}function co(i,t,e){const s=[],n={},o=t.length;let a,r;for(a=0;a<o;++a)r=t[a],n[r]=a,s.push({value:r,major:!1});return o===0||!e?s:Dh(i,s,n,e)}class He extends te{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),n=this._adapter=new Il._date(t.adapters.date);n.init(e),De(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:ao(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:n,max:o,minDefined:a,maxDefined:r}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!r&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!a||!r)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=W(n)&&!isNaN(n)?n:+e.startOf(Date.now(),s),o=W(o)&&!isNaN(o)?o:+e.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,a=this.max,r=or(n,o,a);return this._unit=e.unit||(s.autoSkip?ro(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):Mh(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:Th(this._unit),this.initOffsets(n),t.reverse&&r.reverse(),co(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,n,o;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?s=o:s=(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=K(e,0,a),s=K(s,0,a),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,n=this.options,o=n.time,a=o.unit||ro(o.minUnit,e,s,this._getLabelCapacity(e)),r=P(n.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,c=le(l)||l===!0,d={};let h=e,u,f;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":a),t.diff(s,e,a)>1e5*r)throw new Error(e+" and "+s+" are too far apart with stepSize of "+r+" "+a);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(u=h,f=0;u<s;u=+t.add(u,r,a),f++)lo(d,u,p);return(u===s||n.bounds==="ticks"||f===1)&&lo(d,u,p),Object.keys(d).sort(oo).map(g=>+g)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,o=this._unit,a=e||n[o];return this._adapter.format(t,a)}_tickFormatFunction(t,e,s,n){const o=this.options,a=o.ticks.callback;if(a)return B(a,[t,e,s],this);const r=o.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&r[l],h=c&&r[c],u=s[e],f=c&&h&&u&&u.major;return this._adapter.format(t,n||(f?h:d))}generateTickLabels(t){let e,s,n;for(e=0,s=t.length;e<s;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,n=ft(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),a=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:s*o+r*a,h:s*a+r*o}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,n=s[e.unit]||s.millisecond,o=this._tickFormatFunction(t,0,co(this,[t],this._majorUnit),n),a=this._getLabelSize(o),r=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return r>0?r:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,s=n.length;e<s;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const n=this.getLabels();for(e=0,s=n.length;e<s;++e)t.push(ao(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return _o(t.sort(oo))}}M(He,"id","time"),M(He,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function ri(i,t,e){let s=0,n=i.length-1,o,a,r,l;e?(t>=i[s].pos&&t<=i[n].pos&&({lo:s,hi:n}=Tt(i,"pos",t)),{pos:o,time:r}=i[s],{pos:a,time:l}=i[n]):(t>=i[s].time&&t<=i[n].time&&({lo:s,hi:n}=Tt(i,"time",t)),{time:o,pos:r}=i[s],{time:a,pos:l}=i[n]);const c=a-o;return c?r+(l-r)*(t-o)/c:r}class ms extends He{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=ri(e,this.min),this._tableRange=ri(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,n=[],o=[];let a,r,l,c,d;for(a=0,r=t.length;a<r;++a)c=t[a],c>=e&&c<=s&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(a=0,r=n.length;a<r;++a)d=n[a+1],l=n[a-1],c=n[a],Math.round((d+l)/2)!==c&&o.push({time:c,pos:a/(r-1)});return o}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((n,o)=>n-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(ri(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return ri(this._table,s*this._tableRange+this._minPos,!0)}}M(ms,"id","timeseries"),M(ms,"defaults",He.defaults);var Ph=Object.freeze({__proto__:null,CategoryScale:us,LinearScale:fs,LogarithmicScale:gs,RadialLinearScale:Te,TimeScale:He,TimeSeriesScale:ms});const Ah=[Ll,dd,oh,Ph];St.register(...Ah);const Ch=[{term:"Abstract",definition:"A brief summary at the beginning of a research paper outlining the study's purpose, methods, results, and conclusions."},{term:"Citation",definition:"A reference to another study or source, showing where information came from and allowing readers to verify claims."},{term:"Conflict of Interest",definition:"When researchers have financial, professional, or personal interests that could influence their work. Good studies declare these transparently."},{term:"Control Group",definition:"A comparison group that doesn't receive the treatment being tested, used to determine if an intervention actually works."},{term:"Correlation vs. Causation",definition:"Correlation means two things happen together; causation means one causes the other. Correlation does NOT prove causation."},{term:"Data",definition:"The information collected during a study, which can include measurements, observations, survey responses, or other recorded facts."},{term:"Hypothesis",definition:"A testable prediction about what will happen in a study, based on existing knowledge or theory."},{term:"Methods",definition:"The section describing how the study was conducted, including participants, materials, procedures, and analysis techniques."},{term:"Open Access",definition:"Research papers that are freely available to read online without a paywall or subscription. Anyone can access the full text immediately."},{term:"Open Data",definition:"When researchers make their raw data publicly available so others can verify results and conduct their own analyses."},{term:"Paywall",definition:"A barrier that requires payment (often $30+) or institutional access to read a research paper. This limits who can verify the science."},{term:"Peer Review",definition:"A process where other experts in the field evaluate a research paper before publication to check its quality and validity."},{term:"Predatory Journal",definition:"A publication that accepts papers without proper peer review, often charging fees. These journals prioritize profit over scientific quality."},{term:"Preprint",definition:"An early version of a research paper shared publicly before peer review. Useful for rapid communication but not yet vetted by experts."},{term:"Preregistration",definition:"Declaring your research plan and analysis methods publicly before collecting data, which reduces bias and questionable research practices."},{term:"Replication",definition:"Repeating a study to see if the same results occur. Replicable findings are more trustworthy than one-off results."},{term:"Results",definition:"The section presenting what the study found, including statistical outcomes and data visualizations."},{term:"Sample Size",definition:"The number of participants (<i>N</i>) or observations in a study. Larger samples generally provide more reliable results."},{term:"Statistical Significance",definition:"A measure of whether results are likely due to chance or represent a real effect. Typically set at p < 0.05, but context matters."},{term:"Theory",definition:"A well-established explanation for a phenomenon, supported by substantial evidence from multiple studies."},{term:"Variable",definition:"Any factor that can change or be measured in a study, such as age, temperature, or test scores."}],Oh=[{name:"Title",low:"Clickbait: Uses words like 'Miracle,' 'Proven,' 'Cure.' Scarier or better than the actual data.",medium:"Modest: Describes the finding but might leave out limitations to sound more interesting.",high:"Accurate: Boring but true. Describes exactly what happened (e.g., 'Correlation observed in mice')."},{name:"Access",low:"Impossible: Behind a paywall ($30+), no link provided, or 'Contact author' with no reply.",medium:"Difficult: Requires university login, searching through specific databases, or requesting via forums.",high:"Open: One-click access to the full PDF. Free for everyone (Open Access)."},{name:"Source",low:"Suspicious: Marketing blogs, 'Predatory' journals (pay-to-publish), or corporate white papers.",medium:"Unverified: Preprints (not yet reviewed), or mid-tier journals that sometimes favour hype.",high:"Trusted: Top-tier peer-reviewed journals, reputable independent research institutes, or government bodies."},{name:"Theory",low:"Nonsense: Ignores all previous science. Invents new laws of physics/biology without proof.",medium:"Standard: Repeats what we already know without adding much new value.",high:"Robust: Fills a clear gap in knowledge. Uses past research responsibly to build a new argument."},{name:"Methods & Data",low:"Flawed & Closed: Tiny sample size. No control group. Data is secret/hidden.",medium:"Acceptable: Decent sample size. Standard methods. Data available upon request.",high:"Rigorous & Open: Preregistration, large sample size, gold-standard controls, and fully available materials and data."},{name:"Conclusion",low:"Overblown: Claims a fact based on a guess. Confuses correlation with causation.",medium:"Logical: Conclusion mostly fits the results but ignores some alternative explanations.",high:"Nuanced: Very careful. Admits what they don't know. Claims only what the data proves."}],Rh=[{id:"STUDY-1",title:"The impact of chocolate-based breakfasts on mathematical performance in school-aged children",access:"Freely accessible online (Open Access). The journal charges authors a publication fee rather than readers  a common model in predatory publishing that creates the appearance of openness while bypassing rigorous peer review.",overview:"The study relies on the simplified premise that glucose provides immediate fuel for the brain. However, it fails to engage with the substantial body of existing literature describing the sugar crash effect and the impact of sustained energy release on cognitive concentration.",methods:"The researchers observed <i>N</i>=12 children in a single classroom for three days. There was no control group (e.g., children eating a standard breakfast) to compare against. Data availability: The authors state that raw data and individual test scores are not shared due to commercial sensitivity regarding the chocolate brand involved.",conclusion:"The authors conclude that chocolate should be mandatory in school breakfasts to improve national grades. This is a massive generalisation based on a tiny, uncontrolled sample.",source:"Predatory Journal. Published in a pay-to-publish outlet with no rigorous peer review process, often used for marketing stunts disguised as science."},{id:"STUDY-2",title:"New alloy shows promise for lighter aircraft components",access:"Direct PDF link available (Open Access).",overview:"The study builds on standard metallurgical theories regarding titanium-aluminium blends, specifically addressing a known gap in the literature regarding heat resistance at high altitudes. It uses previous stress-testing models responsibly to predict performance.",methods:"The team conducted rigorous stress-testing in controlled lab conditions, repeating the fracture test 500 times. Data availability: Stress-test logs and statistical code are uploaded to a public repository (OSF/GitHub). However, the precise alloy composition ratios have been withheld pending a patent application, which prevents full independent replication of the material itself.",conclusion:"The conclusion is cautious. It states the alloy is significantly lighter but notes it is currently too expensive for commercial use, suggesting further research into manufacturing costs is required.",source:"Respected Field-Specific Journal. A well-regarded peer-reviewed publication specialising in materials science and engineering."},{id:"STUDY-3",title:"The effect of pre-sleep screen time on sleep onset latency",access:"Accessible with difficulty (requires searching the DOI in a university library or using Sci-Hub).",overview:"The hypothesis is grounded in well-established theories regarding blue light emission and the suppression of melatonin (the sleep hormone). It cites robust prior research on circadian rhythms.",methods:"The study surveyed 2,000 adults. However, it relied entirely on self-reported data (participants estimated how much they slept), which is often inaccurate compared to objective tracking. Data availability: Summary tables are provided in the appendix, but raw participant data is not available to protect privacy.",conclusion:"The authors suggest a link between phone use and insomnia but responsibly acknowledge reverse causalitynoting that anxious people might be using their phones because they cannot sleep, rather than the phone causing the sleeplessness.",source:"High-Impact Generalist Journal. A prestigious journal that covers broad scientific topics; known for rigorous peer review but occasionally favours studies with mass appeal."},{id:"STUDY-4",title:"The neuroprotective effects of a daily herbal tea infusion on Alzheimer's disease prevention",access:"Free to read online (Open Access). Like many predatory journals, this outlet charges authors a fee to publish rather than charging readers  a misleading signal of quality.",overview:"The premise is loosely based on traditional folk medicine practices. It ignores current neurological understanding of amyloid plaques and tau tangles, which are the primary biological markers of Alzheimer's disease.",methods:"A 6-week observational study of 40 people who already chose to drink the tea daily. There was no randomised control group. Cognition was measured via brief phone interviews rather than clinical scanning. Data availability: Raw data unavailable due to participant confidentiality.",conclusion:"Overblown. The study confuses a short-term feeling of alertness (likely from caffeine) with the long-term prevention of a complex neurodegenerative disease.",source:"Predatory Journal. The journal website contains broken English and promises publication within 48 hours for a fee, indicating zero peer review."},{id:"STUDY-5",title:"Specific pesticide shows minimal impact on honey bee navigation in field conditions",access:"Open Access (Direct PDF link).",overview:"The study investigates the ecological validity of previous lab-based findings. It questions whether the harm seen in petri dishes translates to real-world farming environments, a valid scientific question.",methods:"A large-scale field trial across 20 farms over two years, using RFID tags to track thousands of individual bees. The methodology was pre-registered (declared before the experiment started) to prevent cherry-picking results. Data availability: Full datasets and tracking code are uploaded to a public repository (Zenodo).",conclusion:"Cautious and specific. It states that at current agricultural usage levels, this specific chemical does not significantly impair homing flight, but explicitly warns against applying this finding to other insect species.",source:"Respected Field-Specific Journal. Published in a top-tier peer-reviewed journal dedicated to ecology and entomology. Note: the field trial was co-funded by the manufacturer of the pesticide under study  a declared conflict of interest. The preregistration limits bias, but commercial influence on which results get published cannot be ruled out."},{id:"STUDY-6",title:"A causal link between Instagram use and adolescent anxiety",access:"Accessible with difficulty (via university library subscription).",overview:"Uses standard social psychology theories regarding social comparison and self-esteem. However, it assumes a direct causal vector without accounting for the complexity of adolescent mental health.",methods:"A cross-sectional survey of 5,000 teenagers taken at a single point in time. While the sample size is large, the method relies entirely on self-reporting for both hours used and anxiety levels. Data availability: Summary statistics provided; raw data available only upon request to the lead author.",conclusion:"Logical but limited. The study establishes a strong correlation but the authors (and the title) imply causation. They fail to address whether anxious teens simply retreat to social media more often.",source:"Mid-Tier Psychology Journal. A legitimate peer-reviewed journal, though one that occasionally publishes correlational studies with catchy titles to boost its impact factor."},{id:"STUDY-7",title:"Eliminating gender bias in recruitment with a novel AI hiring tool",access:"A white paper published directly on the tech companys website (free, but requires an email sign-up).",overview:"The approach assumes that simply removing names from CVs is sufficient to de-bias an algorithmic process. It fails to engage with literature on proxy variables (how AI finds other patterns that correlate with gender).",methods:"The developers tested the AI using CVs from their own previous hiring rounds. They did not account for the fact that their historical hiring data was already biased against women, meaning the AI learned to replicate that bias. Data availability: Data and algorithms are proprietary intellectual property and cannot be shared.",conclusion:"Incorrect. The study claims success because names were hidden, but independent analysis later showed the AI penalised applicants who attended women's colleges or played women's sports.",source:"Corporate White Paper. This is marketing material, not a peer-reviewed scientific study. It has not been vetted by independent experts."},{id:"STUDY-8",title:"Marginal efficiency gains in perovskite solar cells through new layering technique",access:"Accessible via institutional subscription (paywalled). The journal does not offer open access by default; an author-accepted manuscript may be available through a preprint server.",overview:"The study directly addresses a known engineering bottleneck in electron transport layers. It references the specific physics of perovskite crystal degradation responsibly.",methods:"Rigorous laboratory testing under standard solar simulation conditions. The experiment was replicated by a second, independent lab before publication. Data availability: Spectral data and test results are fully published; however, the precise fabrication parameters for the proprietary layer composition have been withheld pending patent approval, limiting full independent replication.",conclusion:"Accurate and boring. Reports a 1.5% efficiency increase. Critically, it notes that the new material degrades faster in humidity, admitting it is not yet ready for commercial use.",source:"Top-Tier Generalist Journal. Published in a journal equivalent to Nature or Science, known for publishing significant breakthroughs with rigorous review."},{id:"STUDY-9",title:"Cognitive desensitisation to real-world pain imagery following violent video game exposure",access:"Behind a paywall.",overview:"Relies on theories of cognitive desensitisation but attempts to map complex behavioural psychology onto simple blood-flow changes in the brain without sufficient justification.",methods:"A laboratory study of 60 university students. Half played a violent game for 20 minutes, half played a puzzle game, then viewed images of injuries whilst in an fMRI scanner. The analysis of specific brain regions was NOT preregistered. Data availability: Data not shared.",conclusion:"The authors claim a definitive link to real-world violence based only on short-term brain activity changes. They did not measure actual aggressive behaviour or long-term effects.",source:"Mid-Tier Journal. A legitimate journal, but one that has been criticised in the past for accepting small-sample neuroscience studies with overreaching titles."},{id:"STUDY-10",title:"Prevalence of microplastic contamination in human blood samples",access:"Open Access.",overview:"Investigates the bioaccumulation of polymers in the human body. This is a novel field, so the theoretical framework is exploratory rather than established.",methods:"The team developed a novel, highly sensitive chemical analysis method (mass spectrometry) to detect tiny plastic particles. Stringent contamination controls were used to ensure plastics from the lab equipment didn't affect results. Data availability: Full methodology and anonymised data concentrations are freely available.",conclusion:"Nuanced and alarming. It confirms the presence of plastics in blood but explicitly states that the health implications of these specific concentrations are currently unknown and require urgent further study.",source:"High-Impact Generalist Journal. Published in a world-leading journal with extremely high rejection rates and rigorous statistical review."},{id:"STUDY-11",title:"An evolutionary explanation for the correlation between height and CEO status in males",access:"Freely available for download (preprint server). Because the paper has not been accepted by a journal, there is no paywall  anyone can read it immediately.",overview:"Uses evolutionary psychology to suggest height signals dominance. It fails to account for the halo effect (social bias) and treats modern corporate structures as if they are prehistoric hunter-gatherer societies.",methods:"The authors looked at the height of CEOs in Fortune 500 companies and compared them to the national average. No measure of actual company performance, profit or leadership skill was included. Data availability: A spreadsheet of CEO heights is available on request.",conclusion:"Overblown. It confuses a societal bias (we promote tall men) with an inherent evolutionary ability (tall men are better leaders).",source:"Preprint Server. The paper has been uploaded to a server but has not yet been peer-reviewed or accepted by a journal."},{id:"STUDY-12",title:"Comparative Efficacy of Lavender Essential Oil vs. Hypnotic Drugs in the Treatment of Insomnia",access:"Behind paywall.",overview:"Based on aromatherapy principles suggesting lavender affects GABA neurotransmitters. However, the mechanism is poorly understood and the study ignores the pharmacological complexity of benzodiazepines.",methods:"A pilot randomised trial of 60 people with mild insomnia. Participants were assigned to lavender oil inhalation, placebo scent, or no treatment. Sleep was measured via self-reported diaries only (no objective actigraphy). The study was not blindedparticipants knew if they received lavender. Data availability: Summary statistics only.",conclusion:"Overblown. The study found a small subjective improvement in sleep onset (15 minutes) but the title claims it 'cures insomnia faster than pills' based on no direct comparison to medication.",source:"Low-Tier Complementary Medicine Journal. A peer-reviewed journal, but one that publishes small, underpowered aromatherapy studies with weak methodology."},{id:"STUDY-13",title:"Dietary Adaptation of Urban Foxes to Include High Levels of Anthropogenic Food Waste",access:"Behind a paywall.",overview:"Relies on standard ecological theory regarding dietary plasticity in opportunistic omnivores (animals that eat anything). It fits well with existing urban ecology literature.",methods:"Rigorous analysis of stomach contents of 300 deceased foxes collected over five years across three cities. Results were compared against rural fox diets. Data availability: Summary tables in the appendix; full dietary datasets nominally available on request, though the corresponding author's response to data-sharing enquiries has reportedly been slow  an effective barrier to independent reanalysis.",conclusion:"Solid. It concludes that urban foxes are highly dependent on anthropogenic (human) food sources, which may have implications for their health and population density.",source:"Respected Field-Specific Journal. A specialised journal for Zoology and Ecology, known for solid, data-driven science."},{id:"STUDY-14",title:"The viability of edible crop cultivation in simulated Martian regolith",access:"Open Access.",overview:"Addresses a crucial gap in knowledge regarding In-Situ Resource Utilisation for future space missions. It applies standard botanical knowledge to a novel soil environment.",methods:"A greenhouse experiment using NASA-developed Mars soil simulant (Regolith). Tested various crop types with different fertiliser additives. Control groups used standard Earth soil. Data availability: All plant growth metrics, soil composition analysis and watering schedules are freely downloadable.",conclusion:"Optimistic but careful. Crops grew, but the authors note they accumulated heavy metals present in the Mars simulant, making them unsafe to eat without further processing. The title misses this vital caveat.",source:"Respected Field-Specific Journal. Published in a leading journal for Space and Planetary Science."},{id:"STUDY-15",title:"The Effect of Passive Listening to Classical Music on Abstract Reasoning Performance",access:"Behind a paywall.",overview:"A rehash of the Mozart Effect, a theory largely debunked by modern psychology. It suggests passive listening boosts general intelligence, rather than just temporary arousal or mood.",methods:"30 students took a short logic test after 10 minutes of Mozart, and another test after 10 minutes of silence, in counterbalanced order (half took Mozart first) to control for learning effects. It did not measure IQ (which is a stable trait), but rather performance on one specific puzzle. The hypothesis was not preregistered. Data availability: Individual test scores are deposited in the journal's supplementary data repository.",conclusion:"Overblown. It found a tiny, temporary improvement in one task and generalised it to raising IQ, implying a permanent cognitive upgrade.",source:"Low-Tier Journal. A peer-reviewed journal, but one with a low impact factor that often publishes novelty psychology studies."},{id:"STUDY-16",title:"The Impact of Freezing Temperatures on Electric Vehicle Battery Range",access:"Open Access.",overview:"Based on known electrochemical properties of lithium-ion batteries. Electrolyte fluid becomes more viscous and internal resistance increases in cold climates; the theory is solid physics.",methods:"Tested five popular EV models in climate-controlled chambers running standard driving cycles at +20C and -10C to ensure fair comparison. Data availability: Full test protocols and detailed discharge curves for all vehicles are available on the institute's website.",conclusion:"Accurate. The study provides real-world data confirming a known limitation of current battery technology. It does not attack EVs but informs consumers in cold climates.",source:"National Research Institute Report. Published by a government-funded transport research body. Highly credible and independent of car manufacturers."},{id:"STUDY-17",title:"A Self-Reported Analysis of Productivity in Remote vs. Office-Based Work Environments",access:"A PDF report downloadable from a website.",overview:"N/A. This is a purely explorative survey with no grounding in management theory or organisational psychology.",methods:"An online survey of 2,000 workers. Productivity was measured solely by asking participants: Do you feel more productive at home? Data availability: Proprietary data, not shared.",conclusion:"Flawed. It uses a subjective feeling (I feel productive) as an objective measure of output.",source:"Corporate Marketing Report. The study was conducted and published by a management consultancy firm that sells remote-work software. A clear conflict of interest."},{id:"STUDY-18",title:"The Role of Gut Microbiota Imbalance as a Primary Causal Factor in Depression",access:"Accessible with difficulty (specialist microbiology journal).",overview:"Investigates the gut-brain axis, a legitimate and exciting new field. However, the theory reduces a complex biopsychosocial disorder (depression) to a single biological cause.",methods:"Transferred fecal microbiota from depressed humans into sterile mice. The specific behavioural scoring criteria were preregistered. The mice showed behavioural changes associated with rodent stress. Data availability: Data available upon request.",conclusion:"Overblown title. The study shows an interesting mechanism in mice, but the title makes a massive leap to claiming it is the sole cause of depression in humans, ignoring trauma and social factors.",source:"Respected Field-Specific Journal. A solid microbiology journal. The study itself is sound; the overreaching title is the problem."},{id:"STUDY-19",title:"A 2,000-year reconstruction of Northern Hemisphere summer temperatures",access:"Behind a paywall (institutional subscription required). Like most journals in this publishing family, the final version requires a subscription. An author-accepted manuscript is available through some university repositories.",overview:"Dendroclimatology (using tree rings as proxies for past climate). The study uses established protocols for calibrating tree ring width against known temperature records.",methods:"Combined thousands of tree-ring datasets from across Europe and Asia. Used rigorous statistical modelling to account for uncertainties and outliers. Data availability: The entire dataset of proxy records and the reconstruction code are hosted on the NOAA Paleoclimatology database.",conclusion:"Robust. It shows current warming is unprecedented in the context of the last two millennia. The conclusion is highly specific about geographical limitations and statistical margins of error.",source:"Top-Tier Generalist Journal. Published in a prestigious journal (e.g., Nature) known for strictly reviewing climate models."},{id:"STUDY-20",title:"The stabilising effect of Bitcoin adoption on the economy of a developing nation",access:"A PDF uploaded to a crypto-enthusiast server.",overview:"Relies on unorthodox economic theories promoted by cryptocurrency advocates, often ignoring standard monetary policy principles regarding inflation and liquidity.",methods:"Looks at economic indicators in the country over a very short period (3 months) after adoption. It ignores massive external factors, such as global oil prices, which affected that economy simultaneously. Data availability: Links to some public charts provided, but no raw economic dataset included.",conclusion:"Flawed correlation. It attributes short-term stabilisation entirely to Bitcoin without evidence, ignoring confounding variables.",source:"Preprint / Blog Post. This is a non-peer-reviewed paper hosted on a community server. It has not been vetted by economists."},{id:"STUDY-21",title:"A Comparative Life-Cycle Assessment of Vertical Farming and Traditional Agriculture",access:"Open Access.",overview:"Uses Life-Cycle Assessment (LCA), a standardised framework for assessing environmental impacts associated with all stages of a product's life.",methods:"Compared data from three operational vertical farms against average data for conventional field farming of lettuce. Accounted for energy use for lighting/heating vs diesel for tractors/transport. Data availability: Full LCA assumptions and input data tables provided in the appendix.",conclusion:"Nuanced. It reveals a trade-off: vertical farming saves land and water, but currently requires massive amounts of electricity, making it higher carbon depending on the local energy grid.",source:"Respected Field-Specific Journal. Published in a reputable journal focusing on Sustainability and Agricultural Science."},{id:"STUDY-22",title:"Objective Tracking of Late-Night Smartphone Use and its Association with Lower Sleep Quality in Adolescents",access:"Behind a paywall.",overview:"Builds on previous survey data but aims to correct the recall bias (memory errors) of those studies by using digital tracking.",methods:"500 teenagers installed an app that tracked exact phone usage times and wore an actigraphy wristband to measure actual sleep patterns for two weeks. The statistical analysis plan was preregistered on OSF to prevent <i>p</i>-hacking. Data availability: Anonymised, aggregated data is available on the Open Science Framework (OSF), but individual raw traces are hidden for privacy.",conclusion:"Strong. The use of objective measurement tools removes memory bias. The conclusion accurately reports a significant negative correlation between screen usage after 10 PM and sleep duration.",source:"High-Impact Generalist Journal. A top-tier journal known for rigorous medical and health sciences research."},{id:"STUDY-23",title:"The efficacy of a novel peptide cream in reversing signs of dermal aging",access:"Behind paywall.",overview:"Investigates topical peptides for collagen synthesis. The biological mechanism (peptide penetration through the stratum corneum) is questionable, and the study does not address bioavailability concerns raised in dermatology literature.",methods:"Company-sponsored trial of 120 women aged 40-60. Participants applied the cream twice daily for 12 weeks. Outcomes measured via participant self-assessment questionnaires ('How old does your skin look?') and non-blinded researcher ratings of photographs. No placebo cream control. Data availability: Published summary only; raw data proprietary.",conclusion:"Overblown. While participants reported feeling their skin looked younger, objective measures like wrinkle depth were not assessed. The title's '20 years younger' claim is based on subjective perception in an unblinded study.",source:"Low-Tier Dermatology Journal. Peer-reviewed but known for accepting industry-sponsored cosmetic studies with weak controls."},{id:"STUDY-24",title:"The efficacy of mindfulness meditation as an intervention for chronic pain: A systematic review",access:"Open Access via Cochrane Library.",overview:"Meta-analysis of 38 randomised controlled trials investigating mindfulness-based interventions for chronic pain conditions. Uses established frameworks from pain neuroscience and psychological interventions.",methods:"Systematic review following Cochrane protocols. Included 3,500+ participants across multiple pain conditions. Pre-registered methodology. Independent reviewers assessed bias. Full PRISMA checklist provided. Data availability: All extracted data and analysis code publicly available.",conclusion:"Cautious and specific. Reports moderate effect size for pain reduction (<i>d</i>=0.33) but notes high heterogeneity between studies. Acknowledges mindfulness works better for some pain types than others and cannot replace medical treatment.",source:"Cochrane Database of Systematic Reviews. Gold-standard source for evidence synthesis. Rigorous peer review and editorial oversight."},{id:"STUDY-25",title:"The application of structured water therapy in chronic disease management",access:"Open access in complementary medicine journal.",overview:"Tests the hypothesis that magnetically-treated water alters H2O molecular clusters, potentially affecting cellular hydration. The proposed mechanism conflicts with established chemistry, but the study attempts to investigate outcomes empirically.",methods:"A non-randomised trial of 80 adults with various chronic conditions (diabetes, arthritis, depression). Half received 'structured water' treatment (water exposed to magnetic fields), half received regular water, but assignment was not blinded. Outcomes measured via self-reported symptom questionnaires over 8 weeks. No objective biomarkers (blood glucose, inflammation markers) were measured. Data availability: Full dataset provided in supplementary materials.",conclusion:"Overblown. The study found subjective improvements in self-reported symptoms but cannot distinguish placebo effects from treatment. The title's claim about 'curing' diseases is not supported by the actual findings.",source:"Low-Tier Complementary Medicine Journal. Peer-reviewed but specialises in alternative therapies and has lower methodological standards than mainstream medical journals."},{id:"STUDY-26",title:"A phase III trial of a novel Alzheimer's drug and its effect on cognitive decline",access:"Behind paywall (45 per article).",overview:"Investigates monoclonal antibody targeting amyloid-beta plaques. Grounded in established Alzheimer's pathology but outcome measure (CDR-SB scale) is somewhat controversial in the field.",methods:"Randomised, double-blind, placebo-controlled trial. <i>N</i>=1,800 participants across 200 sites. 18-month follow-up. However, dropout rate was high (32%), and post-hoc subgroup analyses not pre-registered. Data availability: Summary statistics only; full data available to qualified researchers upon request.",conclusion:"The title overstates findings. The 27% figure refers to relative slowing on one cognitive scale, not functional improvement. Paper acknowledges the drug doesn't restore lost function and has significant side effects (brain swelling in 13% of participants).",source:"High-Impact Medical Journal. Well-respected but the study was funded entirely by the pharmaceutical company developing the drug."},{id:"STUDY-27",title:"The predictive relationship between income inequality and population health outcomes: A longitudinal study",access:"Open Access.",overview:"Uses 40 years of data across 50 countries to examine Gini coefficient and health metrics. Builds on established social epidemiology theories and addresses confounders like absolute poverty and healthcare spending.",methods:"Sophisticated multi-level modelling using WHO and World Bank datasets. Pre-registered analysis plan. Extensive sensitivity analyses. Controls for GDP, healthcare access, education. Data availability: All code and datasets publicly archived. Note: approximately 15% of country-year observations had missing health data requiring multiple imputation; sensitivity analyses confirm findings are robust, but the imputation assumptions are consequential.",conclusion:"Robust but carefully worded. Shows strong association between inequality and life expectancy, infant mortality, and mental health even after controlling for absolute wealth. Acknowledges causation cannot be proven from observational data.",source:"Top-Tier Public Health Journal. Known for rigorous statistical review and replication-friendly practices."},{id:"STUDY-28",title:"The effect of a proprietary energy drink formula on athletic performance",access:"Company-funded study summary on corporate website.",overview:"Tests proprietary caffeine-taurine blend. Ignores decades of sports science showing caffeine effects plateau and vary hugely by individual tolerance.",methods:"Compared 20 athletes drinking the energy drink vs water. No blinding (athletes knew which drink they got). Performance measured on company-owned equipment. No independent verification. Data availability: Proprietary.",conclusion:"Cherry-picked results. The 35% figure comes from one specific sprint test; overall performance improvement was minimal and within normal day-to-day variation.",source:"Corporate White Paper. Research conducted by company's own lab. Lead author is the company's Chief Marketing Officer."},{id:"STUDY-29",title:"An analysis of leaked documents purporting to show underreported vaccine injury rates",access:"Free PDF on conspiracy theory website.",overview:"Misinterprets VAERS data (a passive reporting system for any health event after vaccination, not proven causation). Ignores statistical principles and how VAERS actually works.",methods:"No original research. Selectively quotes decontextualised sentences from regulatory documents. Conflates correlation with causation. No statistical analysis of baseline rates.",conclusion:"Dangerously misleading. Presents normal background illness rates as vaccine injuries. Does not mention that VAERS reports are unverified and anyone can submit them.",source:"Conspiracy Website. Anonymous author. Website also promotes COVID denialism and sells unregulated supplements."},{id:"STUDY-30",title:"Association between Mediterranean diet adherence and dementia risk: A 25-year follow-up study",access:"Behind paywall.",overview:"Prospective cohort study using validated food frequency questionnaires. Builds on established nutrition epidemiology and neurodegeneration research.",methods:"Followed 8,000 participants for 25 years. Used standardised dementia assessments. Controlled for education, exercise, smoking, genetics (APOE4). However, diet was self-reported (not objectively measured) and adherence could change over time. Data availability: Aggregate data in appendix; individual data on request.",conclusion:"Well-balanced. Reports 23% lower dementia incidence in high Mediterranean diet adherence group but acknowledges this is observational and cannot prove the diet caused the reduction (healthier people might choose healthier diets).",source:"Respected Medical Journal. Good reputation but not top-tier. Appropriately rigorous peer review."},{id:"STUDY-31",title:"The impact of daily reading to infants on language skill acquisition at age 3: A randomised trial",access:"Behind a paywall (institutional subscription). Despite being a strong study, the journal does not offer free access by default.",overview:"Tests early literacy intervention grounded in developmental psychology and neurolinguistics. Addresses known socioeconomic disparities in language exposure.",methods:"Cluster-randomised trial (randomisation at community health centre level). <i>N</i>=600 families. Intervention group received books and training. Control group received standard care. Assessments blinded. Pre-registered outcomes. Data availability: De-identified data and analysis scripts on OSF.",conclusion:"Measured and specific. Reports significant improvements in vocabulary and grammar but notes effects were strongest in lower-income families and attenuated by age 5. Does not claim reading alone solves educational inequality.",source:"Top-Tier Developmental Psychology Journal. Known for emphasis on replication and open science."},{id:"STUDY-32",title:"A review of claims linking 5G mobile networks to cancer, autism, and infertility",access:"Shared on social media, links to pseudoscience portal.",overview:"Conflates 5G radio waves with ionising radiation (completely different types of electromagnetic radiation). Ignores physics and biology of how radiation interacts with tissue.",methods:"No study. Article cites unnamed 'scientists' and misrepresents quotes from unrelated research on high-dose ionising radiation (like X-rays).",conclusion:"Pure misinformation. Radio frequency radiation from 5G is non-ionising (cannot break DNA bonds). Claims are biologically impossible at real-world exposure levels.",source:"Social Media Post / Pseudoscience Website. No peer review. Site also promotes flat Earth theory."},{id:"STUDY-33",title:"A machine learning algorithm for early detection of pancreatic cancer from routine blood tests",access:"Open Access.",overview:"Uses metabolomics and machine learning on electronic health records. Pancreatic cancer is notoriously hard to detect early, so this addresses a critical clinical gap.",methods:"Analysed blood samples from 500 eventual pancreatic cancer patients and 1,500 matched controls. External validation cohort of 400 patients. Algorithm development properly separated from testing set. Cross-validated. Data availability: Model code is open-sourced; patient data is technically available to approved researchers, but access requires a formal ethics committee review  a process that typically takes 612 months and is accessible mainly to well-resourced academic institutions.",conclusion:"Promising but appropriately cautious. Notes the 92% accuracy needs prospective validation before clinical use. Acknowledges false positives would cause anxiety and unnecessary procedures. Calls for multi-site replication.",source:"High-Impact Medical AI Journal. Requires detailed reporting of AI methods and external validation."},{id:"STUDY-34",title:"The role of an alkaline diet in cancer prevention through blood pH regulation",access:"Free e-book on wellness influencer's website.",overview:"Fundamentally misunderstands human physiology. Blood pH is tightly regulated (7.35-7.45) regardless of diet; if it changed significantly, you would die.",methods:"No research. Cites debunked theories and misunderstands how metabolism works. No mention of actual cancer biology.",conclusion:"Nonsense. The body maintains pH through breathing and kidney function, not food. Cancer is caused by genetic mutations, not 'acidic blood.'",source:"Wellness Influencer Blog. Author has no medical or scientific credentials. Sells alkaline water machines and supplements."},{id:"STUDY-35",title:"Association between urban green space access and rates of anxiety and depression",access:"Behind paywall.",overview:"Uses satellite imagery to quantify green space and links to mental health survey data. Grounded in environmental psychology and stress-reduction theories.",methods:"Cross-sectional study of 15,000 adults across 50 cities. Clever use of objective green space metrics (NDVI from satellites). However, correlation study - can't prove causation (maybe wealthier, less stressed people move near parks). Data availability: Summary stats only.",conclusion:"Plausible but limited. Shows association but authors acknowledge reverse causation possibility and confounders like income. Calls for experimental interventions.",source:"Mid-Tier Environmental Health Journal. Legitimate peer review but not the most rigorous in the field."},{id:"STUDY-36",title:"The effect of a probiotic yogurt on immune function markers",access:"Press release; full study not published.",overview:"Tests proprietary bacterial strains. Uses 'immune function' vaguely (the immune system has hundreds of components - which one improved?).",methods:"Company internal study. Measured one non-specific immune marker (IgA in saliva) in 30 people for 2 weeks. No control group, no published protocol. Data availability: None.",conclusion:"Marketing claims. The 80% refers to a temporary spike in one immune marker, not actual infection resistance or health outcomes.",source:"Food Company Press Release. Not peer-reviewed. Study conducted by company employees."},{id:"STUDY-37",title:"Psilocybin-assisted therapy for treatment-resistant depression: A double-blind RCT",access:"Open Access.",overview:"Investigates psychedelic therapy for depression. Builds on neuroscience of serotonin receptors and psychological theories of set/setting in psychedelic therapy.",methods:"Randomised, double-blind, placebo-controlled trial. <i>N</i>=100 patients who failed at least 2 antidepressants. Rigorous screening, therapy protocol standardised, independent assessors. 6-month follow-up. Pre-registered. Data availability: Full anonymised data has been deposited in a controlled-access repository; access requires a formal application reviewed by an independent ethics committee, which in practice takes several months and is not straightforward for independent researchers.",conclusion:"Careful interpretation. Shows significant symptom reduction but notes therapy protocol was intensive (not just the drug alone), some patients relapsed, and long-term safety still unknown. Calls for larger trials.",source:"Top-Tier Psychiatry Journal. Known for conservative editorial standards and emphasis on clinical significance."},{id:"STUDY-38",title:"A review of the health risks of genetically modified crops by an industry panel",access:"Free report on biotech industry association website.",overview:"Reviews existing literature on GMO safety. However, panel members are all employed by biotech companies - clear conflict of interest.",methods:"Narrative review (not systematic). Cherry-picks studies showing safety; ignores research raising concerns about pesticide use and biodiversity. No independent critical appraisal.",conclusion:"Biased summary. While many GMOs are likely safe to eat, the panel ignores environmental concerns and dismisses any contrary evidence as 'anti-science.'",source:"Industry Association Report. All authors work for GMO-producing companies. Not independent or peer-reviewed."},{id:"STUDY-39",title:"Accelerating sea level rise through 2100: An analysis of global climate models",access:"Open Access.",overview:"Uses ensemble of climate models (CMIP6) with updated ice sheet dynamics. Builds on established physics of thermal expansion and glaciology.",methods:"Multi-model comparison with rigorous uncertainty quantification. Incorporates satellite data, tide gauges, and paleoclimate proxies for validation. Pre-registered methodology. Data availability: All model outputs and code archived in public repositories.",conclusion:"Sobering but precise. Projects 0.6-1.1m rise by 2100 under current emissions trajectory, with clear uncertainty ranges and regional variations. Acknowledges ice sheet behaviour is the largest source of uncertainty.",source:"Top-Tier Earth Science Journal. Highest standards for climate model reporting and reproducibility."},{id:"STUDY-40",title:"A laboratory analysis of alleged mind-control chemicals in aircraft contrails ('chemtrails')",access:"Anonymous blog post with blurry photos.",overview:"Conspiracy theory. Contrails (condensation trails from aircraft) are water vapour, not chemicals. Basic atmospheric science debunks this.",methods:"No credible methodology. Shows photos of normal contrails. Claims to have 'lab analysis' but provides no chain of custody, no lab credentials, no peer review.",conclusion:"Fabricated. No evidence provided. Contradicts fundamental chemistry and meteorology.",source:"Anonymous Blog. No credentials, no review, no accountability. Site also promotes New World Order conspiracy theories."},{id:"STUDY-41",title:"Efficacy of pre-exposure prophylaxis (PrEP) in reducing HIV transmission risk in a real-world cohort",access:"Open Access.",overview:"Follows high-risk individuals taking daily PrEP medication. Grounded in virology and pharmacokinetics of antiretroviral drugs.",methods:"Prospective cohort of 5,000 participants. Adherence monitored via pharmacy refills and drug level testing. Compared to matched historical controls. Independent outcome ascertainment. Data availability: De-identified data on request.",conclusion:"Strong evidence but emphasises adherence. Near-perfect protection when taken consistently, but effectiveness drops sharply with missed doses. Notes PrEP doesn't protect against other STIs. Notably, the effectiveness estimates rest on comparison to historical controls rather than a concurrent randomised group  a meaningful methodological limitation the authors acknowledge only briefly in the supplementary material.",source:"Top-Tier Infectious Disease Journal. Rigorous review and high clinical relevance standards."},{id:"STUDY-42",title:"The effect of testosterone therapy on youth and vitality in men over 40",access:"Published in supplement industry magazine.",overview:"Promotes off-label testosterone use for 'anti-aging.' Downplays cardiovascular risks and ignores endocrinology showing normal age-related decline isn't a disease.",methods:"Retrospective review of clinic patients (no control group). Patients self-selected for treatment and reported 'feeling better' (subjective). No long-term safety monitoring. Data availability: None.",conclusion:"Irresponsible. Conflates correlation with causation and ignores serious side effects (heart attack, stroke, prostate issues). Written by clinic owner who profits from selling testosterone.",source:"Men's Health Magazine / Clinic Advertising. Not peer-reviewed. Author owns testosterone clinic mentioned in article."},{id:"STUDY-43",title:"Correction of the sickle cell mutation in a human patient trial using CRISPR gene editing",access:"Behind paywall.",overview:"Uses CRISPR-Cas9 to edit patient's own hematopoietic stem cells, correcting the genetic mutation causing sickle cell disease. Grounded in molecular biology and gene therapy.",methods:"Single-arm trial (no control group - unethical to withhold treatment from sick patients). <i>N</i>=15 patients with severe sickle cell disease. 2-year follow-up. Rigorous safety monitoring. Data availability: Patient-level data restricted; summary data in paper.",conclusion:"The title overclaims for a 15-patient single-arm trial. 'Correction of the mutation' implies completeness that two years of follow-up cannot yet establish. The paper itself is more careful: all patients showed meaningful improvement, but long-term durability is unknown, the procedure is extremely expensive, and off-target editing was detected in 2 patients (ongoing monitoring required).",source:"Top-Tier Medical Journal. Requires independent data monitoring boards for clinical trials."},{id:"STUDY-44",title:"The efficacy of an organic diet in preventing all diseases: A 10-year study",access:"Published on organic food industry website.",overview:"Massively overstates findings. 'All diseases' claim ignores genetics, smoking, exercise, and countless other factors.",methods:"Observational study comparing organic food shoppers to general population. No control for income, education, or overall healthy lifestyle (people who buy organic often exercise more, smoke less, etc.). Data availability: Not provided.",conclusion:"Misleading. Any observed health differences likely due to confounding factors (wealthier, health-conscious people) not the organic label itself.",source:"Organic Trade Association Report. Study funded by organic industry. Authors work for organic certification bodies."},{id:"STUDY-45",title:"The effect of hourly breaks from sitting on metabolic risk markers in office workers",access:"Open Access.",overview:"Tests interrupting prolonged sitting with short activity breaks. Based on metabolic physiology and epidemiology of sedentary behaviour.",methods:"Randomised crossover trial. <i>N</i>=40 participants. Measured blood glucose, insulin, and lipids after 8-hour sitting vs sitting interrupted by 3-minute walks every hour. Lab-controlled conditions. Pre-registered. Data availability: Full data on OSF.",conclusion:"Measured findings. Shows improvements in glucose metabolism but notes this was short-term, in controlled conditions. Doesn't claim breaks alone prevent diabetes or heart disease.",source:"Respected Exercise Physiology Journal. Good methodological standards."},{id:"STUDY-46",title:"The efficacy of a 'detox' tea for toxin removal and adipose tissue reduction",access:"Influencer Instagram post with affiliate link.",overview:"Scientifically nonsensical. The liver and kidneys detoxify the body; no tea can 'flush toxins.' 'Belly fat' cannot be spot-reduced.",methods:"No study. Influencer's personal testimonial plus paid actors in before/after photos. No measurements, no controls, no biology.",conclusion:"Fraudulent marketing. The tea is a laxative causing temporary water weight loss (and dehydration), not fat loss.",source:"Social Media Influencer. Paid promotion. No scientific credentials. FTC violations for undisclosed advertising."},{id:"STUDY-47",title:"The impact of participatory budgeting on civic engagement in marginalised communities",access:"Open Access.",overview:"Studies democratic innovation where residents directly decide local spending. Grounded in political science theories of deliberative democracy and empowerment.",methods:"Mixed methods: quantitative analysis of voting records across 30 cities plus qualitative interviews with participants. Pre-registered analysis. Control cities matched on demographics. Data availability: Quantitative data public; interview transcripts available on request (privacy).",conclusion:"Nuanced. Shows increased participation in marginalised groups but notes effects vary by implementation quality and existing political culture. Doesn't claim participatory budgeting solves all governance problems.",source:"Top-Tier Political Science Journal. Known for rigorous mixed-methods standards."},{id:"STUDY-48",title:"The efficacy of magnets in curing arthritis pain by realigning 'body energy fields'",access:"Free PDF on magnet therapy sales website.",overview:"Pseudoscience. The human body has no 'energy fields' that magnets could affect. Static magnets used in therapy are far too weak to penetrate tissue.",methods:"No controlled study. Testimonials from customers who bought magnetic bracelets. No comparison to placebo (which is powerful for subjective pain). Data availability: None.",conclusion:"Placebo effect being sold as medicine. Systematic reviews of actual controlled trials show magnetic therapy performs no better than fake magnets.",source:"Magnet Therapy Company Website. Selling magnets for 150 each. Site also claims magnets cure diabetes and cancer."}];let ht=null,mt=0,F=[],Pt=[],At=[],V=null,j={},qe={},he={},lt=0,G="",je=!1,Mi=new Set,We={},bs=!1,ct={title:0,access:0,source:0,theory:0,methods:0,conclusion:0};const Ti=[{key:"title",label:" Title"},{key:"access",label:" Access"},{key:"source",label:" Source"},{key:"theory",label:" Theory"},{key:"methods",label:" Methods & Data"},{key:"conclusion",label:" Conclusion"}],Di=10*60*1e3,ho=5*60*1e3,Eh=50*60*1e3,Lh=5e3,ha=["click","keydown","touchstart","scroll","mousemove"];let re=null,Re=null,Ee=null,ys=null,vs=!1,Pi=[];const Ai={"STUDY-1":1,"STUDY-4":1,"STUDY-29":1,"STUDY-32":1,"STUDY-34":1,"STUDY-40":1,"STUDY-46":1,"STUDY-48":1,"STUDY-7":2,"STUDY-11":2,"STUDY-17":2,"STUDY-20":2,"STUDY-28":2,"STUDY-36":2,"STUDY-38":2,"STUDY-42":2,"STUDY-44":2,"STUDY-9":3,"STUDY-12":3,"STUDY-15":3,"STUDY-23":3,"STUDY-25":3,"STUDY-6":4,"STUDY-18":4,"STUDY-26":4,"STUDY-30":4,"STUDY-35":4,"STUDY-3":5,"STUDY-5":5,"STUDY-13":5,"STUDY-14":5,"STUDY-16":5,"STUDY-21":5,"STUDY-27":5,"STUDY-45":5,"STUDY-2":6,"STUDY-8":6,"STUDY-10":6,"STUDY-22":6,"STUDY-31":6,"STUDY-33":6,"STUDY-37":6,"STUDY-41":6,"STUDY-43":6,"STUDY-19":7,"STUDY-24":7,"STUDY-39":7,"STUDY-47":7},ue=100;function zs(i){return!i||typeof i!="object"?[]:Object.values(i).map(t=>typeof t=="number"?t:t&&typeof t=="object"?t.rating:null).filter(t=>Number.isFinite(t)&&t>=1&&t<=7)}function xs(i){return i>=90?"":i>=75?"":i>=60?"":""}function ua(i){const t=document.getElementById(i);if(!t)return;let e=!1,s=null;t.addEventListener("mouseenter",()=>{e||(s=setTimeout(()=>{n(t)},900))}),t.addEventListener("mouseleave",()=>{s&&(clearTimeout(s),s=null)}),t.addEventListener("click",o=>{e||(o.preventDefault(),s&&(clearTimeout(s),s=null),n(t))}),t.addEventListener("touchstart",o=>{e||(o.preventDefault(),n(t))},{passive:!1}),t.addEventListener("celebrate",()=>{n(t,"celebration")}),(i==="logo-icon"||i==="navbar-logo")&&setInterval(()=>{e||(t.classList.add("shake-intense"),setTimeout(()=>{t.classList.remove("shake-intense")},2e3))},8e3);function n(o,a="mixed"){if(e&&a!=="celebration")return;e=!0;const r=["droplet","droplet-star","droplet-heart","droplet-sparkle","droplet-bubble"],l=a==="celebration";o.classList.add("flipping");const c=o.src,d=c.replace("unlock-lab-icon.svg","unlock-lab-icon-inverted.svg");setTimeout(()=>{o.src=d},600),l||setTimeout(()=>{const m=o.getBoundingClientRect(),b=m.left+m.width,y=m.top,w=a==="celebration"?20:12,x=0;for(let v=0;v<w;v++){const _=document.createElement("div");if(l)_.className="droplet droplet-celebration-refill droplet-refill";else if(a==="mixed"){const A=r[Math.floor(Math.random()*r.length)];_.className=`droplet ${A} droplet-refill`}else _.className=`droplet ${a} droplet-refill`;const k=b+(Math.random()-.5)*window.innerWidth*.4,S=(Math.random()-.5)*20,T=y-x+S;_.style.left=`${k}px`,_.style.top=`${x}px`,_.style.width=`${2+Math.random()*.5}vw`,_.style.height=`${(2+Math.random()*.5)*1.2}vw`,_.style.setProperty("--travel-distance",`${T}px`),_.style.animationDelay=`${v*45}ms`,h.appendChild(_)}},2500),setTimeout(()=>{o.src=c},3800);const h=document.createElement("div");h.className="droplet-container",document.body.appendChild(h);const u=o.getBoundingClientRect(),f=a==="celebration"?15:8,p=l?window.innerWidth/2:u.left+u.width,g=l?0:u.top;for(let m=0;m<f;m++){const b=document.createElement("div");if(l)b.className="droplet droplet-celebration";else if(a==="mixed"){const _=r[Math.floor(Math.random()*r.length)];b.className=`droplet ${_}`}else b.className=`droplet ${a}`;const y=l?(Math.random()-.5)*window.innerWidth*1.5:(Math.random()-.5)*20,w=(Math.random()-.5)*(l?40:20),x=l?1.5+Math.random():1+Math.random()*.5,v=m*(l?40:50);b.style.left=`${p+y}px`,b.style.top=`${g+w}px`,b.style.width=`${x}vw`,b.style.height=`${x*1.2}vw`,b.style.animationDelay=`${v}ms`,h.appendChild(b)}setTimeout(()=>{const m=o.getBoundingClientRect(),b=m.left,y=m.top+m.height;for(let w=0;w<f;w++){const x=document.createElement("div");if(l)x.className="droplet droplet-celebration";else if(a==="mixed"){const S=r[Math.floor(Math.random()*r.length)];x.className=`droplet ${S}`}else x.className=`droplet ${a}`;const v=l?(Math.random()-.5)*window.innerWidth*1.5:(Math.random()-.5)*20,_=(Math.random()-.5)*(l?40:20),k=l?1.5+Math.random():1+Math.random()*.5;x.style.left=`${b+v}px`,x.style.top=`${y+_}px`,x.style.width=`${k}vw`,x.style.height=`${k*1.2}vw`,h.appendChild(x)}},600),setTimeout(()=>{o.classList.remove("flipping"),h.remove(),a!=="celebration"?e=!1:setTimeout(()=>{e=!1},500)},4e3)}}function Ih(){["logo-icon","navbar-logo","guide-logo","final-logo"].forEach(t=>ua(t))}document.addEventListener("DOMContentLoaded",async()=>{Ih();const t=new URLSearchParams(window.location.search).get("session");if(t){document.getElementById("page-welcome").classList.remove("active"),await ou(t);return}const e=zh();if(V||(V=Bh()),await ba(),Uh(),F.forEach((n,o)=>{ua(`paper-logo-${o}`)}),zi(),Ni(),e&&Object.keys(j).length>0&&Nh(),lt>0){const n=document.getElementById("total-score-header");if(n){const o=Object.keys(j).length,a=o>0?Math.round(lt/o):0,r=xs(a);n.innerHTML=`<span class="medal-icon">${r}</span> ${a}%`,document.getElementById("score-banner").style.display="flex"}}const s=e&&mt>0?mt:0;fe(s),oe.currentUser?ht=oe.currentUser.uid:ht=(await fo(oe)).user.uid,G=localStorage.getItem("userName"),G||(G=await Fh(),localStorage.setItem("userName",G)),$h(),Hh(),jh(),Wh()});window.nextPage=Yh;window.previousPage=qh;window.enableSubmit=Jh;window.submitRating=Zh;window.showHelp=Qh;window.closeHelp=$s;window.showTab=tu;window.finishEarly=Xh;function Bh(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function ts(){const i=["Red","Blue","Green","Yellow","Purple","Orange","Pink","Teal","Brave","Wise","Swift","Tall","Happy","Clever","Bright","Quick","Mighty","Gentle","Bold","Cheerful","Curious","Friendly","Kind","Peaceful"],t=["Fox","Raccoon","Owl","Sparrow","Robin","Falcon","Eagle","Hawk","Rabbit","Squirrel","Deer","Bear","Wolf","Otter","Badger","Hedgehog","Dolphin","Seal","Penguin","Panda","Koala","Tiger","Lion","Leopard"],e=i[Math.floor(Math.random()*i.length)],s=t[Math.floor(Math.random()*t.length)],n=Math.floor(Math.random()*100).toString().padStart(2,"0");return`${e} ${s} ${n}`}async function Fh(){const i=Z(J,"leaderboard");try{const t=await Ct(i),e=new Set;if(t.exists()){const o=t.val();Object.values(o).forEach(a=>{a.userName&&e.add(a.userName)})}e.add("Anonymous");let s=0,n;do if(n=ts(),s++,s>=500){const o=ts();let a=1;for(n=`${o}-${a}`;e.has(n);)a++,n=`${o}-${a}`;break}while(e.has(n));return n}catch(t){return console.error("Error checking username uniqueness:",t),ts()}}function Ve(){const i={currentPage:mt,userRatings:j,userPredictions:qe,paperScores:he,totalScore:lt,sessionId:V,hasUsedBackButton:je,celebratedPapers:Array.from(Mi),pageDisplayTimestamps:We,criterionTokens:ct};localStorage.setItem("workshopState",JSON.stringify(i))}function zh(){try{const i=localStorage.getItem("workshopState");if(i){const t=JSON.parse(i);return mt=t.currentPage||0,j=t.userRatings||{},qe=t.userPredictions||{},he=t.paperScores||{},lt=t.totalScore||0,V=t.sessionId||null,je=t.hasUsedBackButton||!1,Mi=new Set(t.celebratedPapers||[]),We=t.pageDisplayTimestamps||{},ct=t.criterionTokens||{title:0,access:0,source:0,theory:0,methods:0,conclusion:0},!0}}catch(i){console.error("Error loading state:",i)}return!1}function Nh(){Object.keys(j).forEach(i=>{const t=F.findIndex(e=>e.id===i);if(t>=0){const e=document.getElementById(`rating-section-${t}`),s=document.getElementById(`results-${t}`);if(e&&(e.style.display="none"),s){s.style.display="block";const n=he[i];if(n!==void 0){const r=document.getElementById(`score-${t}`);r&&(r.textContent=`${n}%`,r.style.fontSize="2rem",r.style.fontWeight="bold")}const o=j[i],a=qe[i];o&&a&&ya(t,i,o,a,!0)}}})}function $h(){const i=document.getElementById("navbar-username");i&&(i.textContent=G);const t=document.getElementById("username-display-save");t&&(t.textContent=G);const e=document.getElementById("username-display-inline");e&&(e.textContent=G)}function Hh(){re=Date.now(),pa(),ha.forEach(i=>{document.addEventListener(i,fa,{passive:!0})}),ys=setTimeout(()=>{ma()},Eh),setInterval(Ci,3e4),Ci()}function fa(){const i=Date.now();re&&i-re<Lh||(re=i,vs=!1,pa())}function ga(){return re?Di-(Date.now()-re):Di}function pa(){Re&&clearTimeout(Re),Ee&&clearTimeout(Ee),Ee=setTimeout(()=>{const i=ga();!vs&&i>0&&i<=ho&&(vs=!0,alert(" 5 minutes until your session disconnects due to inactivity."))},Di-ho),Re=setTimeout(()=>{ma()},Di)}function Ci(){const i=ga(),t=Math.max(0,Math.floor(i/6e4)),e=Object.keys(j).length,s=F.length||48,n=Math.max(0,s-e),o=document.getElementById("session-timer");o&&(i>0?(o.textContent=`${t} min | ${n} paper${n!==1?"s":""} left`,o.style.color=i<=5*6e4?"#f56565":""):(o.textContent="Session ending...",o.style.color="#f56565"))}function ma(){if(Pi.forEach(t=>{typeof t=="function"&&t()}),Pi=[],V){const t=Z(J,`active/${V}`);Bt(t,null)}Re&&clearTimeout(Re),Ee&&clearTimeout(Ee),ys&&clearTimeout(ys),ha.forEach(t=>{document.removeEventListener(t,fa)});const i=document.createElement("div");i.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        color: white;
        text-align: center;
        padding: 20px;
    `,i.innerHTML=`
        <div>
            <h2 style="margin-bottom: 20px; color: white;"> Session Disconnected</h2>
            <p style="margin-bottom: 20px; color: white;">
                Your session ended due to inactivity.<br>
                Thank you for participating!
            </p>
            <button onclick="location.reload()" style="
                background: #667eea;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 16px;
                cursor: pointer;
            ">Start New Session</button>
        </div>
    `,document.body.appendChild(i)}function jh(){const i=Z(J,`active/${V}`);Bt(i,{joinedAt:Date.now(),lastActive:Date.now(),uid:ht}),setInterval(()=>{Bt(i,{joinedAt:Date.now(),lastActive:Date.now(),uid:ht})},3e4),window.addEventListener("beforeunload",()=>{Bt(i,null)})}function Wh(){const i=document.getElementById("participant-counter");i&&(i.style.display="none");const t=Z(J,"active"),e=ws(t,s=>{const n=s.val();if(i)if(n&&Object.keys(n).length>0){const o=Object.keys(n).filter(a=>{const r=n[a].timestamp;return r&&Date.now()-r<6e4}).length;o>0?(i.textContent=`${o} participant${o!==1?"s":""} active`,i.style.display="inline-block"):i.style.display="none"}else i.style.display="none"},s=>{console.error("Error updating participant count:",s),i&&(i.style.display="none")});Pi.push(e)}function Vh(){if(!F||!F.length||!V){console.warn("Cannot shuffle papers: papers or sessionId not initialized");return}let i=0;for(let e=0;e<V.length;e++)i=(i<<5)-i+V.charCodeAt(e),i=i&i;function t(){return i=(i*9301+49297)%233280,i/233280}for(let e=F.length-1;e>0;e--){const s=Math.floor(t()*(e+1));[F[e],F[s]]=[F[s],F[e]]}}async function ba(i=!0){try{Pt=Ch,At=Oh,F=[...Rh],i&&V&&Vh();const t=document.getElementById("total-papers");t&&(t.textContent=Object.keys(j).length||0)}catch(t){console.error("Error loading content:",t),alert(`Error loading workshop content: ${t.message}

Please try:
1. Hard refresh (Ctrl+Shift+R or Cmd+Shift+R)
2. Clear browser cache
3. Contact support if issue persists`)}}function zi(){console.log("renderGlossary called");const i=document.getElementById("glossary-content"),t=document.getElementById("modal-glossary");if(console.log("Glossary content element:",i),console.log("Modal glossary element:",t),console.log("Glossary data:",Pt),!Pt||Pt.length===0){console.error("Glossary data not loaded or empty",Pt);const s='<p style="color: red;">Error: Glossary data failed to load. Please refresh the page.</p>';i&&(i.innerHTML=s),t&&(t.innerHTML=s);return}const e=Pt.map(s=>`
        <div class="glossary-item">
            <div class="glossary-term">${s.term}</div>
            <div class="glossary-definition">${s.definition}</div>
        </div>
    `).join("");console.log("Generated glossary HTML length:",e.length),console.log("Generated glossary HTML (first 200 chars):",e.substring(0,200)),i?(i.innerHTML=e,console.log("Glossary content updated. Element now contains:",i.innerHTML.substring(0,200))):console.error("glossary-content element not found in DOM"),t?(t.innerHTML=e,console.log("Modal glossary updated")):console.warn("modal-glossary element not found in DOM (this is OK if modal not on current page)")}function Ni(){console.log("renderRubric called");const i=document.getElementById("rubric-content"),t=document.getElementById("modal-rubric");if(console.log("Rubric content element:",i),console.log("Modal rubric element:",t),console.log("Rubric data:",At),!At||At.length===0){console.error("Rubric data not loaded or empty",At);const n='<p style="color: red;">Error: Rubric data failed to load. Please refresh the page.</p>';i&&(i.innerHTML=n),t&&(t.innerHTML=n);return}const e=n=>{const o=n.indexOf(":");if(o===-1)return n;const a=n.substring(0,o+1),r=n.substring(o+1);return`<strong>${a}</strong>${r}`},s=`
        <div class="info-box" style="margin-bottom: 1rem; background: #f3e5f5; border-left: 4px solid #9c27b0;">
            <p style="margin: 0;"><strong> Scoring Strategy:</strong> You can freely weigh some criteria more strongly than others when forming your overall rating.</p>
        </div>
        <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
            <table class="rubric-table">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Low (1-2)</th>
                        <th>Medium (3-5)</th>
                        <th>High (6-7)</th>
                    </tr>
                </thead>
                <tbody>
                    ${At.map(n=>`
                        <tr>
                            <td><strong>${n.name}</strong></td>
                            <td>${e(n.low)}</td>
                            <td>${e(n.medium)}</td>
                            <td>${e(n.high)}</td>
                        </tr>
                    `).join("")}
                </tbody>
            </table>
        </div>
    `;console.log("Generated rubric HTML length:",s.length),console.log("Generated rubric HTML (first 200 chars):",s.substring(0,200)),i?(i.innerHTML=s,console.log("Rubric content updated. Element now contains:",i.innerHTML.substring(0,200))):console.error("rubric-content element not found in DOM"),t?(t.innerHTML=s,console.log("Modal rubric updated")):console.warn("modal-rubric element not found in DOM (this is OK if modal not on current page)")}function Uh(){const i=document.getElementById("paper-pages"),t=["title","access","source","overview","methods","conclusion"],e=[" Title"," Access"," Source"," Study Overview"," Methods & Data"," Conclusion"];F.forEach((s,n)=>{const o=t.map((r,l)=>{if(r==="title")return"";const c=e[l],d=(s[r]||"").replace("Data availability:","<strong>Data availability:</strong>");return`
                        <div class="paper-section">
                            <h3>${c}</h3>
                            <p>${d}</p>
                        </div>`}).filter(r=>r!=="").join(""),a=`
            <div class="page" id="page-paper-${n}">
                <div class="container">
                    <button class="back-to-previous-btn" onclick="goBackToPreviousStudy()" style="${je||n===0?"display: none;":""}" title="Go back to previous study (one-time use)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        <span>Back to Previous Study</span>
                    </button>
                    <div class="paper-card">
                        <div class="paper-header">
                            <h1 class="paper-title">${s.title}</h1>
                        </div>
                        ${o}
                    </div>
                    
                    <div class="rating-section" id="rating-section-${n}">
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #ff9800;">
                            <h3 style="margin: 0 0 10px 0; color: #f57c00;">1 Predict the Crowd</h3>
                            <p style="font-size: 0.95rem; color: #444; margin: 0;">Guess: What will the AVERAGE rating be from all workshop participants? How do you think others will judge the overall quality of this study?</p>
                        </div>
                        <div class="rating-scale">
                            ${[1,2,3,4,5,6,7].map(r=>`
                                <div class="rating-option">
                                    <input type="radio" id="prediction-${n}-${r}" 
                                           name="prediction-${n}" value="${r}"
                                           onchange="enableSubmit(${n})">
                                    <label for="prediction-${n}-${r}">${r}</label>
                                </div>
                            `).join("")}
                        </div>
                        <div class="rating-labels">
                            <span>Low Average</span>
                            <span>High Average</span>
                        </div>
                        
                        <div style="background: #f0f4ff; padding: 15px; border-radius: 8px; margin: 30px 0 15px 0; border-left: 4px solid #667eea;">
                            <h3 style="margin: 0 0 10px 0; color: #667eea;">2 Your Scientific Assessment</h3>
                            <p style="font-size: 0.95rem; color: #444; margin: 0;">Review all six rubric criteria. Then assign your overall quality rating:</p>
                        </div>
                        <div class="rating-scale">
                            ${[1,2,3,4,5,6,7].map(r=>`
                                <div class="rating-option">
                                    <input type="radio" id="rating-${n}-${r}" 
                                           name="rating-${n}" value="${r}"
                                           onchange="enableSubmit(${n})">
                                    <label for="rating-${n}-${r}">${r}</label>
                                </div>
                            `).join("")}
                        </div>
                        <div class="rating-labels">
                            <span>Poor Quality</span>
                            <span>Excellent Quality</span>
                        </div>
                        
                        <button class="submit-rating" id="submit-${n}" 
                                onclick="submitRating(${n}, '${s.id}')" disabled>
                            Submit Both Ratings
                        </button>
                    </div>
                    
                    <div class="results-box" id="results-${n}" style="display: none;">
                        <h3> Rating Submitted!</h3>
                        <div class="score-earned">
                            <div class="score-value" id="score-${n}"></div>
                            <div class="score-message" id="score-msg-${n}"></div>
                        </div>
                        <div class="rating-comparison">
                            <div class="rating-scale-grid">
                                <div class="scale-label">Average Rating</div>
                                <div class="scale-row" id="avg-rating-scale-${n}">
                                    ${[1,2,3,4,5,6,7].map(r=>`<div class="scale-cell" data-value="${r}"></div>`).join("")}
                                </div>
                            </div>
                            <div class="rating-scale-grid">
                                <div class="scale-label">Your Rating</div>
                                <div class="scale-row" id="your-rating-scale-${n}">
                                    ${[1,2,3,4,5,6,7].map(r=>`<div class="scale-cell" data-value="${r}"></div>`).join("")}
                                </div>
                            </div>
                        </div>
                        <div class="participant-count" id="count-${n}">
                            Calculating...
                        </div>
                        <div class="navigation-buttons" style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1.5rem;">
                            <button class="btn-primary" onclick="nextPage()">
                                ${n<F.length-1?"Next Paper":"View Results"}
                            </button>
                            <button class="btn-finish" id="finish-btn-${n}" onclick="finishEarly()" style="display: none;">
                                Finish & View Results
                            </button>
                        </div>
                    </div>
                    
                    <div class="page-logo-footer">
                        <img id="paper-logo-${n}" src="unlock-lab-icon.svg" alt="Logo" class="page-logo">
                    </div>
                </div>
            </div>
        `;i.innerHTML+=a})}function fe(i){document.querySelectorAll(".page").forEach(o=>o.classList.remove("active"));let e;const s=document.getElementById("navbar-paper-number"),n=document.getElementById("navbar-username");if(i===0)e=document.getElementById("page-welcome"),s&&(s.style.display="none"),n&&(n.style.display="none"),document.getElementById("help-button").classList.remove("visible");else if(i===1)e=document.getElementById("page-guide"),s&&(s.style.display="none"),n&&(n.style.display="none"),document.getElementById("help-button").classList.remove("visible"),Pt&&Pt.length>0&&zi(),At&&At.length>0&&Ni();else if(i<=F.length+1){const o=i-2;e=document.getElementById(`page-paper-${o}`),document.getElementById("help-button").classList.add("visible");const a=F[o].id;if(We[a]=Date.now(),s){const c=Object.keys(j).length;s.textContent=`${c}`,s.style.display="inline"}n&&(n.style.display="none");const r=Object.keys(j).length;(r>0?Math.round(lt/r):0)>0&&(document.getElementById("score-banner").style.display="flex")}else if(i===F.length+2){e=document.getElementById("page-ranking"),document.getElementById("help-button").classList.remove("visible"),s&&(s.style.display="none"),n&&(n.style.display="none");const o=document.getElementById("criteria-token-grid");o&&!o.hasChildNodes()?Gh():Ns()}else e=document.getElementById("page-final"),document.getElementById("help-button").classList.remove("visible"),s&&(s.style.display="none"),n&&(n.style.display="inline"),va();e?(e.classList.add("active"),window.scrollTo(0,0)):console.error("Target page not found for pageIndex:",i),mt=i,Ve()}function Yh(){const i=F.length+4;mt<i-1&&fe(mt+1)}function qh(){mt>0&&fe(mt-1)}function Xh(){if(Object.keys(j).length<1){alert("Please rate at least one study before finishing.");return}const t=F.length+2;fe(t)}function Gh(){ct={title:0,access:0,source:0,theory:0,methods:0,conclusion:0};const i=document.getElementById("criteria-token-grid");i&&(i.innerHTML=Ti.map(t=>`
        <div class="criterion-token-row">
            <div class="criterion-token-label">
                <span>${t.label}</span>
                <span class="token-count-badge" id="token-count-${t.key}">0</span>
            </div>
            <div class="token-boxes" id="token-boxes-${t.key}">
                ${Array.from({length:20},(e,s)=>`<div class="token-box" data-criterion="${t.key}" data-index="${s+1}"
                        onclick="handleTokenClick('${t.key}', ${s+1})"></div>`).join("")}
            </div>
        </div>
    `).join(""),Ns(),i.querySelectorAll(".token-box").forEach(t=>{t.addEventListener("mouseenter",()=>{if(t.classList.contains("disabled"))return;const e=t.dataset.criterion,s=parseInt(t.dataset.index);document.querySelectorAll(`#token-boxes-${e} .token-box`).forEach((n,o)=>{n.classList.toggle("hover-fill",o+1<s)})}),t.addEventListener("mouseleave",()=>{const e=t.dataset.criterion;document.querySelectorAll(`#token-boxes-${e} .token-box`).forEach(s=>s.classList.remove("hover-fill"))})}))}window.handleTokenClick=function(i,t){const e=ct[i],o=20-(Object.values(ct).reduce((a,r)=>a+r,0)-e);t>o||(t===e?ct[i]=0:ct[i]=t,Ns())};function Ns(){const i=Object.values(ct).reduce((n,o)=>n+o,0);Ti.forEach(n=>{const o=ct[n.key],r=20-(i-o),l=document.getElementById(`token-count-${n.key}`);l&&(l.textContent=o,l.classList.toggle("complete",o>0)),document.querySelectorAll(`[data-criterion="${n.key}"]`).forEach((d,h)=>{const u=h+1;d.classList.toggle("filled",u<=o),d.classList.toggle("disabled",u>r)})});const t=document.getElementById("tokens-used-display");t&&(t.textContent=i);const e=document.getElementById("token-progress-fill");e&&(e.style.width=`${i/20*100}%`);const s=document.getElementById("submit-ranking-btn");if(s){const n=i===20;s.disabled=!n,s.style.opacity=n?"1":"0.5",s.textContent=n?"Submit & View My Results ":`Allocate all 20 tokens to continue (${20-i} remaining)`}}window.submitRanking=async function(){if(Object.values(ct).reduce((t,e)=>t+e,0)===20){try{const t=Z(J,`rankings/${V}`);await Bt(t,{...ct,userName:G,timestamp:Date.now(),uid:ht})}catch(t){console.error("Error saving criterion ranking:",t)}fe(F.length+3)}};function Kh(){je||mt>2&&(je=!0,Ve(),document.querySelectorAll(".back-to-previous-btn").forEach(t=>{t.style.display="none"}),fe(mt-1))}window.goBackToPreviousStudy=Kh;function Jh(i){const t=document.querySelector(`input[name="rating-${i}"]:checked`),e=document.querySelector(`input[name="prediction-${i}"]:checked`),s=document.getElementById(`submit-${i}`);s.disabled=!(t&&e)}async function Zh(i,t){const e=document.querySelector(`input[name="rating-${i}"]:checked`),s=document.querySelector(`input[name="prediction-${i}"]:checked`);if(!e||!s){alert("Please provide both your rating and your prediction before submitting.");return}const n=parseInt(e.value),o=parseInt(s.value);try{const a=document.getElementById(`submit-${i}`);a.disabled=!0,a.textContent="Submitting...";const r=Z(J,`ratings/${t}`),c=(await Ct(r)).val();let d=4;if(c){const f=zs(c),p=Ai[t]||4,g=f.reduce((b,y)=>b+y,0)+p*ue,m=f.length+ue;d=g/m}else d=Ai[t]||4;j[t]=n,qe[t]=o,Ve(),document.getElementById(`rating-section-${i}`).style.display="none",ya(i,t,n,o,!1,d);const h=We[t]?Date.now()-We[t]:null;ht||(oe.currentUser?ht=oe.currentUser.uid:ht=(await fo(oe)).user.uid);const u=Z(J,`ratings/${t}/${V}`);await Bt(u,{rating:n,prediction:o,responseTime:h,timestamp:Date.now(),uid:ht})}catch(a){console.error("Error submitting rating:",a),console.error("Error details:",a.code,a.message),alert(`Error submitting rating: ${a.message}

Please check the browser console for details.`);const r=document.getElementById(`submit-${i}`);r.disabled=!1,r.textContent="Submit Both Ratings"}}async function ya(i,t,e,s,n=!1,o=null){const a=document.getElementById(`results-${i}`);if(a.style.display="block",o!==null){const c=document.getElementById(`score-${i}`);if(!c.textContent){const d=Math.abs(s-o),h=Math.max(0,100-Math.round(d*12));he[t]=h,c.textContent=`${h}%`,c.style.fontSize="2rem",c.style.fontWeight="bold";const u=document.getElementById(`score-msg-${i}`);if(u.innerHTML=d===0?`<strong> Perfect prediction!</strong><br>You nailed it: ${s} = ${o.toFixed(1)}`:d<=.5?`<strong> Outstanding!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  spot on!`:d<=1?`<strong> Excellent work!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  very close!`:d<=1.5?`<strong> Great prediction!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  well done!`:d<=2.5?`<strong> Good attempt!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  getting there!`:`<strong> Keep learning!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  science perception is tricky!`,u.style.fontSize="0.95rem",u.style.lineHeight="1.5",h>=90&&!Mi.has(t)){Mi.add(t);const m=document.getElementById(`paper-logo-${i}`);m&&setTimeout(()=>{m.dispatchEvent(new CustomEvent("celebrate"))},500)}const f=document.getElementById("total-score-header"),p=document.getElementById("score-banner");if(f){const m=Object.keys(j).length,b=m>0?Math.round(lt/m):0;if(b>0){const y=xs(b);f.innerHTML=`<span class="medal-icon">${y}</span> ${b}%`,f.style.animation="scoreUpdate 0.5s ease",setTimeout(()=>f.style.animation="",500),p&&(p.style.display="flex")}else p&&(p.style.display="none")}Ci(),Ve();const g=Object.keys(j).length;if(g>=1&&i<F.length-1){const m=document.getElementById(`finish-btn-${i}`);m&&(m.style.display="block")}if(g===12){const m=document.getElementById(`paper-logo-${i}`);m&&setTimeout(()=>{m.dispatchEvent(new CustomEvent("celebrate"))},800),setTimeout(()=>{alert(" You've rated 12 studies! Feel free to keep going or finish early whenever you're ready.")},1200)}}}const r=Z(J,`ratings/${t}`),l=ws(r,c=>{const d=c.val();if(d){const h=zs(d),u=Ai[t]||4,f=h.reduce((v,_)=>v+_,0)+u*ue,p=h.length+ue,g=f/p,m=h.length,b=Math.round(g),y=document.getElementById(`your-rating-scale-${i}`),w=document.getElementById(`avg-rating-scale-${i}`);if(y&&w){y.querySelectorAll(".scale-cell").forEach(k=>{k.textContent="",k.className="scale-cell"}),w.querySelectorAll(".scale-cell").forEach(k=>{k.textContent="",k.className="scale-cell"});const v=y.querySelector(`[data-value="${e}"]`);v&&(v.textContent=e,v.className=`scale-cell active rating-${e}`);const _=w.querySelector(`[data-value="${b}"]`);_&&(_.textContent=g.toFixed(1),_.className=`scale-cell active rating-${b}`)}document.getElementById(`count-${i}`).textContent=`Based on ${m} participant${m!==1?"s":""}`;const x=document.getElementById(`score-${i}`);if(!x.textContent&&!n){const v=Math.abs(s-g),_=Math.max(0,100-Math.round(v*12));he[t]=_,lt+=_,x.textContent=`${_}%`,x.style.fontSize="2rem",x.style.fontWeight="bold",x.style.color=_>=88?"#10b981":_>=76?"#3b82f6":_>=64?"#f59e0b":"#ef4444";const k=document.getElementById(`score-msg-${i}`);k.innerHTML=v===0?`<strong> Perfect prediction!</strong><br>You nailed it: ${s} = ${g.toFixed(1)}`:v<=.5?`<strong> Outstanding!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  spot on!`:v<=1?`<strong> Excellent work!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  very close!`:v<=1.5?`<strong> Great prediction!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  well done!`:v<=2.5?`<strong> Good attempt!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  getting there!`:`<strong> Keep learning!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  science perception is tricky!`,k.style.fontSize="0.95rem",k.style.lineHeight="1.5";const S=document.getElementById("total-score-header"),T=document.getElementById("score-banner");if(S){const D=Object.keys(j).length,C=D>0?Math.round(lt/D):0;if(C>0){const U=xs(C);S.innerHTML=`<span class="medal-icon">${U}</span> ${C}%`,S.style.animation="scoreUpdate 0.5s ease",setTimeout(()=>S.style.animation="",500),T&&(T.style.display="flex")}else T&&(T.style.display="none")}if(Ci(),Ve(),ht&&V&&G){const D=Object.keys(j).length,C=Z(J,`leaderboard/${V}`);Bt(C,{score:lt,timestamp:Date.now(),papersRated:D,userName:G,uid:ht}).catch(U=>console.warn("[Leaderboard] Progressive update failed:",U))}if(Object.keys(j).length>=1&&i<F.length-1){const D=document.getElementById(`finish-btn-${i}`);D&&(D.style.display="block")}}}});Pi.push(l)}function Qh(){document.getElementById("help-modal").classList.add("active"),document.body.style.overflow="hidden"}function $s(){document.getElementById("help-modal").classList.remove("active"),document.body.style.overflow="auto"}function tu(i){document.querySelectorAll(".tab-btn").forEach(t=>{t.classList.remove("active")}),event.target.classList.add("active"),document.querySelectorAll(".tab-content").forEach(t=>{t.classList.remove("active")}),i==="glossary"?document.getElementById("modal-glossary").classList.add("active"):document.getElementById("modal-rubric").classList.add("active")}window.onclick=function(i){const t=document.getElementById("help-modal");i.target===t&&$s()};window.addEventListener("keydown",function(i){if(i.key==="Escape"){const t=document.getElementById("help-modal");t&&t.classList.contains("active")&&$s()}});function uo(i,t){const e=document.getElementById(t);if(!e)return;const s=Ti.reduce((n,o)=>n+(i[o.key]||0),0);if(s===0){e.innerHTML='<p style="text-align: center; color: #9ca3af; margin: 0;">No weighting data available.</p>';return}e.innerHTML=Ti.map(n=>{const o=i[n.key]||0,a=Math.round(o/s*100);return`
            <div style="margin-bottom: 0.9rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem;">
                    <span style="font-weight: 600; font-size: 0.9rem;">${n.label}</span>
                    <span style="font-weight: 700; color: #d97706; font-size: 0.9rem;">${a}%</span>
                </div>
                <div style="background: #e5e7eb; border-radius: 4px; height: 12px; overflow: hidden;">
                    <div style="width: ${a}%; height: 100%; background: linear-gradient(90deg, #f59e0b, #d97706); border-radius: 4px; transition: width 0.4s ease;"></div>
                </div>
            </div>`}).join("")}function va(){zi(),Ni(),bs||(lt=Object.values(he).reduce((o,a)=>o+a,0));const i=Object.keys(j).length,t=i>0?Math.round(lt/i):0;document.getElementById("final-score").textContent=`${t}%`;const e=document.getElementById("total-papers");e&&(e.textContent=i);const s=V;if(s&&Ct(Z(J,`rankings/${s}`)).then(o=>{if(o.exists())uo(o.val(),"criterion-importance-bars");else if(Object.values(ct).reduce((r,l)=>r+l,0)>0)uo(ct,"criterion-importance-bars");else{const r=document.getElementById("criterion-importance-section");r&&(r.style.display="none")}}).catch(o=>{console.error("[CriterionImportance] Firebase read error:",o)}),bs){const o=document.getElementById("save-results-section");o&&(o.style.display="none"),document.getElementById("username-display-save").textContent=G,document.getElementById("username-display-inline").textContent=G}else{const o=Z(J,`leaderboard/${V}`);Bt(o,{score:lt,timestamp:Date.now(),papersRated:Object.keys(j).length,userName:G,uid:ht}).then(()=>{document.getElementById("save-results-link").style.display="inline-block",document.getElementById("email-results-link").style.display="inline-block",document.getElementById("username-display-save").textContent=G,document.getElementById("username-display-inline").textContent=G}).catch(a=>{console.error("Error saving score:",a)})}eu();const n=Z(J,"leaderboard");ws(n,o=>{const a=o.val();if(a){const r=Object.entries(a).map(([h,u])=>({id:h,score:u.score,timestamp:u.timestamp,userName:u.userName||"Anonymous",papersRated:u.papersRated||0})).filter(h=>h.userName!=="Anonymous");r.sort((h,u)=>u.score-h.score);const l=r.findIndex(h=>h.id===V)+1;document.getElementById("score-rank").textContent=`You ranked #${l} out of ${r.length} participant${r.length!==1?"s":""}!`;const d=r.slice(0,5).map((h,u)=>{const f=h.id===V,p=u===0?"":u===1?"":u===2?"":"",g=h.papersRated>0?Math.round(h.score/h.papersRated):0;return`
                    <div class="leaderboard-entry ${f?"current-user":""}">
                        <span class="rank">${p||`#${u+1}`}</span>
                        <div class="username-container">
                            <span class="username">${h.userName}</span>
                            ${f?'<span class="you-badge">You!</span>':""}
                        </div>
                        <span class="score">${g}%</span>
                    </div>
                `}).join("");document.getElementById("leaderboard-list").innerHTML=d||"<p>Be the first to complete!</p>"}})}async function eu(){try{const i={},t=F.map(async u=>{const f=Z(J,`ratings/${u.id}`),g=(await Ct(f)).val();if(g){const m=zs(g),b=Ai[u.id]||4,y=m.reduce((v,_)=>v+_,0)+b*ue,w=m.length+ue,x=y/w;i[u.id]={average:x,userRating:j[u.id]||null}}});await Promise.all(t);const e=[],s=[],n=[],o=[];if(F.forEach(u=>{if(i[u.id]&&i[u.id].userRating!==null){const f=i[u.id].userRating,p=i[u.id].average,g=f-p;e.push(g),s.push(f),n.push(p),o.push(u.id)}}),e.length===0)return;const a=e.reduce((u,f)=>u+f,0)/e.length,r=e.reduce((u,f)=>u+Math.pow(f-a,2),0)/e.length,l=Math.sqrt(r),c=e.map(u=>Math.abs(u)),d=c.reduce((u,f)=>u+f,0)/c.length;let h="";d<.5&&l<.8?h=` <strong>Spot-On Evaluator!</strong> Your ratings are remarkably well-aligned with the crowd. On average, you deviated by just ${d.toFixed(2)} points from other participants' ratings. Your assessments are well backed by both the baseline quality indicators and the collective wisdom of other evaluators. You're in sync with the scientific consensus!`:d<1&&l<1.5?h=` <strong>Calibrated Scientist.</strong> Your ratings align well with the crowd, averaging ${d.toFixed(2)} points from the consensus. You're consistently backed by other participants' evaluations, showing you've developed a reliable eye for research quality that matches the collective assessment.`:d>2||l>2.5?h=` <strong>Breaking the Mould!</strong> Your ratings deviate substantially from the crowd (average difference: ${d.toFixed(2)} points). You're seeing research quality through a unique lensperhaps you're more critical of methodological flaws, or more generous with preliminary findings. Your independent perspective challenges the consensus!`:h=` <strong>Balanced Contrarian.</strong> Your ratings show notable differences from the average (typical deviation: ${d.toFixed(2)} points). You're neither slavishly following the crowd nor wildly divergentyou're bringing a thoughtful, independent perspective whilst still engaging with the scientific consensus.`,document.getElementById("analysis-summary").innerHTML=h,document.getElementById("rating-analysis").style.display="block",iu(o,s,n)}catch(i){console.error("Error calculating rating analysis:",i)}}function iu(i,t,e){const s=document.getElementById("comparison-chart");s&&new St(s,{type:"line",data:{labels:i,datasets:[{label:"Your Ratings",data:t,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",borderWidth:3,pointRadius:5,pointBackgroundColor:"#667eea",tension:0},{label:"Crowd Average",data:e,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,borderDash:[5,5],pointRadius:4,pointBackgroundColor:"#10b981",tension:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{font:{size:12,weight:"bold"}}},tooltip:{callbacks:{label:function(n){return`${n.dataset.label}: ${n.parsed.y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!1,min:1,max:7,title:{display:!0,text:"Rating (1-7 scale)",font:{size:14,weight:"bold"}},ticks:{stepSize:1}},x:{title:{display:!0,text:"Studies",font:{size:14,weight:"bold"}},ticks:{maxRotation:45,minRotation:45,font:{size:9}}}}}})}function su(){const i=`${window.location.origin}${window.location.pathname}?session=${V}`;navigator.clipboard.writeText(i).then(()=>{document.getElementById("link-copied-msg").style.display="block",setTimeout(()=>{document.getElementById("link-copied-msg").style.display="none"},3e3)}).catch(t=>{console.error("Failed to copy link:",t),alert("Failed to copy link. Please copy manually: "+i)})}window.copyResultsLink=su;function nu(){const i=`${window.location.origin}${window.location.pathname}?session=${V}`,t=`${window.location.origin}/dashboard.html`,e=encodeURIComponent("Your Unlock the Lab Results"),s=encodeURIComponent(`Hello ${G},

Here are your Unlock the Lab workshop results:

Your Username: ${G}

Direct Link to Your Results:
${i}

You can also visit the Live Dashboard and enter your username to find your results:
${t}

The dashboard shows real-time statistics and comparisons for all participants.

Thank you for participating!

---
Unlock the Lab Workshop
Dr Pablo Bernabeu, University of Oxford`);window.location.href=`mailto:?subject=${e}&body=${s}`}window.emailResultsLink=nu;async function ou(i){try{bs=!0,await ba(!1),zi(),Ni();const t=l=>l.toLowerCase().replace(/\s+/g,"");let e=Z(J,`leaderboard/${i}`),s=await Ct(e),n=i;if(!s.exists()){const l=t(i),c=Z(J,"leaderboard"),d=await Ct(c);if(d.exists()){const h=d.val(),u=Object.keys(h).find(f=>t(f)===l);u&&(n=u,e=Z(J,`leaderboard/${u}`),s=await Ct(e))}}if(!s.exists()){alert("Username not found. Please check your username and try again."),window.location.href=window.location.pathname;return}const o=s.val();if(V=n,G=o.userName||"Anonymous",lt=o.score||0,!F||!F.length)throw new Error("Papers data failed to load");const a=F.map(async l=>{const c=Z(J,`ratings/${l.id}/${n}`),d=await Ct(c);if(d.exists()){const h=d.val();j[l.id]=h.rating,qe[l.id]=h.prediction}});await Promise.all(a),document.getElementById("page-welcome").classList.remove("active"),document.getElementById("page-final").classList.add("active"),va();const r=document.getElementById("total-papers");r&&(r.textContent=Object.keys(j).length)}catch(t){console.error("Error loading session results:",t),alert("Error loading results. Please try again."),window.location.href=window.location.pathname}}
