var ba=Object.defineProperty;var ya=(i,t,e)=>t in i?ba(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var M=(i,t,e)=>ya(i,typeof t!="symbol"?t+"":t,e);import"./modulepreload-polyfill-B5Qt9EMX.js";import{d as tt}from"./firebase-config-Bc3FtdCM.js";import{r as et,g as At,s as Xt,o as bs}from"./firebase-4YSElDcj.js";/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function We(i){return i+.5|0}const Ct=(i,t,e)=>Math.max(Math.min(i,e),t);function ve(i){return Ct(We(i*2.55),0,255)}function It(i){return Ct(We(i*255),0,255)}function _t(i){return Ct(We(i/2.55)/100,0,1)}function Ns(i){return Ct(We(i*100),0,100)}const ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ji=[..."0123456789ABCDEF"],va=i=>Ji[i&15],xa=i=>Ji[(i&240)>>4]+Ji[i&15],qe=i=>(i&240)>>4===(i&15),wa=i=>qe(i.r)&&qe(i.g)&&qe(i.b)&&qe(i.a);function _a(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&ct[i[1]]*17,g:255&ct[i[2]]*17,b:255&ct[i[3]]*17,a:t===5?ct[i[4]]*17:255}:(t===7||t===9)&&(e={r:ct[i[1]]<<4|ct[i[2]],g:ct[i[3]]<<4|ct[i[4]],b:ct[i[5]]<<4|ct[i[6]],a:t===9?ct[i[7]]<<4|ct[i[8]]:255})),e}const ka=(i,t)=>i<255?t(i):"";function Sa(i){var t=wa(i)?va:xa;return i?"#"+t(i.r)+t(i.g)+t(i.b)+ka(i.a,t):void 0}const Ma=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ho(i,t,e){const s=t*Math.min(e,1-e),n=(o,a=(o+i/30)%12)=>e-s*Math.max(Math.min(a-3,9-a,1),-1);return[n(0),n(8),n(4)]}function Ta(i,t,e){const s=(n,o=(n+i/60)%6)=>e-e*t*Math.max(Math.min(o,4-o,1),0);return[s(5),s(3),s(1)]}function Da(i,t,e){const s=ho(i,1,.5);let n;for(t+e>1&&(n=1/(t+e),t*=n,e*=n),n=0;n<3;n++)s[n]*=1-t-e,s[n]+=t;return s}function Pa(i,t,e,s,n){return i===n?(t-e)/s+(t<e?6:0):t===n?(e-i)/s+2:(i-t)/s+4}function ys(i){const e=i.r/255,s=i.g/255,n=i.b/255,o=Math.max(e,s,n),a=Math.min(e,s,n),r=(o+a)/2;let l,c,d;return o!==a&&(d=o-a,c=r>.5?d/(2-o-a):d/(o+a),l=Pa(e,s,n,d,o),l=l*60+.5),[l|0,c||0,r]}function vs(i,t,e,s){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,s)).map(It)}function xs(i,t,e){return vs(ho,i,t,e)}function Aa(i,t,e){return vs(Da,i,t,e)}function Ca(i,t,e){return vs(Ta,i,t,e)}function uo(i){return(i%360+360)%360}function Oa(i){const t=Ma.exec(i);let e=255,s;if(!t)return;t[5]!==s&&(e=t[6]?ve(+t[5]):It(+t[5]));const n=uo(+t[2]),o=+t[3]/100,a=+t[4]/100;return t[1]==="hwb"?s=Aa(n,o,a):t[1]==="hsv"?s=Ca(n,o,a):s=xs(n,o,a),{r:s[0],g:s[1],b:s[2],a:e}}function Ra(i,t){var e=ys(i);e[0]=uo(e[0]+t),e=xs(e),i.r=e[0],i.g=e[1],i.b=e[2]}function Ea(i){if(!i)return;const t=ys(i),e=t[0],s=Ns(t[1]),n=Ns(t[2]);return i.a<255?`hsla(${e}, ${s}%, ${n}%, ${_t(i.a)})`:`hsl(${e}, ${s}%, ${n}%)`}const $s={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Hs={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function La(){const i={},t=Object.keys(Hs),e=Object.keys($s);let s,n,o,a,r;for(s=0;s<t.length;s++){for(a=r=t[s],n=0;n<e.length;n++)o=e[n],r=r.replace(o,$s[o]);o=parseInt(Hs[a],16),i[r]=[o>>16&255,o>>8&255,o&255]}return i}let Xe;function Ia(i){Xe||(Xe=La(),Xe.transparent=[0,0,0,0]);const t=Xe[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Ba=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Fa(i){const t=Ba.exec(i);let e=255,s,n,o;if(t){if(t[7]!==s){const a=+t[7];e=t[8]?ve(a):Ct(a*255,0,255)}return s=+t[1],n=+t[3],o=+t[5],s=255&(t[2]?ve(s):Ct(s,0,255)),n=255&(t[4]?ve(n):Ct(n,0,255)),o=255&(t[6]?ve(o):Ct(o,0,255)),{r:s,g:n,b:o,a:e}}}function za(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${_t(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}const Bi=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,ie=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Na(i,t,e){const s=ie(_t(i.r)),n=ie(_t(i.g)),o=ie(_t(i.b));return{r:It(Bi(s+e*(ie(_t(t.r))-s))),g:It(Bi(n+e*(ie(_t(t.g))-n))),b:It(Bi(o+e*(ie(_t(t.b))-o))),a:i.a+e*(t.a-i.a)}}function Ge(i,t,e){if(i){let s=ys(i);s[t]=Math.max(0,Math.min(s[t]+s[t]*e,t===0?360:1)),s=xs(s),i.r=s[0],i.g=s[1],i.b=s[2]}}function fo(i,t){return i&&Object.assign(t||{},i)}function js(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=It(i[3]))):(t=fo(i,{r:0,g:0,b:0,a:1}),t.a=It(t.a)),t}function $a(i){return i.charAt(0)==="r"?Fa(i):Oa(i)}class Re{constructor(t){if(t instanceof Re)return t;const e=typeof t;let s;e==="object"?s=js(t):e==="string"&&(s=_a(t)||Ia(t)||$a(t)),this._rgb=s,this._valid=!!s}get valid(){return this._valid}get rgb(){var t=fo(this._rgb);return t&&(t.a=_t(t.a)),t}set rgb(t){this._rgb=js(t)}rgbString(){return this._valid?za(this._rgb):void 0}hexString(){return this._valid?Sa(this._rgb):void 0}hslString(){return this._valid?Ea(this._rgb):void 0}mix(t,e){if(t){const s=this.rgb,n=t.rgb;let o;const a=e===o?.5:e,r=2*a-1,l=s.a-n.a,c=((r*l===-1?r:(r+l)/(1+r*l))+1)/2;o=1-c,s.r=255&c*s.r+o*n.r+.5,s.g=255&c*s.g+o*n.g+.5,s.b=255&c*s.b+o*n.b+.5,s.a=a*s.a+(1-a)*n.a,this.rgb=s}return this}interpolate(t,e){return t&&(this._rgb=Na(this._rgb,t._rgb,e)),this}clone(){return new Re(this.rgb)}alpha(t){return this._rgb.a=It(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=We(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ge(this._rgb,2,t),this}darken(t){return Ge(this._rgb,2,-t),this}saturate(t){return Ge(this._rgb,1,t),this}desaturate(t){return Ge(this._rgb,1,-t),this}rotate(t){return Ra(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function vt(){}const Ha=(()=>{let i=0;return()=>i++})();function O(i){return i==null}function $(i){if(Array.isArray&&Array.isArray(i))return!0;const t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function R(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function j(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function rt(i,t){return j(i)?i:t}function P(i,t){return typeof i>"u"?t:i}const ja=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,go=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function F(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function I(i,t,e,s){let n,o,a;if($(i))for(o=i.length,n=0;n<o;n++)t.call(e,i[n],n);else if(R(i))for(a=Object.keys(i),o=a.length,n=0;n<o;n++)t.call(e,i[a[n]],a[n])}function pi(i,t){let e,s,n,o;if(!i||!t||i.length!==t.length)return!1;for(e=0,s=i.length;e<s;++e)if(n=i[e],o=t[e],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function mi(i){if($(i))return i.map(mi);if(R(i)){const t=Object.create(null),e=Object.keys(i),s=e.length;let n=0;for(;n<s;++n)t[e[n]]=mi(i[e[n]]);return t}return i}function po(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function Wa(i,t,e,s){if(!po(i))return;const n=t[i],o=e[i];R(n)&&R(o)?Ee(n,o,s):t[i]=mi(o)}function Ee(i,t,e){const s=$(t)?t:[t],n=s.length;if(!R(i))return i;e=e||{};const o=e.merger||Wa;let a;for(let r=0;r<n;++r){if(a=s[r],!R(a))continue;const l=Object.keys(a);for(let c=0,d=l.length;c<d;++c)o(l[c],i,a,e)}return i}function Me(i,t){return Ee(i,t,{merger:Va})}function Va(i,t,e){if(!po(i))return;const s=t[i],n=e[i];R(s)&&R(n)?Me(s,n):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=mi(n))}const Ws={"":i=>i,x:i=>i.x,y:i=>i.y};function Ya(i){const t=i.split("."),e=[];let s="";for(const n of t)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(e.push(s),s="");return e}function Ua(i){const t=Ya(i);return e=>{for(const s of t){if(s==="")break;e=e&&e[s]}return e}}function Bt(i,t){return(Ws[t]||(Ws[t]=Ua(t)))(i)}function ws(i){return i.charAt(0).toUpperCase()+i.slice(1)}const Le=i=>typeof i<"u",Ft=i=>typeof i=="function",Vs=(i,t)=>{if(i.size!==t.size)return!1;for(const e of i)if(!t.has(e))return!1;return!0};function qa(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}const E=Math.PI,z=2*E,Xa=z+E,bi=Number.POSITIVE_INFINITY,Ga=E/180,Y=E/2,Ht=E/4,Ys=E*2/3,Ot=Math.log10,yt=Math.sign;function Te(i,t,e){return Math.abs(i-t)<e}function Us(i){const t=Math.round(i);i=Te(i,t,i/1e3)?t:i;const e=Math.pow(10,Math.floor(Ot(i))),s=i/e;return(s<=1?1:s<=2?2:s<=5?5:10)*e}function Ka(i){const t=[],e=Math.sqrt(i);let s;for(s=1;s<e;s++)i%s===0&&(t.push(s),t.push(i/s));return e===(e|0)&&t.push(e),t.sort((n,o)=>n-o).pop(),t}function Ja(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function ae(i){return!Ja(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function Za(i,t){const e=Math.round(i);return e-t<=i&&e+t>=i}function mo(i,t,e){let s,n,o;for(s=0,n=i.length;s<n;s++)o=i[s][e],isNaN(o)||(t.min=Math.min(t.min,o),t.max=Math.max(t.max,o))}function ft(i){return i*(E/180)}function _s(i){return i*(180/E)}function qs(i){if(!j(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function bo(i,t){const e=t.x-i.x,s=t.y-i.y,n=Math.sqrt(e*e+s*s);let o=Math.atan2(s,e);return o<-.5*E&&(o+=z),{angle:o,distance:n}}function Zi(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function Qa(i,t){return(i-t+Xa)%z-E}function Z(i){return(i%z+z)%z}function Ie(i,t,e,s){const n=Z(i),o=Z(t),a=Z(e),r=Z(o-n),l=Z(a-n),c=Z(n-o),d=Z(n-a);return n===o||n===a||s&&o===a||r>l&&c<d}function G(i,t,e){return Math.max(t,Math.min(e,i))}function tr(i){return G(i,-32768,32767)}function Tt(i,t,e,s=1e-6){return i>=Math.min(t,e)-s&&i<=Math.max(t,e)+s}function ks(i,t,e){e=e||(a=>i[a]<t);let s=i.length-1,n=0,o;for(;s-n>1;)o=n+s>>1,e(o)?n=o:s=o;return{lo:n,hi:s}}const Dt=(i,t,e,s)=>ks(i,e,s?n=>{const o=i[n][t];return o<e||o===e&&i[n+1][t]===e}:n=>i[n][t]<e),er=(i,t,e)=>ks(i,e,s=>i[s][t]>=e);function ir(i,t,e){let s=0,n=i.length;for(;s<n&&i[s]<t;)s++;for(;n>s&&i[n-1]>e;)n--;return s>0||n<i.length?i.slice(s,n):i}const yo=["push","pop","shift","splice","unshift"];function sr(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),yo.forEach(e=>{const s="_onData"+ws(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...o){const a=n.apply(this,o);return i._chartjs.listeners.forEach(r=>{typeof r[s]=="function"&&r[s](...o)}),a}})})}function Xs(i,t){const e=i._chartjs;if(!e)return;const s=e.listeners,n=s.indexOf(t);n!==-1&&s.splice(n,1),!(s.length>0)&&(yo.forEach(o=>{delete i[o]}),delete i._chartjs)}function vo(i){const t=new Set(i);return t.size===i.length?i:Array.from(t)}const xo=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function wo(i,t){let e=[],s=!1;return function(...n){e=n,s||(s=!0,xo.call(window,()=>{s=!1,i.apply(t,e)}))}}function nr(i,t){let e;return function(...s){return t?(clearTimeout(e),e=setTimeout(i,t,s)):i.apply(this,s),t}}const Ss=i=>i==="start"?"left":i==="end"?"right":"center",J=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,or=(i,t,e,s)=>i===(s?"left":"right")?e:i==="center"?(t+e)/2:t;function _o(i,t,e){const s=t.length;let n=0,o=s;if(i._sorted){const{iScale:a,vScale:r,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,d=a.axis,{min:h,max:u,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(n=Math.min(Dt(l,d,h).lo,e?s:Dt(t,d,a.getPixelForValue(h)).lo),c){const g=l.slice(0,n+1).reverse().findIndex(m=>!O(m[r.axis]));n-=Math.max(0,g)}n=G(n,0,s-1)}if(p){let g=Math.max(Dt(l,a.axis,u,!0).hi+1,e?0:Dt(t,d,a.getPixelForValue(u),!0).hi+1);if(c){const m=l.slice(g-1).findIndex(b=>!O(b[r.axis]));g+=Math.max(0,m)}o=G(g,n,s)-n}else o=s-n}return{start:n,count:o}}function ko(i){const{xScale:t,yScale:e,_scaleRanges:s}=i,n={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!s)return i._scaleRanges=n,!0;const o=s.xmin!==t.min||s.xmax!==t.max||s.ymin!==e.min||s.ymax!==e.max;return Object.assign(s,n),o}const Ke=i=>i===0||i===1,Gs=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*z/e)),Ks=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*z/e)+1,De={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Y)+1,easeOutSine:i=>Math.sin(i*Y),easeInOutSine:i=>-.5*(Math.cos(E*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>Ke(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>Ke(i)?i:Gs(i,.075,.3),easeOutElastic:i=>Ke(i)?i:Ks(i,.075,.3),easeInOutElastic(i){return Ke(i)?i:i<.5?.5*Gs(i*2,.1125,.45):.5+.5*Ks(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-De.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?De.easeInBounce(i*2)*.5:De.easeOutBounce(i*2-1)*.5+.5};function Ms(i){if(i&&typeof i=="object"){const t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Js(i){return Ms(i)?i:new Re(i)}function Fi(i){return Ms(i)?i:new Re(i).saturate(.5).darken(.1).hexString()}const ar=["x","y","borderWidth","radius","tension"],rr=["color","borderColor","backgroundColor"];function lr(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:rr},numbers:{type:"number",properties:ar}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function cr(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Zs=new Map;function dr(i,t){t=t||{};const e=i+JSON.stringify(t);let s=Zs.get(e);return s||(s=new Intl.NumberFormat(i,t),Zs.set(e,s)),s}function Ve(i,t,e){return dr(t,e).format(i)}const So={values(i){return $(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";const s=this.chart.options.locale;let n,o=i;if(e.length>1){const c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(n="scientific"),o=hr(i,e)}const a=Ot(Math.abs(o)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),Ve(i,s,l)},logarithmic(i,t,e){if(i===0)return"0";const s=e[t].significand||i/Math.pow(10,Math.floor(Ot(i)));return[1,2,3,5,10,15].includes(s)||t>.8*e.length?So.numeric.call(this,i,t,e):""}};function hr(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var Ai={formatters:So};function ur(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ai.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Jt=Object.create(null),Qi=Object.create(null);function Pe(i,t){if(!t)return i;const e=t.split(".");for(let s=0,n=e.length;s<n;++s){const o=e[s];i=i[o]||(i[o]=Object.create(null))}return i}function zi(i,t,e){return typeof t=="string"?Ee(Pe(i,t),e):Ee(Pe(i,""),t)}class fr{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=s=>s.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(s,n)=>Fi(n.backgroundColor),this.hoverBorderColor=(s,n)=>Fi(n.borderColor),this.hoverColor=(s,n)=>Fi(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return zi(this,t,e)}get(t){return Pe(this,t)}describe(t,e){return zi(Qi,t,e)}override(t,e){return zi(Jt,t,e)}route(t,e,s,n){const o=Pe(this,t),a=Pe(this,s),r="_"+e;Object.defineProperties(o,{[r]:{value:o[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[r],c=a[n];return R(l)?Object.assign({},c,l):P(l,c)},set(l){this[r]=l}}})}apply(t){t.forEach(e=>e(this))}}var H=new fr({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[lr,cr,ur]);function gr(i){return!i||O(i.size)||O(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function yi(i,t,e,s,n){let o=t[n];return o||(o=t[n]=i.measureText(n).width,e.push(n)),o>s&&(s=o),s}function pr(i,t,e,s){s=s||{};let n=s.data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==t&&(n=s.data={},o=s.garbageCollect=[],s.font=t),i.save(),i.font=t;let a=0;const r=e.length;let l,c,d,h,u;for(l=0;l<r;l++)if(h=e[l],h!=null&&!$(h))a=yi(i,n,o,a,h);else if($(h))for(c=0,d=h.length;c<d;c++)u=h[c],u!=null&&!$(u)&&(a=yi(i,n,o,a,u));i.restore();const f=o.length/2;if(f>e.length){for(l=0;l<f;l++)delete n[o[l]];o.splice(0,f)}return a}function jt(i,t,e){const s=i.currentDevicePixelRatio,n=e!==0?Math.max(e/2,.5):0;return Math.round((t-n)*s)/s+n}function Qs(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function ts(i,t,e,s){Mo(i,t,e,s,null)}function Mo(i,t,e,s,n){let o,a,r,l,c,d,h,u;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Ga;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){i.save(),i.translate(e,s),i.rotate(m),i.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),i.restore();return}if(!(isNaN(g)||g<=0)){switch(i.beginPath(),f){default:n?i.ellipse(e,s,n/2,g,0,0,z):i.arc(e,s,g,0,z),i.closePath();break;case"triangle":d=n?n/2:g,i.moveTo(e+Math.sin(m)*d,s-Math.cos(m)*g),m+=Ys,i.lineTo(e+Math.sin(m)*d,s-Math.cos(m)*g),m+=Ys,i.lineTo(e+Math.sin(m)*d,s-Math.cos(m)*g),i.closePath();break;case"rectRounded":c=g*.516,l=g-c,a=Math.cos(m+Ht)*l,h=Math.cos(m+Ht)*(n?n/2-c:l),r=Math.sin(m+Ht)*l,u=Math.sin(m+Ht)*(n?n/2-c:l),i.arc(e-h,s-r,c,m-E,m-Y),i.arc(e+u,s-a,c,m-Y,m),i.arc(e+h,s+r,c,m,m+Y),i.arc(e-u,s+a,c,m+Y,m+E),i.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,d=n?n/2:l,i.rect(e-d,s-l,2*d,2*l);break}m+=Ht;case"rectRot":h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+u,s-a),i.lineTo(e+h,s+r),i.lineTo(e-u,s+a),i.closePath();break;case"crossRot":m+=Ht;case"cross":h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+h,s+r),i.moveTo(e+u,s-a),i.lineTo(e-u,s+a);break;case"star":h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+h,s+r),i.moveTo(e+u,s-a),i.lineTo(e-u,s+a),m+=Ht,h=Math.cos(m)*(n?n/2:g),a=Math.cos(m)*g,r=Math.sin(m)*g,u=Math.sin(m)*(n?n/2:g),i.moveTo(e-h,s-r),i.lineTo(e+h,s+r),i.moveTo(e+u,s-a),i.lineTo(e-u,s+a);break;case"line":a=n?n/2:Math.cos(m)*g,r=Math.sin(m)*g,i.moveTo(e-a,s-r),i.lineTo(e+a,s+r);break;case"dash":i.moveTo(e,s),i.lineTo(e+Math.cos(m)*(n?n/2:g),s+Math.sin(m)*g);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Pt(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function Ci(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function Oi(i){i.restore()}function mr(i,t,e,s,n){if(!t)return i.lineTo(e.x,e.y);if(n==="middle"){const o=(t.x+e.x)/2;i.lineTo(o,t.y),i.lineTo(o,e.y)}else n==="after"!=!!s?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function br(i,t,e,s){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(s?t.cp1x:t.cp2x,s?t.cp1y:t.cp2y,s?e.cp2x:e.cp1x,s?e.cp2y:e.cp1y,e.x,e.y)}function yr(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),O(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function vr(i,t,e,s,n){if(n.strikethrough||n.underline){const o=i.measureText(s),a=t-o.actualBoundingBoxLeft,r=t+o.actualBoundingBoxRight,l=e-o.actualBoundingBoxAscent,c=e+o.actualBoundingBoxDescent,d=n.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=n.decorationWidth||2,i.moveTo(a,d),i.lineTo(r,d),i.stroke()}}function xr(i,t){const e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function Zt(i,t,e,s,n,o={}){const a=$(t)?t:[t],r=o.strokeWidth>0&&o.strokeColor!=="";let l,c;for(i.save(),i.font=n.string,yr(i,o),l=0;l<a.length;++l)c=a[l],o.backdrop&&xr(i,o.backdrop),r&&(o.strokeColor&&(i.strokeStyle=o.strokeColor),O(o.strokeWidth)||(i.lineWidth=o.strokeWidth),i.strokeText(c,e,s,o.maxWidth)),i.fillText(c,e,s,o.maxWidth),vr(i,e,s,c,o),s+=Number(n.lineHeight);i.restore()}function Be(i,t){const{x:e,y:s,w:n,h:o,radius:a}=t;i.arc(e+a.topLeft,s+a.topLeft,a.topLeft,1.5*E,E,!0),i.lineTo(e,s+o-a.bottomLeft),i.arc(e+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,E,Y,!0),i.lineTo(e+n-a.bottomRight,s+o),i.arc(e+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,Y,0,!0),i.lineTo(e+n,s+a.topRight),i.arc(e+n-a.topRight,s+a.topRight,a.topRight,0,-Y,!0),i.lineTo(e+a.topLeft,s)}const wr=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,_r=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function kr(i,t){const e=(""+i).match(wr);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}const Sr=i=>+i||0;function Ts(i,t){const e={},s=R(t),n=s?Object.keys(t):t,o=R(i)?s?a=>P(i[a],i[t[a]]):a=>i[a]:()=>i;for(const a of n)e[a]=Sr(o(a));return e}function To(i){return Ts(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Gt(i){return Ts(i,["topLeft","topRight","bottomLeft","bottomRight"])}function st(i){const t=To(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function X(i,t){i=i||{},t=t||H.font;let e=P(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let s=P(i.style,t.style);s&&!(""+s).match(_r)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:P(i.family,t.family),lineHeight:kr(P(i.lineHeight,t.lineHeight),e),size:e,style:s,weight:P(i.weight,t.weight),string:""};return n.string=gr(n),n}function xe(i,t,e,s){let n,o,a;for(n=0,o=i.length;n<o;++n)if(a=i[n],a!==void 0&&a!==void 0)return a}function Mr(i,t,e){const{min:s,max:n}=i,o=go(t,(n-s)/2),a=(r,l)=>e&&r===0?0:r+l;return{min:a(s,-Math.abs(o)),max:a(n,o)}}function zt(i,t){return Object.assign(Object.create(i),t)}function Ds(i,t=[""],e,s,n=()=>i[0]){const o=e||i;typeof s>"u"&&(s=Co("_fallback",i));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:o,_fallback:s,_getTarget:n,override:r=>Ds([r,...i],t,o,s)};return new Proxy(a,{deleteProperty(r,l){return delete r[l],delete r._keys,delete i[0][l],!0},get(r,l){return Po(r,l,()=>Er(l,t,i,r))},getOwnPropertyDescriptor(r,l){return Reflect.getOwnPropertyDescriptor(r._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(r,l){return en(r).includes(l)},ownKeys(r){return en(r)},set(r,l,c){const d=r._storage||(r._storage=n());return r[l]=d[l]=c,delete r._keys,!0}})}function re(i,t,e,s){const n={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:Do(i,s),setContext:o=>re(i,o,e,s),override:o=>re(i.override(o),t,e,s)};return new Proxy(n,{deleteProperty(o,a){return delete o[a],delete i[a],!0},get(o,a,r){return Po(o,a,()=>Dr(o,a,r))},getOwnPropertyDescriptor(o,a){return o._descriptors.allKeys?Reflect.has(i,a)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,a)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(o,a){return Reflect.has(i,a)},ownKeys(){return Reflect.ownKeys(i)},set(o,a,r){return i[a]=r,delete o[a],!0}})}function Do(i,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:s=t.indexable,_allKeys:n=t.allKeys}=i;return{allKeys:n,scriptable:e,indexable:s,isScriptable:Ft(e)?e:()=>e,isIndexable:Ft(s)?s:()=>s}}const Tr=(i,t)=>i?i+ws(t):t,Ps=(i,t)=>R(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function Po(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];const s=e();return i[t]=s,s}function Dr(i,t,e){const{_proxy:s,_context:n,_subProxy:o,_descriptors:a}=i;let r=s[t];return Ft(r)&&a.isScriptable(t)&&(r=Pr(t,r,i,e)),$(r)&&r.length&&(r=Ar(t,r,i,a.isIndexable)),Ps(t,r)&&(r=re(r,n,o&&o[t],a)),r}function Pr(i,t,e,s){const{_proxy:n,_context:o,_subProxy:a,_stack:r}=e;if(r.has(i))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+i);r.add(i);let l=t(o,a||s);return r.delete(i),Ps(i,l)&&(l=As(n._scopes,n,i,l)),l}function Ar(i,t,e,s){const{_proxy:n,_context:o,_subProxy:a,_descriptors:r}=e;if(typeof o.index<"u"&&s(i))return t[o.index%t.length];if(R(t[0])){const l=t,c=n._scopes.filter(d=>d!==l);t=[];for(const d of l){const h=As(c,n,i,d);t.push(re(h,o,a&&a[i],r))}}return t}function Ao(i,t,e){return Ft(i)?i(t,e):i}const Cr=(i,t)=>i===!0?t:typeof i=="string"?Bt(t,i):void 0;function Or(i,t,e,s,n){for(const o of t){const a=Cr(e,o);if(a){i.add(a);const r=Ao(a._fallback,e,n);if(typeof r<"u"&&r!==e&&r!==s)return r}else if(a===!1&&typeof s<"u"&&e!==s)return null}return!1}function As(i,t,e,s){const n=t._rootScopes,o=Ao(t._fallback,e,s),a=[...i,...n],r=new Set;r.add(s);let l=tn(r,a,e,o||e,s);return l===null||typeof o<"u"&&o!==e&&(l=tn(r,a,o,l,s),l===null)?!1:Ds(Array.from(r),[""],n,o,()=>Rr(t,e,s))}function tn(i,t,e,s,n){for(;e;)e=Or(i,t,e,s,n);return e}function Rr(i,t,e){const s=i._getTarget();t in s||(s[t]={});const n=s[t];return $(n)&&R(e)?e:n||{}}function Er(i,t,e,s){let n;for(const o of t)if(n=Co(Tr(o,i),e),typeof n<"u")return Ps(i,n)?As(e,s,i,n):n}function Co(i,t){for(const e of t){if(!e)continue;const s=e[i];if(typeof s<"u")return s}}function en(i){let t=i._keys;return t||(t=i._keys=Lr(i._scopes)),t}function Lr(i){const t=new Set;for(const e of i)for(const s of Object.keys(e).filter(n=>!n.startsWith("_")))t.add(s);return Array.from(t)}function Oo(i,t,e,s){const{iScale:n}=i,{key:o="r"}=this._parsing,a=new Array(s);let r,l,c,d;for(r=0,l=s;r<l;++r)c=r+e,d=t[c],a[r]={r:n.parse(Bt(d,o),c)};return a}const Ir=Number.EPSILON||1e-14,le=(i,t)=>t<i.length&&!i[t].skip&&i[t],Ro=i=>i==="x"?"y":"x";function Br(i,t,e,s){const n=i.skip?t:i,o=t,a=e.skip?t:e,r=Zi(o,n),l=Zi(a,o);let c=r/(r+l),d=l/(r+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const h=s*c,u=s*d;return{previous:{x:o.x-h*(a.x-n.x),y:o.y-h*(a.y-n.y)},next:{x:o.x+u*(a.x-n.x),y:o.y+u*(a.y-n.y)}}}function Fr(i,t,e){const s=i.length;let n,o,a,r,l,c=le(i,0);for(let d=0;d<s-1;++d)if(l=c,c=le(i,d+1),!(!l||!c)){if(Te(t[d],0,Ir)){e[d]=e[d+1]=0;continue}n=e[d]/t[d],o=e[d+1]/t[d],r=Math.pow(n,2)+Math.pow(o,2),!(r<=9)&&(a=3/Math.sqrt(r),e[d]=n*a*t[d],e[d+1]=o*a*t[d])}}function zr(i,t,e="x"){const s=Ro(e),n=i.length;let o,a,r,l=le(i,0);for(let c=0;c<n;++c){if(a=r,r=l,l=le(i,c+1),!r)continue;const d=r[e],h=r[s];a&&(o=(d-a[e])/3,r[`cp1${e}`]=d-o,r[`cp1${s}`]=h-o*t[c]),l&&(o=(l[e]-d)/3,r[`cp2${e}`]=d+o,r[`cp2${s}`]=h+o*t[c])}}function Nr(i,t="x"){const e=Ro(t),s=i.length,n=Array(s).fill(0),o=Array(s);let a,r,l,c=le(i,0);for(a=0;a<s;++a)if(r=l,l=c,c=le(i,a+1),!!l){if(c){const d=c[t]-l[t];n[a]=d!==0?(c[e]-l[e])/d:0}o[a]=r?c?yt(n[a-1])!==yt(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}Fr(i,n,o),zr(i,o,t)}function Je(i,t,e){return Math.max(Math.min(i,e),t)}function $r(i,t){let e,s,n,o,a,r=Pt(i[0],t);for(e=0,s=i.length;e<s;++e)a=o,o=r,r=e<s-1&&Pt(i[e+1],t),o&&(n=i[e],a&&(n.cp1x=Je(n.cp1x,t.left,t.right),n.cp1y=Je(n.cp1y,t.top,t.bottom)),r&&(n.cp2x=Je(n.cp2x,t.left,t.right),n.cp2y=Je(n.cp2y,t.top,t.bottom)))}function Hr(i,t,e,s,n){let o,a,r,l;if(t.spanGaps&&(i=i.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")Nr(i,n);else{let c=s?i[i.length-1]:i[0];for(o=0,a=i.length;o<a;++o)r=i[o],l=Br(c,r,i[Math.min(o+1,a-(s?0:1))%a],t.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,c=r}t.capBezierPoints&&$r(i,e)}function Cs(){return typeof window<"u"&&typeof document<"u"}function Os(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function vi(i,t,e){let s;return typeof i=="string"?(s=parseInt(i,10),i.indexOf("%")!==-1&&(s=s/100*t.parentNode[e])):s=i,s}const Ri=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function jr(i,t){return Ri(i).getPropertyValue(t)}const Wr=["top","right","bottom","left"];function Kt(i,t,e){const s={};e=e?"-"+e:"";for(let n=0;n<4;n++){const o=Wr[n];s[o]=parseFloat(i[t+"-"+o+e])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Vr=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function Yr(i,t){const e=i.touches,s=e&&e.length?e[0]:i,{offsetX:n,offsetY:o}=s;let a=!1,r,l;if(Vr(n,o,i.target))r=n,l=o;else{const c=t.getBoundingClientRect();r=s.clientX-c.left,l=s.clientY-c.top,a=!0}return{x:r,y:l,box:a}}function Yt(i,t){if("native"in i)return i;const{canvas:e,currentDevicePixelRatio:s}=t,n=Ri(e),o=n.boxSizing==="border-box",a=Kt(n,"padding"),r=Kt(n,"border","width"),{x:l,y:c,box:d}=Yr(i,e),h=a.left+(d&&r.left),u=a.top+(d&&r.top);let{width:f,height:p}=t;return o&&(f-=a.width+r.width,p-=a.height+r.height),{x:Math.round((l-h)/f*e.width/s),y:Math.round((c-u)/p*e.height/s)}}function Ur(i,t,e){let s,n;if(t===void 0||e===void 0){const o=i&&Os(i);if(!o)t=i.clientWidth,e=i.clientHeight;else{const a=o.getBoundingClientRect(),r=Ri(o),l=Kt(r,"border","width"),c=Kt(r,"padding");t=a.width-c.width-l.width,e=a.height-c.height-l.height,s=vi(r.maxWidth,o,"clientWidth"),n=vi(r.maxHeight,o,"clientHeight")}}return{width:t,height:e,maxWidth:s||bi,maxHeight:n||bi}}const Rt=i=>Math.round(i*10)/10;function qr(i,t,e,s){const n=Ri(i),o=Kt(n,"margin"),a=vi(n.maxWidth,i,"clientWidth")||bi,r=vi(n.maxHeight,i,"clientHeight")||bi,l=Ur(i,t,e);let{width:c,height:d}=l;if(n.boxSizing==="content-box"){const u=Kt(n,"border","width"),f=Kt(n,"padding");c-=f.width+u.width,d-=f.height+u.height}return c=Math.max(0,c-o.width),d=Math.max(0,s?c/s:d-o.height),c=Rt(Math.min(c,a,l.maxWidth)),d=Rt(Math.min(d,r,l.maxHeight)),c&&!d&&(d=Rt(c/2)),(t!==void 0||e!==void 0)&&s&&l.height&&d>l.height&&(d=l.height,c=Rt(Math.floor(d*s))),{width:c,height:d}}function sn(i,t,e){const s=t||1,n=Rt(i.height*s),o=Rt(i.width*s);i.height=Rt(i.height),i.width=Rt(i.width);const a=i.canvas;return a.style&&(e||!a.style.height&&!a.style.width)&&(a.style.height=`${i.height}px`,a.style.width=`${i.width}px`),i.currentDevicePixelRatio!==s||a.height!==n||a.width!==o?(i.currentDevicePixelRatio=s,a.height=n,a.width=o,i.ctx.setTransform(s,0,0,s,0,0),!0):!1}const Xr=function(){let i=!1;try{const t={get passive(){return i=!0,!1}};Cs()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function nn(i,t){const e=jr(i,t),s=e&&e.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ut(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function Gr(i,t,e,s){return{x:i.x+e*(t.x-i.x),y:s==="middle"?e<.5?i.y:t.y:s==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function Kr(i,t,e,s){const n={x:i.cp2x,y:i.cp2y},o={x:t.cp1x,y:t.cp1y},a=Ut(i,n,e),r=Ut(n,o,e),l=Ut(o,t,e),c=Ut(a,r,e),d=Ut(r,l,e);return Ut(c,d,e)}const Jr=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,s){return e-s},leftForLtr(e,s){return e-s}}},Zr=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function ne(i,t,e){return i?Jr(t,e):Zr()}function Eo(i,t){let e,s;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,s=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=s)}function Lo(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function Io(i){return i==="angle"?{between:Ie,compare:Qa,normalize:Z}:{between:Tt,compare:(t,e)=>t-e,normalize:t=>t}}function on({start:i,end:t,count:e,loop:s,style:n}){return{start:i%e,end:t%e,loop:s&&(t-i+1)%e===0,style:n}}function Qr(i,t,e){const{property:s,start:n,end:o}=e,{between:a,normalize:r}=Io(s),l=t.length;let{start:c,end:d,loop:h}=i,u,f;if(h){for(c+=l,d+=l,u=0,f=l;u<f&&a(r(t[c%l][s]),n,o);++u)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:h,style:i.style}}function Bo(i,t,e){if(!e)return[i];const{property:s,start:n,end:o}=e,a=t.length,{compare:r,between:l,normalize:c}=Io(s),{start:d,end:h,loop:u,style:f}=Qr(i,t,e),p=[];let g=!1,m=null,b,y,w;const x=()=>l(n,w,b)&&r(n,w)!==0,v=()=>r(o,b)===0||l(o,w,b),_=()=>g||x(),k=()=>!g||v();for(let S=d,T=d;S<=h;++S)y=t[S%a],!y.skip&&(b=c(y[s]),b!==w&&(g=l(b,n,o),m===null&&_()&&(m=r(b,n)===0?S:T),m!==null&&k()&&(p.push(on({start:m,end:S,loop:u,count:a,style:f})),m=null),T=S,w=b));return m!==null&&p.push(on({start:m,end:h,loop:u,count:a,style:f})),p}function Fo(i,t){const e=[],s=i.segments;for(let n=0;n<s.length;n++){const o=Bo(s[n],i.points,t);o.length&&e.push(...o)}return e}function tl(i,t,e,s){let n=0,o=t-1;if(e&&!s)for(;n<t&&!i[n].skip;)n++;for(;n<t&&i[n].skip;)n++;for(n%=t,e&&(o+=n);o>n&&i[o%t].skip;)o--;return o%=t,{start:n,end:o}}function el(i,t,e,s){const n=i.length,o=[];let a=t,r=i[t],l;for(l=t+1;l<=e;++l){const c=i[l%n];c.skip||c.stop?r.skip||(s=!1,o.push({start:t%n,end:(l-1)%n,loop:s}),t=a=c.stop?l:null):(a=l,r.skip&&(t=l)),r=c}return a!==null&&o.push({start:t%n,end:a%n,loop:s}),o}function il(i,t){const e=i.points,s=i.options.spanGaps,n=e.length;if(!n)return[];const o=!!i._loop,{start:a,end:r}=tl(e,n,o,s);if(s===!0)return an(i,[{start:a,end:r,loop:o}],e,t);const l=r<a?r+n:r,c=!!i._fullLoop&&a===0&&r===n-1;return an(i,el(e,a,l,c),e,t)}function an(i,t,e,s){return!s||!s.setContext||!e?t:sl(i,t,e,s)}function sl(i,t,e,s){const n=i._chart.getContext(),o=rn(i.options),{_datasetIndex:a,options:{spanGaps:r}}=i,l=e.length,c=[];let d=o,h=t[0].start,u=h;function f(p,g,m,b){const y=r?-1:1;if(p!==g){for(p+=l;e[p%l].skip;)p-=y;for(;e[g%l].skip;)g+=y;p%l!==g%l&&(c.push({start:p%l,end:g%l,loop:m,style:b}),d=b,h=g%l)}}for(const p of t){h=r?h:p.start;let g=e[h%l],m;for(u=h+1;u<=p.end;u++){const b=e[u%l];m=rn(s.setContext(zt(n,{type:"segment",p0:g,p1:b,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:a}))),nl(m,d)&&f(h,u-1,p.loop,d),g=b,d=m}h<u-1&&f(h,u-1,p.loop,d)}return c}function rn(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function nl(i,t){if(!t)return!1;const e=[],s=function(n,o){return Ms(o)?(e.includes(o)||e.push(o),e.indexOf(o)):o};return JSON.stringify(i,s)!==JSON.stringify(t,s)}function Ze(i,t,e){return i.options.clip?i[e]:t[e]}function ol(i,t){const{xScale:e,yScale:s}=i;return e&&s?{left:Ze(e,t,"left"),right:Ze(e,t,"right"),top:Ze(s,t,"top"),bottom:Ze(s,t,"bottom")}:t}function zo(i,t){const e=t._clip;if(e.disabled)return!1;const s=ol(t,i.chartArea);return{left:e.left===!1?0:s.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:s.right+(e.right===!0?0:e.right),top:e.top===!1?0:s.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:s.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class al{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,s,n){const o=e.listeners[n],a=e.duration;o.forEach(r=>r({chart:t,initial:e.initial,numSteps:a,currentStep:Math.min(s-e.start,a)}))}_refresh(){this._request||(this._running=!0,this._request=xo.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((s,n)=>{if(!s.running||!s.items.length)return;const o=s.items;let a=o.length-1,r=!1,l;for(;a>=0;--a)l=o[a],l._active?(l._total>s.duration&&(s.duration=l._total),l.tick(t),r=!0):(o[a]=o[o.length-1],o.pop());r&&(n.draw(),this._notify(n,s,t,"progress")),o.length||(s.running=!1,this._notify(n,s,t,"complete"),s.initial=!1),e+=o.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let s=e.get(t);return s||(s={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,s)),s}listen(t,e,s){this._getAnims(t).listeners[e].push(s)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((s,n)=>Math.max(s,n._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const s=e.items;let n=s.length-1;for(;n>=0;--n)s[n].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var xt=new al;const ln="transparent",rl={boolean(i,t,e){return e>.5?t:i},color(i,t,e){const s=Js(i||ln),n=s.valid&&Js(t||ln);return n&&n.valid?n.mix(s,e).hexString():t},number(i,t,e){return i+(t-i)*e}};class ll{constructor(t,e,s,n){const o=e[s];n=xe([t.to,n,o,t.from]);const a=xe([t.from,o,n]);this._active=!0,this._fn=t.fn||rl[t.type||typeof a],this._easing=De[t.easing]||De.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=s,this._from=a,this._to=n,this._promises=void 0}active(){return this._active}update(t,e,s){if(this._active){this._notify(!1);const n=this._target[this._prop],o=s-this._start,a=this._duration-o;this._start=s,this._duration=Math.floor(Math.max(a,t.duration)),this._total+=o,this._loop=!!t.loop,this._to=xe([t.to,e,n,t.from]),this._from=xe([t.from,n,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,s=this._duration,n=this._prop,o=this._from,a=this._loop,r=this._to;let l;if(this._active=o!==r&&(a||e<s),!this._active){this._target[n]=r,this._notify(!0);return}if(e<0){this._target[n]=o;return}l=e/s%2,l=a&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[n]=this._fn(o,r,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,s)=>{t.push({res:e,rej:s})})}_notify(t){const e=t?"res":"rej",s=this._promises||[];for(let n=0;n<s.length;n++)s[n][e]()}}class No{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!R(t))return;const e=Object.keys(H.animation),s=this._properties;Object.getOwnPropertyNames(t).forEach(n=>{const o=t[n];if(!R(o))return;const a={};for(const r of e)a[r]=o[r];($(o.properties)&&o.properties||[n]).forEach(r=>{(r===n||!s.has(r))&&s.set(r,a)})})}_animateOptions(t,e){const s=e.options,n=dl(t,s);if(!n)return[];const o=this._createAnimations(n,s);return s.$shared&&cl(t.options.$animations,s).then(()=>{t.options=s},()=>{}),o}_createAnimations(t,e){const s=this._properties,n=[],o=t.$animations||(t.$animations={}),a=Object.keys(e),r=Date.now();let l;for(l=a.length-1;l>=0;--l){const c=a[l];if(c.charAt(0)==="$")continue;if(c==="options"){n.push(...this._animateOptions(t,e));continue}const d=e[c];let h=o[c];const u=s.get(c);if(h)if(u&&h.active()){h.update(u,d,r);continue}else h.cancel();if(!u||!u.duration){t[c]=d;continue}o[c]=h=new ll(u,t,c,d),n.push(h)}return n}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const s=this._createAnimations(t,e);if(s.length)return xt.add(this._chart,s),!0}}function cl(i,t){const e=[],s=Object.keys(t);for(let n=0;n<s.length;n++){const o=i[s[n]];o&&o.active()&&e.push(o.wait())}return Promise.all(e)}function dl(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function cn(i,t){const e=i&&i.options||{},s=e.reverse,n=e.min===void 0?t:0,o=e.max===void 0?t:0;return{start:s?o:n,end:s?n:o}}function hl(i,t,e){if(e===!1)return!1;const s=cn(i,e),n=cn(t,e);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}function ul(i){let t,e,s,n;return R(i)?(t=i.top,e=i.right,s=i.bottom,n=i.left):t=e=s=n=i,{top:t,right:e,bottom:s,left:n,disabled:i===!1}}function $o(i,t){const e=[],s=i._getSortedDatasetMetas(t);let n,o;for(n=0,o=s.length;n<o;++n)e.push(s[n].index);return e}function dn(i,t,e,s={}){const n=i.keys,o=s.mode==="single";let a,r,l,c;if(t===null)return;let d=!1;for(a=0,r=n.length;a<r;++a){if(l=+n[a],l===e){if(d=!0,s.all)continue;break}c=i.values[l],j(c)&&(o||t===0||yt(t)===yt(c))&&(t+=c)}return!d&&!s.all?0:t}function fl(i,t){const{iScale:e,vScale:s}=t,n=e.axis==="x"?"x":"y",o=s.axis==="x"?"x":"y",a=Object.keys(i),r=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],r[l]={[n]:d,[o]:i[d]};return r}function Ni(i,t){const e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function gl(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function pl(i){const{min:t,max:e,minDefined:s,maxDefined:n}=i.getUserBounds();return{min:s?t:Number.NEGATIVE_INFINITY,max:n?e:Number.POSITIVE_INFINITY}}function ml(i,t,e){const s=i[t]||(i[t]={});return s[e]||(s[e]={})}function hn(i,t,e,s){for(const n of t.getMatchingVisibleMetas(s).reverse()){const o=i[n.index];if(e&&o>0||!e&&o<0)return n.index}return null}function un(i,t){const{chart:e,_cachedMeta:s}=i,n=e._stacks||(e._stacks={}),{iScale:o,vScale:a,index:r}=s,l=o.axis,c=a.axis,d=gl(o,a,s),h=t.length;let u;for(let f=0;f<h;++f){const p=t[f],{[l]:g,[c]:m}=p,b=p._stacks||(p._stacks={});u=b[c]=ml(n,d,g),u[r]=m,u._top=hn(u,a,!0,s.type),u._bottom=hn(u,a,!1,s.type);const y=u._visualValues||(u._visualValues={});y[r]=m}}function $i(i,t){const e=i.scales;return Object.keys(e).filter(s=>e[s].axis===t).shift()}function bl(i,t){return zt(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function yl(i,t,e){return zt(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function ge(i,t){const e=i.controller.index,s=i.vScale&&i.vScale.axis;if(s){t=t||i._parsed;for(const n of t){const o=n._stacks;if(!o||o[s]===void 0||o[s][e]===void 0)return;delete o[s][e],o[s]._visualValues!==void 0&&o[s]._visualValues[e]!==void 0&&delete o[s]._visualValues[e]}}}const Hi=i=>i==="reset"||i==="none",fn=(i,t)=>t?i:Object.assign({},i),vl=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:$o(e,!0),values:null};class gt{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ni(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&ge(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,s=this.getDataset(),n=(h,u,f,p)=>h==="x"?u:h==="r"?p:f,o=e.xAxisID=P(s.xAxisID,$i(t,"x")),a=e.yAxisID=P(s.yAxisID,$i(t,"y")),r=e.rAxisID=P(s.rAxisID,$i(t,"r")),l=e.indexAxis,c=e.iAxisID=n(l,o,a,r),d=e.vAxisID=n(l,a,o,r);e.xScale=this.getScaleForId(o),e.yScale=this.getScaleForId(a),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Xs(this._data,this),t._stacked&&ge(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),s=this._data;if(R(e)){const n=this._cachedMeta;this._data=fl(e,n)}else if(s!==e){if(s){Xs(s,this);const n=this._cachedMeta;ge(n),n._parsed=[]}e&&Object.isExtensible(e)&&sr(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,s=this.getDataset();let n=!1;this._dataCheck();const o=e._stacked;e._stacked=Ni(e.vScale,e),e.stack!==s.stack&&(n=!0,ge(e),e.stack=s.stack),this._resyncElements(t),(n||o!==e._stacked)&&(un(this,e._parsed),e._stacked=Ni(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),s=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(s,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:s,_data:n}=this,{iScale:o,_stacked:a}=s,r=o.axis;let l=t===0&&e===n.length?!0:s._sorted,c=t>0&&s._parsed[t-1],d,h,u;if(this._parsing===!1)s._parsed=n,s._sorted=!0,u=n;else{$(n[t])?u=this.parseArrayData(s,n,t,e):R(n[t])?u=this.parseObjectData(s,n,t,e):u=this.parsePrimitiveData(s,n,t,e);const f=()=>h[r]===null||c&&h[r]<c[r];for(d=0;d<e;++d)s._parsed[d+t]=h=u[d],l&&(f()&&(l=!1),c=h);s._sorted=l}a&&un(this,u)}parsePrimitiveData(t,e,s,n){const{iScale:o,vScale:a}=t,r=o.axis,l=a.axis,c=o.getLabels(),d=o===a,h=new Array(n);let u,f,p;for(u=0,f=n;u<f;++u)p=u+s,h[u]={[r]:d||o.parse(c[p],p),[l]:a.parse(e[p],p)};return h}parseArrayData(t,e,s,n){const{xScale:o,yScale:a}=t,r=new Array(n);let l,c,d,h;for(l=0,c=n;l<c;++l)d=l+s,h=e[d],r[l]={x:o.parse(h[0],d),y:a.parse(h[1],d)};return r}parseObjectData(t,e,s,n){const{xScale:o,yScale:a}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=new Array(n);let d,h,u,f;for(d=0,h=n;d<h;++d)u=d+s,f=e[u],c[d]={x:o.parse(Bt(f,r),u),y:a.parse(Bt(f,l),u)};return c}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,s){const n=this.chart,o=this._cachedMeta,a=e[t.axis],r={keys:$o(n,!0),values:e._stacks[t.axis]._visualValues};return dn(r,a,o.index,{mode:s})}updateRangeFromParsed(t,e,s,n){const o=s[e.axis];let a=o===null?NaN:o;const r=n&&s._stacks[e.axis];n&&r&&(n.values=r,a=dn(n,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,e){const s=this._cachedMeta,n=s._parsed,o=s._sorted&&t===s.iScale,a=n.length,r=this._getOtherScale(t),l=vl(e,s,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=pl(r);let u,f;function p(){f=n[u];const g=f[r.axis];return!j(f[t.axis])||d>g||h<g}for(u=0;u<a&&!(!p()&&(this.updateRangeFromParsed(c,t,f,l),o));++u);if(o){for(u=a-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(c,t,f,l);break}}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,s=[];let n,o,a;for(n=0,o=e.length;n<o;++n)a=e[n][t.axis],j(a)&&s.push(a);return s}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,s=e.iScale,n=e.vScale,o=this.getParsed(t);return{label:s?""+s.getLabelForValue(o[s.axis]):"",value:n?""+n.getLabelForValue(o[n.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=ul(P(this.options.clip,hl(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,s=this._cachedMeta,n=s.data||[],o=e.chartArea,a=[],r=this._drawStart||0,l=this._drawCount||n.length-r,c=this.options.drawActiveElementsOnTop;let d;for(s.dataset&&s.dataset.draw(t,o,r,l),d=r;d<r+l;++d){const h=n[d];h.hidden||(h.active&&c?a.push(h):h.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,e){const s=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(s):this.resolveDataElementOptions(t||0,s)}getContext(t,e,s){const n=this.getDataset();let o;if(t>=0&&t<this._cachedMeta.data.length){const a=this._cachedMeta.data[t];o=a.$context||(a.$context=yl(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=n.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=bl(this.chart.getContext(),this.index)),o.dataset=n,o.index=o.datasetIndex=this.index;return o.active=!!e,o.mode=s,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",s){const n=e==="active",o=this._cachedDataOpts,a=t+"-"+e,r=o[a],l=this.enableOptionSharing&&Le(s);if(r)return fn(r,l);const c=this.chart.config,d=c.datasetElementScopeKeys(this._type,t),h=n?[`${t}Hover`,"hover",t,""]:[t,""],u=c.getOptionScopes(this.getDataset(),d),f=Object.keys(H.elements[t]),p=()=>this.getContext(s,n,e),g=c.resolveNamedOptions(u,f,p,h);return g.$shared&&(g.$shared=l,o[a]=Object.freeze(fn(g,l))),g}_resolveAnimations(t,e,s){const n=this.chart,o=this._cachedDataOpts,a=`animation-${e}`,r=o[a];if(r)return r;let l;if(n.options.animation!==!1){const d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,e),u=d.getOptionScopes(this.getDataset(),h);l=d.createResolver(u,this.getContext(t,s,e))}const c=new No(n,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(c)),c}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Hi(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const s=this.resolveDataElementOptions(t,e),n=this._sharedOptions,o=this.getSharedOptions(s),a=this.includeOptions(e,o)||o!==n;return this.updateSharedOptions(o,e,s),{sharedOptions:o,includeOptions:a}}updateElement(t,e,s,n){Hi(n)?Object.assign(t,s):this._resolveAnimations(e,n).update(t,s)}updateSharedOptions(t,e,s){t&&!Hi(e)&&this._resolveAnimations(void 0,e).update(t,s)}_setStyle(t,e,s,n){t.active=n;const o=this.getStyle(e,n);this._resolveAnimations(e,s,n).update(t,{options:!n&&this.getSharedOptions(o)||o})}removeHoverStyle(t,e,s){this._setStyle(t,s,"active",!1)}setHoverStyle(t,e,s){this._setStyle(t,s,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,s=this._cachedMeta.data;for(const[r,l,c]of this._syncList)this[r](l,c);this._syncList=[];const n=s.length,o=e.length,a=Math.min(o,n);a&&this.parse(0,a),o>n?this._insertElements(n,o-n,t):o<n&&this._removeElements(o,n-o)}_insertElements(t,e,s=!0){const n=this._cachedMeta,o=n.data,a=t+e;let r;const l=c=>{for(c.length+=e,r=c.length-1;r>=a;r--)c[r]=c[r-e]};for(l(o),r=t;r<a;++r)o[r]=new this.dataElementType;this._parsing&&l(n._parsed),this.parse(t,e),s&&this.updateElements(o,t,e,"reset")}updateElements(t,e,s,n){}_removeElements(t,e){const s=this._cachedMeta;if(this._parsing){const n=s._parsed.splice(t,e);s._stacked&&ge(s,n)}s.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,s,n]=t;this[e](s,n)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const s=arguments.length-2;s&&this._sync(["_insertElements",t,s])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}M(gt,"defaults",{}),M(gt,"datasetElementType",null),M(gt,"dataElementType",null);function xl(i,t){if(!i._cache.$bar){const e=i.getMatchingVisibleMetas(t);let s=[];for(let n=0,o=e.length;n<o;n++)s=s.concat(e[n].controller.getAllParsedValues(i));i._cache.$bar=vo(s.sort((n,o)=>n-o))}return i._cache.$bar}function wl(i){const t=i.iScale,e=xl(t,i.type);let s=t._length,n,o,a,r;const l=()=>{a===32767||a===-32768||(Le(r)&&(s=Math.min(s,Math.abs(a-r)||s)),r=a)};for(n=0,o=e.length;n<o;++n)a=t.getPixelForValue(e[n]),l();for(r=void 0,n=0,o=t.ticks.length;n<o;++n)a=t.getPixelForTick(n),l();return s}function _l(i,t,e,s){const n=e.barThickness;let o,a;return O(n)?(o=t.min*e.categoryPercentage,a=e.barPercentage):(o=n*s,a=1),{chunk:o/s,ratio:a,start:t.pixels[i]-o/2}}function kl(i,t,e,s){const n=t.pixels,o=n[i];let a=i>0?n[i-1]:null,r=i<n.length-1?n[i+1]:null;const l=e.categoryPercentage;a===null&&(a=o-(r===null?t.end-t.start:r-o)),r===null&&(r=o+o-a);const c=o-(o-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/s,ratio:e.barPercentage,start:c}}function Sl(i,t,e,s){const n=e.parse(i[0],s),o=e.parse(i[1],s),a=Math.min(n,o),r=Math.max(n,o);let l=a,c=r;Math.abs(a)>Math.abs(r)&&(l=r,c=a),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:n,end:o,min:a,max:r}}function Ho(i,t,e,s){return $(i)?Sl(i,t,e,s):t[e.axis]=e.parse(i,s),t}function gn(i,t,e,s){const n=i.iScale,o=i.vScale,a=n.getLabels(),r=n===o,l=[];let c,d,h,u;for(c=e,d=e+s;c<d;++c)u=t[c],h={},h[n.axis]=r||n.parse(a[c],c),l.push(Ho(u,h,o,c));return l}function ji(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function Ml(i,t,e){return i!==0?yt(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function Tl(i){let t,e,s,n,o;return i.horizontal?(t=i.base>i.x,e="left",s="right"):(t=i.base<i.y,e="bottom",s="top"),t?(n="end",o="start"):(n="start",o="end"),{start:e,end:s,reverse:t,top:n,bottom:o}}function Dl(i,t,e,s){let n=t.borderSkipped;const o={};if(!n){i.borderSkipped=o;return}if(n===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:a,end:r,reverse:l,top:c,bottom:d}=Tl(i);n==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===s?n=c:(e._bottom||0)===s?n=d:(o[pn(d,a,r,l)]=!0,n=c)),o[pn(n,a,r,l)]=!0,i.borderSkipped=o}function pn(i,t,e,s){return s?(i=Pl(i,t,e),i=mn(i,e,t)):i=mn(i,t,e),i}function Pl(i,t,e){return i===t?e:i===e?t:i}function mn(i,t,e){return i==="start"?t:i==="end"?e:i}function Al(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}class ai extends gt{parsePrimitiveData(t,e,s,n){return gn(t,e,s,n)}parseArrayData(t,e,s,n){return gn(t,e,s,n)}parseObjectData(t,e,s,n){const{iScale:o,vScale:a}=t,{xAxisKey:r="x",yAxisKey:l="y"}=this._parsing,c=o.axis==="x"?r:l,d=a.axis==="x"?r:l,h=[];let u,f,p,g;for(u=s,f=s+n;u<f;++u)g=e[u],p={},p[o.axis]=o.parse(Bt(g,c),u),h.push(Ho(Bt(g,d),p,a,u));return h}updateRangeFromParsed(t,e,s,n){super.updateRangeFromParsed(t,e,s,n);const o=s._custom;o&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:s,vScale:n}=e,o=this.getParsed(t),a=o._custom,r=ji(a)?"["+a.start+", "+a.end+"]":""+n.getLabelForValue(o[n.axis]);return{label:""+s.getLabelForValue(o[s.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,s,n){const o=n==="reset",{index:a,_cachedMeta:{vScale:r}}=this,l=r.getBasePixel(),c=r.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,n);for(let f=e;f<e+s;f++){const p=this.getParsed(f),g=o||O(p[r.axis])?{base:l,head:l}:this._calculateBarValuePixels(f),m=this._calculateBarIndexPixels(f,d),b=(p._stacks||{})[r.axis],y={horizontal:c,base:g.base,enableBorderRadius:!b||ji(p._custom)||a===b._top||a===b._bottom,x:c?g.head:m.center,y:c?m.center:g.head,height:c?m.size:Math.abs(g.size),width:c?Math.abs(g.size):m.size};u&&(y.options=h||this.resolveDataElementOptions(f,t[f].active?"active":n));const w=y.options||t[f].options;Dl(y,w,b,a),Al(y,w,d.ratio),this.updateElement(t[f],f,y,n)}}_getStacks(t,e){const{iScale:s}=this._cachedMeta,n=s.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=s.options.stacked,a=[],r=this._cachedMeta.controller.getParsed(e),l=r&&r[s.axis],c=d=>{const h=d._parsed.find(f=>f[s.axis]===l),u=h&&h[d.vScale.axis];if(O(u)||isNaN(u))return!0};for(const d of n)if(!(e!==void 0&&c(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(s=>t[s].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const s of this.chart.data.datasets)t[P(this.chart.options.indexAxis==="x"?s.xAxisID:s.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,s){const n=this._getStacks(t,s),o=e!==void 0?n.indexOf(e):-1;return o===-1?n.length-1:o}_getRuler(){const t=this.options,e=this._cachedMeta,s=e.iScale,n=[];let o,a;for(o=0,a=e.data.length;o<a;++o)n.push(s.getPixelForValue(this.getParsed(o)[s.axis],o));const r=t.barThickness;return{min:r||wl(e),pixels:n,start:s._startPixel,end:s._endPixel,stackCount:this._getStackCount(),scale:s,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:s,index:n},options:{base:o,minBarLength:a}}=this,r=o||0,l=this.getParsed(t),c=l._custom,d=ji(c);let h=l[e.axis],u=0,f=s?this.applyStack(e,l,s):h,p,g;f!==h&&(u=f-h,f=h),d&&(h=c.barStart,f=c.barEnd-c.barStart,h!==0&&yt(h)!==yt(c.barEnd)&&(u=0),u+=h);const m=!O(o)&&!d?o:u;let b=e.getPixelForValue(m);if(this.chart.getDataVisibility(t)?p=e.getPixelForValue(u+f):p=b,g=p-b,Math.abs(g)<a){g=Ml(g,e,r)*a,h===r&&(b-=g/2);const y=e.getPixelForDecimal(0),w=e.getPixelForDecimal(1),x=Math.min(y,w),v=Math.max(y,w);b=Math.max(Math.min(b,v),x),p=b+g,s&&!d&&(l._stacks[e.axis]._visualValues[n]=e.getValueForPixel(p)-e.getValueForPixel(b))}if(b===e.getPixelForValue(r)){const y=yt(g)*e.getLineWidthForValue(r)/2;b+=y,g-=y}return{size:g,base:b,head:p,center:p+g/2}}_calculateBarIndexPixels(t,e){const s=e.scale,n=this.options,o=n.skipNull,a=P(n.maxBarThickness,1/0);let r,l;const c=this._getAxisCount();if(e.grouped){const d=o?this._getStackCount(t):e.stackCount,h=n.barThickness==="flex"?kl(t,e,n,d*c):_l(t,e,n,d*c),u=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,f=this._getAxis().indexOf(P(u,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0)+f;r=h.start+h.chunk*p+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else r=s.getPixelForValue(this.getParsed(t)[s.axis],t),l=Math.min(a,e.min*e.ratio);return{base:r-l/2,head:r+l/2,center:r,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,s=t.data,n=s.length;let o=0;for(;o<n;++o)this.getParsed(o)[e.axis]!==null&&!s[o].hidden&&s[o].draw(this._ctx)}}M(ai,"id","bar"),M(ai,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),M(ai,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class ri extends gt{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,s,n){const o=super.parsePrimitiveData(t,e,s,n);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+s).radius;return o}parseArrayData(t,e,s,n){const o=super.parseArrayData(t,e,s,n);for(let a=0;a<o.length;a++){const r=e[s+a];o[a]._custom=P(r[2],this.resolveDataElementOptions(a+s).radius)}return o}parseObjectData(t,e,s,n){const o=super.parseObjectData(t,e,s,n);for(let a=0;a<o.length;a++){const r=e[s+a];o[a]._custom=P(r&&r.r&&+r.r,this.resolveDataElementOptions(a+s).radius)}return o}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let s=t.length-1;s>=0;--s)e=Math.max(e,t[s].size(this.resolveDataElementOptions(s))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=e,a=this.getParsed(t),r=n.getLabelForValue(a.x),l=o.getLabelForValue(a.y),c=a._custom;return{label:s[t]||"",value:"("+r+", "+l+(c?", "+c:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,s,n){const o=n==="reset",{iScale:a,vScale:r}=this._cachedMeta,{sharedOptions:l,includeOptions:c}=this._getSharedOptions(e,n),d=a.axis,h=r.axis;for(let u=e;u<e+s;u++){const f=t[u],p=!o&&this.getParsed(u),g={},m=g[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(p[d]),b=g[h]=o?r.getBasePixel():r.getPixelForValue(p[h]);g.skip=isNaN(m)||isNaN(b),c&&(g.options=l||this.resolveDataElementOptions(u,f.active?"active":n),o&&(g.options.radius=0)),this.updateElement(f,u,g,n)}}resolveDataElementOptions(t,e){const s=this.getParsed(t);let n=super.resolveDataElementOptions(t,e);n.$shared&&(n=Object.assign({},n,{$shared:!1}));const o=n.radius;return e!=="active"&&(n.radius=0),n.radius+=P(s&&s._custom,o),n}}M(ri,"id","bubble"),M(ri,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),M(ri,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});function Cl(i,t,e){let s=1,n=1,o=0,a=0;if(t<z){const r=i,l=r+t,c=Math.cos(r),d=Math.sin(r),h=Math.cos(l),u=Math.sin(l),f=(w,x,v)=>Ie(w,r,l,!0)?1:Math.max(x,x*e,v,v*e),p=(w,x,v)=>Ie(w,r,l,!0)?-1:Math.min(x,x*e,v,v*e),g=f(0,c,h),m=f(Y,d,u),b=p(E,c,h),y=p(E+Y,d,u);s=(g-b)/2,n=(m-y)/2,o=-(g+b)/2,a=-(m+y)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:a}}class qt extends gt{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const s=this.getDataset().data,n=this._cachedMeta;if(this._parsing===!1)n._parsed=s;else{let o=l=>+s[l];if(R(s[t])){const{key:l="value"}=this._parsing;o=c=>+Bt(s[c],l)}let a,r;for(a=t,r=t+e;a<r;++a)n._parsed[a]=o(a)}}_getRotation(){return ft(this.options.rotation-90)}_getCircumference(){return ft(this.options.circumference)}_getRotationExtents(){let t=z,e=-z;for(let s=0;s<this.chart.data.datasets.length;++s)if(this.chart.isDatasetVisible(s)&&this.chart.getDatasetMeta(s).type===this._type){const n=this.chart.getDatasetMeta(s).controller,o=n._getRotation(),a=n._getCircumference();t=Math.min(t,o),e=Math.max(e,o+a)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:s}=e,n=this._cachedMeta,o=n.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,r=Math.max((Math.min(s.width,s.height)-a)/2,0),l=Math.min(ja(this.options.cutout,r),1),c=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:u,ratioY:f,offsetX:p,offsetY:g}=Cl(h,d,l),m=(s.width-a)/u,b=(s.height-a)/f,y=Math.max(Math.min(m,b)/2,0),w=go(this.options.radius,y),x=Math.max(w*l,0),v=(w-x)/this._getVisibleDatasetWeightTotal();this.offsetX=p*w,this.offsetY=g*w,n.total=this.calculateTotal(),this.outerRadius=w-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(o,0,o.length,t)}_circumference(t,e){const s=this.options,n=this._cachedMeta,o=this._getCircumference();return e&&s.animation.animateRotate||!this.chart.getDataVisibility(t)||n._parsed[t]===null||n.data[t].hidden?0:this.calculateCircumference(n._parsed[t]*o/z)}updateElements(t,e,s,n){const o=n==="reset",a=this.chart,r=a.chartArea,c=a.options.animation,d=(r.left+r.right)/2,h=(r.top+r.bottom)/2,u=o&&c.animateScale,f=u?0:this.innerRadius,p=u?0:this.outerRadius,{sharedOptions:g,includeOptions:m}=this._getSharedOptions(e,n);let b=this._getRotation(),y;for(y=0;y<e;++y)b+=this._circumference(y,o);for(y=e;y<e+s;++y){const w=this._circumference(y,o),x=t[y],v={x:d+this.offsetX,y:h+this.offsetY,startAngle:b,endAngle:b+w,circumference:w,outerRadius:p,innerRadius:f};m&&(v.options=g||this.resolveDataElementOptions(y,x.active?"active":n)),b+=w,this.updateElement(x,y,v,n)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let s=0,n;for(n=0;n<e.length;n++){const o=t._parsed[n];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(n)&&!e[n].hidden&&(s+=Math.abs(o))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?z*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=Ve(e._parsed[t],s.options.locale);return{label:n[t]||"",value:o}}getMaxBorderWidth(t){let e=0;const s=this.chart;let n,o,a,r,l;if(!t){for(n=0,o=s.data.datasets.length;n<o;++n)if(s.isDatasetVisible(n)){a=s.getDatasetMeta(n),t=a.data,r=a.controller;break}}if(!t)return 0;for(n=0,o=t.length;n<o;++n)l=r.resolveDataElementOptions(n),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let s=0,n=t.length;s<n;++s){const o=this.resolveDataElementOptions(s);e=Math.max(e,o.offset||0,o.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let s=0;s<t;++s)this.chart.isDatasetVisible(s)&&(e+=this._getRingWeight(s));return e}_getRingWeight(t){return Math.max(P(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}M(qt,"id","doughnut"),M(qt,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),M(qt,"descriptors",{_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),M(qt,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,c)=>{const h=t.getDatasetMeta(0).controller.getStyle(c);return{text:l,fillStyle:h.backgroundColor,fontColor:o,hidden:!t.getDataVisibility(c),lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:h.borderWidth,strokeStyle:h.borderColor,textAlign:n,pointStyle:s,borderRadius:a&&(r||h.borderRadius),index:c}}):[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}}});class li extends gt{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:s,data:n=[],_dataset:o}=e,a=this.chart._animationsDisabled;let{start:r,count:l}=_o(e,n,a);this._drawStart=r,this._drawCount=l,ko(e)&&(r=0,l=n.length),s._chart=this.chart,s._datasetIndex=this.index,s._decimated=!!o._decimated,s.points=n;const c=this.resolveDatasetElementOptions(t);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(s,void 0,{animated:!a,options:c},t),this.updateElements(n,r,l,t)}updateElements(t,e,s,n){const o=n==="reset",{iScale:a,vScale:r,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(e,n),u=a.axis,f=r.axis,{spanGaps:p,segment:g}=this.options,m=ae(p)?p:Number.POSITIVE_INFINITY,b=this.chart._animationsDisabled||o||n==="none",y=e+s,w=t.length;let x=e>0&&this.getParsed(e-1);for(let v=0;v<w;++v){const _=t[v],k=b?_:{};if(v<e||v>=y){k.skip=!0;continue}const S=this.getParsed(v),T=O(S[f]),A=k[u]=a.getPixelForValue(S[u],v),D=k[f]=o||T?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,S,l):S[f],v);k.skip=isNaN(A)||isNaN(D)||T,k.stop=v>0&&Math.abs(S[u]-x[u])>m,g&&(k.parsed=S,k.raw=c.data[v]),h&&(k.options=d||this.resolveDataElementOptions(v,_.active?"active":n)),b||this.updateElement(_,v,k,n),x=S}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,s=e.options&&e.options.borderWidth||0,n=t.data||[];if(!n.length)return s;const o=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,a)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}M(li,"id","line"),M(li,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),M(li,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ae extends gt{constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,s=this.chart,n=s.data.labels||[],o=Ve(e._parsed[t].r,s.options.locale);return{label:n[t]||"",value:o}}parseObjectData(t,e,s,n){return Oo.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((s,n)=>{const o=this.getParsed(n).r;!isNaN(o)&&this.chart.getDataVisibility(n)&&(o<e.min&&(e.min=o),o>e.max&&(e.max=o))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,s=t.options,n=Math.min(e.right-e.left,e.bottom-e.top),o=Math.max(n/2,0),a=Math.max(s.cutoutPercentage?o/100*s.cutoutPercentage:1,0),r=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-r*this.index,this.innerRadius=this.outerRadius-r}updateElements(t,e,s,n){const o=n==="reset",a=this.chart,l=a.options.animation,c=this._cachedMeta.rScale,d=c.xCenter,h=c.yCenter,u=c.getIndexAngle(0)-.5*E;let f=u,p;const g=360/this.countVisibleElements();for(p=0;p<e;++p)f+=this._computeAngle(p,n,g);for(p=e;p<e+s;p++){const m=t[p];let b=f,y=f+this._computeAngle(p,n,g),w=a.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;f=y,o&&(l.animateScale&&(w=0),l.animateRotate&&(b=y=u));const x={x:d,y:h,innerRadius:0,outerRadius:w,startAngle:b,endAngle:y,options:this.resolveDataElementOptions(p,m.active?"active":n)};this.updateElement(m,p,x,n)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((s,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,s){return this.chart.getDataVisibility(t)?ft(this.resolveDataElementOptions(t,e).angle||s):0}}M(Ae,"id","polarArea"),M(Ae,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),M(Ae,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:s,color:n}}=t.legend.options;return e.labels.map((o,a)=>{const l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:n,lineWidth:l.borderWidth,pointStyle:s,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,e,s){s.chart.toggleDataVisibility(e.index),s.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class es extends qt{}M(es,"id","pie"),M(es,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ci extends gt{getLabelAndValue(t){const e=this._cachedMeta.vScale,s=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(s[e.axis])}}parseObjectData(t,e,s,n){return Oo.bind(this)(t,e,s,n)}update(t){const e=this._cachedMeta,s=e.dataset,n=e.data||[],o=e.iScale.getLabels();if(s.points=n,t!=="resize"){const a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);const r={_loop:!0,_fullLoop:o.length===n.length,options:a};this.updateElement(s,void 0,r,t)}this.updateElements(n,0,n.length,t)}updateElements(t,e,s,n){const o=this._cachedMeta.rScale,a=n==="reset";for(let r=e;r<e+s;r++){const l=t[r],c=this.resolveDataElementOptions(r,l.active?"active":n),d=o.getPointPositionForValue(r,this.getParsed(r).r),h=a?o.xCenter:d.x,u=a?o.yCenter:d.y,f={x:h,y:u,angle:d.angle,skip:isNaN(h)||isNaN(u),options:c};this.updateElement(l,r,f,n)}}}M(ci,"id","radar"),M(ci,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),M(ci,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class di extends gt{getLabelAndValue(t){const e=this._cachedMeta,s=this.chart.data.labels||[],{xScale:n,yScale:o}=e,a=this.getParsed(t),r=n.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:s[t]||"",value:"("+r+", "+l+")"}}update(t){const e=this._cachedMeta,{data:s=[]}=e,n=this.chart._animationsDisabled;let{start:o,count:a}=_o(e,s,n);if(this._drawStart=o,this._drawCount=a,ko(e)&&(o=0,a=s.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:l}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!l._decimated,r.points=s;const c=this.resolveDatasetElementOptions(t);c.segment=this.options.segment,this.updateElement(r,void 0,{animated:!n,options:c},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(s,o,a,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,s,n){const o=n==="reset",{iScale:a,vScale:r,_stacked:l,_dataset:c}=this._cachedMeta,d=this.resolveDataElementOptions(e,n),h=this.getSharedOptions(d),u=this.includeOptions(n,h),f=a.axis,p=r.axis,{spanGaps:g,segment:m}=this.options,b=ae(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||n==="none";let w=e>0&&this.getParsed(e-1);for(let x=e;x<e+s;++x){const v=t[x],_=this.getParsed(x),k=y?v:{},S=O(_[p]),T=k[f]=a.getPixelForValue(_[f],x),A=k[p]=o||S?r.getBasePixel():r.getPixelForValue(l?this.applyStack(r,_,l):_[p],x);k.skip=isNaN(T)||isNaN(A)||S,k.stop=x>0&&Math.abs(_[f]-w[f])>b,m&&(k.parsed=_,k.raw=c.data[x]),u&&(k.options=h||this.resolveDataElementOptions(x,v.active?"active":n)),y||this.updateElement(v,x,k,n),w=_}this.updateSharedOptions(h,n,d)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let r=0;for(let l=e.length-1;l>=0;--l)r=Math.max(r,e[l].size(this.resolveDataElementOptions(l))/2);return r>0&&r}const s=t.dataset,n=s.options&&s.options.borderWidth||0;if(!e.length)return n;const o=e[0].size(this.resolveDataElementOptions(0)),a=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(n,o,a)/2}}M(di,"id","scatter"),M(di,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),M(di,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var Ol=Object.freeze({__proto__:null,BarController:ai,BubbleController:ri,DoughnutController:qt,LineController:li,PieController:es,PolarAreaController:Ae,RadarController:ci,ScatterController:di});function Wt(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Rs{constructor(t){M(this,"options");this.options=t||{}}static override(t){Object.assign(Rs.prototype,t)}init(){}formats(){return Wt()}parse(){return Wt()}format(){return Wt()}add(){return Wt()}diff(){return Wt()}startOf(){return Wt()}endOf(){return Wt()}}var Rl={_date:Rs};function El(i,t,e,s){const{controller:n,data:o,_sorted:a}=i,r=n._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(r&&t===r.axis&&t!=="r"&&a&&o.length){const c=r._reversePixels?er:Dt;if(s){if(n._sharedOptions){const d=o[0],h=typeof d.getRange=="function"&&d.getRange(t);if(h){const u=c(o,t,e-h),f=c(o,t,e+h);return{lo:u.lo,hi:f.hi}}}}else{const d=c(o,t,e);if(l){const{vScale:h}=n._cachedMeta,{_parsed:u}=i,f=u.slice(0,d.lo+1).reverse().findIndex(g=>!O(g[h.axis]));d.lo-=Math.max(0,f);const p=u.slice(d.hi).findIndex(g=>!O(g[h.axis]));d.hi+=Math.max(0,p)}return d}}return{lo:0,hi:o.length-1}}function Ei(i,t,e,s,n){const o=i.getSortedVisibleDatasetMetas(),a=e[t];for(let r=0,l=o.length;r<l;++r){const{index:c,data:d}=o[r],{lo:h,hi:u}=El(o[r],t,a,n);for(let f=h;f<=u;++f){const p=d[f];p.skip||s(p,c,f)}}}function Ll(i){const t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(s,n){const o=t?Math.abs(s.x-n.x):0,a=e?Math.abs(s.y-n.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(a,2))}}function Wi(i,t,e,s,n){const o=[];return!n&&!i.isPointInArea(t)||Ei(i,e,t,function(r,l,c){!n&&!Pt(r,i.chartArea,0)||r.inRange(t.x,t.y,s)&&o.push({element:r,datasetIndex:l,index:c})},!0),o}function Il(i,t,e,s){let n=[];function o(a,r,l){const{startAngle:c,endAngle:d}=a.getProps(["startAngle","endAngle"],s),{angle:h}=bo(a,{x:t.x,y:t.y});Ie(h,c,d)&&n.push({element:a,datasetIndex:r,index:l})}return Ei(i,e,t,o),n}function Bl(i,t,e,s,n,o){let a=[];const r=Ll(e);let l=Number.POSITIVE_INFINITY;function c(d,h,u){const f=d.inRange(t.x,t.y,n);if(s&&!f)return;const p=d.getCenterPoint(n);if(!(!!o||i.isPointInArea(p))&&!f)return;const m=r(t,p);m<l?(a=[{element:d,datasetIndex:h,index:u}],l=m):m===l&&a.push({element:d,datasetIndex:h,index:u})}return Ei(i,e,t,c),a}function Vi(i,t,e,s,n,o){return!o&&!i.isPointInArea(t)?[]:e==="r"&&!s?Il(i,t,e,n):Bl(i,t,e,s,n,o)}function bn(i,t,e,s,n){const o=[],a=e==="x"?"inXRange":"inYRange";let r=!1;return Ei(i,e,t,(l,c,d)=>{l[a]&&l[a](t[e],n)&&(o.push({element:l,datasetIndex:c,index:d}),r=r||l.inRange(t.x,t.y,n))}),s&&!r?[]:o}var Fl={modes:{index(i,t,e,s){const n=Yt(t,i),o=e.axis||"x",a=e.includeInvisible||!1,r=e.intersect?Wi(i,n,o,s,a):Vi(i,n,o,!1,s,a),l=[];return r.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{const d=r[0].index,h=c.data[d];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:d})}),l):[]},dataset(i,t,e,s){const n=Yt(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;let r=e.intersect?Wi(i,n,o,s,a):Vi(i,n,o,!1,s,a);if(r.length>0){const l=r[0].datasetIndex,c=i.getDatasetMeta(l).data;r=[];for(let d=0;d<c.length;++d)r.push({element:c[d],datasetIndex:l,index:d})}return r},point(i,t,e,s){const n=Yt(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;return Wi(i,n,o,s,a)},nearest(i,t,e,s){const n=Yt(t,i),o=e.axis||"xy",a=e.includeInvisible||!1;return Vi(i,n,o,e.intersect,s,a)},x(i,t,e,s){const n=Yt(t,i);return bn(i,n,"x",e.intersect,s)},y(i,t,e,s){const n=Yt(t,i);return bn(i,n,"y",e.intersect,s)}}};const jo=["left","top","right","bottom"];function pe(i,t){return i.filter(e=>e.pos===t)}function yn(i,t){return i.filter(e=>jo.indexOf(e.pos)===-1&&e.box.axis===t)}function me(i,t){return i.sort((e,s)=>{const n=t?s:e,o=t?e:s;return n.weight===o.weight?n.index-o.index:n.weight-o.weight})}function zl(i){const t=[];let e,s,n,o,a,r;for(e=0,s=(i||[]).length;e<s;++e)n=i[e],{position:o,options:{stack:a,stackWeight:r=1}}=n,t.push({index:e,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&o+a,stackWeight:r});return t}function Nl(i){const t={};for(const e of i){const{stack:s,pos:n,stackWeight:o}=e;if(!s||!jo.includes(n))continue;const a=t[s]||(t[s]={count:0,placed:0,weight:0,size:0});a.count++,a.weight+=o}return t}function $l(i,t){const e=Nl(i),{vBoxMaxWidth:s,hBoxMaxHeight:n}=t;let o,a,r;for(o=0,a=i.length;o<a;++o){r=i[o];const{fullSize:l}=r.box,c=e[r.stack],d=c&&r.stackWeight/c.weight;r.horizontal?(r.width=d?d*s:l&&t.availableWidth,r.height=n):(r.width=s,r.height=d?d*n:l&&t.availableHeight)}return e}function Hl(i){const t=zl(i),e=me(t.filter(c=>c.box.fullSize),!0),s=me(pe(t,"left"),!0),n=me(pe(t,"right")),o=me(pe(t,"top"),!0),a=me(pe(t,"bottom")),r=yn(t,"x"),l=yn(t,"y");return{fullSize:e,leftAndTop:s.concat(o),rightAndBottom:n.concat(l).concat(a).concat(r),chartArea:pe(t,"chartArea"),vertical:s.concat(n).concat(l),horizontal:o.concat(a).concat(r)}}function vn(i,t,e,s){return Math.max(i[e],t[e])+Math.max(i[s],t[s])}function Wo(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function jl(i,t,e,s){const{pos:n,box:o}=e,a=i.maxPadding;if(!R(n)){e.size&&(i[n]-=e.size);const h=s[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?o.height:o.width),e.size=h.size/h.count,i[n]+=e.size}o.getPadding&&Wo(a,o.getPadding());const r=Math.max(0,t.outerWidth-vn(a,i,"left","right")),l=Math.max(0,t.outerHeight-vn(a,i,"top","bottom")),c=r!==i.w,d=l!==i.h;return i.w=r,i.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function Wl(i){const t=i.maxPadding;function e(s){const n=Math.max(t[s]-i[s],0);return i[s]+=n,n}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function Vl(i,t){const e=t.maxPadding;function s(n){const o={left:0,top:0,right:0,bottom:0};return n.forEach(a=>{o[a]=Math.max(t[a],e[a])}),o}return s(i?["left","right"]:["top","bottom"])}function we(i,t,e,s){const n=[];let o,a,r,l,c,d;for(o=0,a=i.length,c=0;o<a;++o){r=i[o],l=r.box,l.update(r.width||t.w,r.height||t.h,Vl(r.horizontal,t));const{same:h,other:u}=jl(t,e,r,s);c|=h&&n.length,d=d||u,l.fullSize||n.push(r)}return c&&we(n,t,e,s)||d}function Qe(i,t,e,s,n){i.top=e,i.left=t,i.right=t+s,i.bottom=e+n,i.width=s,i.height=n}function xn(i,t,e,s){const n=e.padding;let{x:o,y:a}=t;for(const r of i){const l=r.box,c=s[r.stack]||{placed:0,weight:1},d=r.stackWeight/c.weight||1;if(r.horizontal){const h=t.w*d,u=c.size||l.height;Le(c.start)&&(a=c.start),l.fullSize?Qe(l,n.left,a,e.outerWidth-n.right-n.left,u):Qe(l,t.left+c.placed,a,h,u),c.start=a,c.placed+=h,a=l.bottom}else{const h=t.h*d,u=c.size||l.width;Le(c.start)&&(o=c.start),l.fullSize?Qe(l,o,n.top,u,e.outerHeight-n.bottom-n.top):Qe(l,o,t.top+c.placed,u,h),c.start=o,c.placed+=h,o=l.right}}t.x=o,t.y=a}var it={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){const e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,s){if(!i)return;const n=st(i.options.layout.padding),o=Math.max(t-n.width,0),a=Math.max(e-n.height,0),r=Hl(i.boxes),l=r.vertical,c=r.horizontal;I(i.boxes,g=>{typeof g.beforeLayout=="function"&&g.beforeLayout()});const d=l.reduce((g,m)=>m.box.options&&m.box.options.display===!1?g:g+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/d,hBoxMaxHeight:a/2}),u=Object.assign({},n);Wo(u,st(s));const f=Object.assign({maxPadding:u,w:o,h:a,x:n.left,y:n.top},n),p=$l(l.concat(c),h);we(r.fullSize,f,h,p),we(l,f,h,p),we(c,f,h,p)&&we(l,f,h,p),Wl(f),xn(r.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,xn(r.rightAndBottom,f,h,p),i.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},I(r.chartArea,g=>{const m=g.box;Object.assign(m,i.chartArea),m.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class Vo{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,s){}removeEventListener(t,e,s){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,s,n){return e=Math.max(0,e||t.width),s=s||t.height,{width:e,height:Math.max(0,n?Math.floor(e/n):s)}}isAttached(t){return!0}updateConfig(t){}}class Yl extends Vo{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const hi="$chartjs",Ul={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},wn=i=>i===null||i==="";function ql(i,t){const e=i.style,s=i.getAttribute("height"),n=i.getAttribute("width");if(i[hi]={initial:{height:s,width:n,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",wn(n)){const o=nn(i,"width");o!==void 0&&(i.width=o)}if(wn(s))if(i.style.height==="")i.height=i.width/(t||2);else{const o=nn(i,"height");o!==void 0&&(i.height=o)}return i}const Yo=Xr?{passive:!0}:!1;function Xl(i,t,e){i&&i.addEventListener(t,e,Yo)}function Gl(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,Yo)}function Kl(i,t){const e=Ul[i.type]||i.type,{x:s,y:n}=Yt(i,t);return{type:e,chart:t,native:i,x:s!==void 0?s:null,y:n!==void 0?n:null}}function xi(i,t){for(const e of i)if(e===t||e.contains(t))return!0}function Jl(i,t,e){const s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(const r of o)a=a||xi(r.addedNodes,s),a=a&&!xi(r.removedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}function Zl(i,t,e){const s=i.canvas,n=new MutationObserver(o=>{let a=!1;for(const r of o)a=a||xi(r.removedNodes,s),a=a&&!xi(r.addedNodes,s);a&&e()});return n.observe(document,{childList:!0,subtree:!0}),n}const Fe=new Map;let _n=0;function Uo(){const i=window.devicePixelRatio;i!==_n&&(_n=i,Fe.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function Ql(i,t){Fe.size||window.addEventListener("resize",Uo),Fe.set(i,t)}function tc(i){Fe.delete(i),Fe.size||window.removeEventListener("resize",Uo)}function ec(i,t,e){const s=i.canvas,n=s&&Os(s);if(!n)return;const o=wo((r,l)=>{const c=n.clientWidth;e(r,l),c<n.clientWidth&&e()},window),a=new ResizeObserver(r=>{const l=r[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||o(c,d)});return a.observe(n),Ql(i,o),a}function Yi(i,t,e){e&&e.disconnect(),t==="resize"&&tc(i)}function ic(i,t,e){const s=i.canvas,n=wo(o=>{i.ctx!==null&&e(Kl(o,i))},i);return Xl(s,t,n),n}class sc extends Vo{acquireContext(t,e){const s=t&&t.getContext&&t.getContext("2d");return s&&s.canvas===t?(ql(t,e),s):null}releaseContext(t){const e=t.canvas;if(!e[hi])return!1;const s=e[hi].initial;["height","width"].forEach(o=>{const a=s[o];O(a)?e.removeAttribute(o):e.setAttribute(o,a)});const n=s.style||{};return Object.keys(n).forEach(o=>{e.style[o]=n[o]}),e.width=e.width,delete e[hi],!0}addEventListener(t,e,s){this.removeEventListener(t,e);const n=t.$proxies||(t.$proxies={}),a={attach:Jl,detach:Zl,resize:ec}[e]||ic;n[e]=a(t,e,s)}removeEventListener(t,e){const s=t.$proxies||(t.$proxies={}),n=s[e];if(!n)return;({attach:Yi,detach:Yi,resize:Yi}[e]||Gl)(t,e,n),s[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,s,n){return qr(t,e,s,n)}isAttached(t){const e=t&&Os(t);return!!(e&&e.isConnected)}}function nc(i){return!Cs()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?Yl:sc}class pt{constructor(){M(this,"x");M(this,"y");M(this,"active",!1);M(this,"options");M(this,"$animations")}tooltipPosition(t){const{x:e,y:s}=this.getProps(["x","y"],t);return{x:e,y:s}}hasValue(){return ae(this.x)&&ae(this.y)}getProps(t,e){const s=this.$animations;if(!e||!s)return this;const n={};return t.forEach(o=>{n[o]=s[o]&&s[o].active()?s[o]._to:this[o]}),n}}M(pt,"defaults",{}),M(pt,"defaultRoutes");function oc(i,t){const e=i.options.ticks,s=ac(i),n=Math.min(e.maxTicksLimit||s,s),o=e.major.enabled?lc(t):[],a=o.length,r=o[0],l=o[a-1],c=[];if(a>n)return cc(t,c,o,a/n),c;const d=rc(o,t,n);if(a>0){let h,u;const f=a>1?Math.round((l-r)/(a-1)):null;for(ti(t,c,d,O(f)?0:r-f,r),h=0,u=a-1;h<u;h++)ti(t,c,d,o[h],o[h+1]);return ti(t,c,d,l,O(f)?t.length:l+f),c}return ti(t,c,d),c}function ac(i){const t=i.options.offset,e=i._tickSize(),s=i._length/e+(t?0:1),n=i._maxLength/e;return Math.floor(Math.min(s,n))}function rc(i,t,e){const s=dc(i),n=t.length/e;if(!s)return Math.max(n,1);const o=Ka(s);for(let a=0,r=o.length-1;a<r;a++){const l=o[a];if(l>n)return l}return Math.max(n,1)}function lc(i){const t=[];let e,s;for(e=0,s=i.length;e<s;e++)i[e].major&&t.push(e);return t}function cc(i,t,e,s){let n=0,o=e[0],a;for(s=Math.ceil(s),a=0;a<i.length;a++)a===o&&(t.push(i[a]),n++,o=e[n*s])}function ti(i,t,e,s,n){const o=P(s,0),a=Math.min(P(n,i.length),i.length);let r=0,l,c,d;for(e=Math.ceil(e),n&&(l=n-s,e=l/Math.floor(l/e)),d=o;d<0;)r++,d=Math.round(o+r*e);for(c=Math.max(o,0);c<a;c++)c===d&&(t.push(i[c]),r++,d=Math.round(o+r*e))}function dc(i){const t=i.length;let e,s;if(t<2)return!1;for(s=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==s)return!1;return s}const hc=i=>i==="left"?"right":i==="right"?"left":i,kn=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,Sn=(i,t)=>Math.min(t||i,i);function Mn(i,t){const e=[],s=i.length/t,n=i.length;let o=0;for(;o<n;o+=s)e.push(i[Math.floor(o)]);return e}function uc(i,t,e){const s=i.ticks.length,n=Math.min(t,s-1),o=i._startPixel,a=i._endPixel,r=1e-6;let l=i.getPixelForTick(n),c;if(!(e&&(s===1?c=Math.max(l-o,a-l):t===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(n-1))/2,l+=n<t?c:-c,l<o-r||l>a+r)))return l}function fc(i,t){I(i,e=>{const s=e.gc,n=s.length/2;let o;if(n>t){for(o=0;o<n;++o)delete e.data[s[o]];s.splice(0,n)}})}function be(i){return i.drawTicks?i.tickLength:0}function Tn(i,t){if(!i.display)return 0;const e=X(i.font,t),s=st(i.padding);return($(i.text)?i.text.length:1)*e.lineHeight+s.height}function gc(i,t){return zt(i,{scale:t,type:"scale"})}function pc(i,t,e){return zt(i,{tick:e,index:t,type:"tick"})}function mc(i,t,e){let s=Ss(i);return(e&&t!=="right"||!e&&t==="right")&&(s=hc(s)),s}function bc(i,t,e,s){const{top:n,left:o,bottom:a,right:r,chart:l}=i,{chartArea:c,scales:d}=l;let h=0,u,f,p;const g=a-n,m=r-o;if(i.isHorizontal()){if(f=J(s,o,r),R(e)){const b=Object.keys(e)[0],y=e[b];p=d[b].getPixelForValue(y)+g-t}else e==="center"?p=(c.bottom+c.top)/2+g-t:p=kn(i,e,t);u=r-o}else{if(R(e)){const b=Object.keys(e)[0],y=e[b];f=d[b].getPixelForValue(y)-m+t}else e==="center"?f=(c.left+c.right)/2-m+t:f=kn(i,e,t);p=J(s,a,n),h=e==="left"?-Y:Y}return{titleX:f,titleY:p,maxWidth:u,rotation:h}}class Qt extends pt{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:s,_suggestedMax:n}=this;return t=rt(t,Number.POSITIVE_INFINITY),e=rt(e,Number.NEGATIVE_INFINITY),s=rt(s,Number.POSITIVE_INFINITY),n=rt(n,Number.NEGATIVE_INFINITY),{min:rt(t,s),max:rt(e,n),minDefined:j(t),maxDefined:j(e)}}getMinMax(t){let{min:e,max:s,minDefined:n,maxDefined:o}=this.getUserBounds(),a;if(n&&o)return{min:e,max:s};const r=this.getMatchingVisibleMetas();for(let l=0,c=r.length;l<c;++l)a=r[l].controller.getMinMax(this,t),n||(e=Math.min(e,a.min)),o||(s=Math.max(s,a.max));return e=o&&e>s?s:e,s=n&&e>s?e:s,{min:rt(e,rt(s,e)),max:rt(s,rt(e,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){F(this.options.beforeUpdate,[this])}update(t,e,s){const{beginAtZero:n,grace:o,ticks:a}=this.options,r=a.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=s=Object.assign({left:0,right:0,top:0,bottom:0},s),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+s.left+s.right:this.height+s.top+s.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Mr(this,o,n),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=r<this.ticks.length;this._convertTicksToLabels(l?Mn(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),a.display&&(a.autoSkip||a.source==="auto")&&(this.ticks=oc(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,s;this.isHorizontal()?(e=this.left,s=this.right):(e=this.top,s=this.bottom,t=!t),this._startPixel=e,this._endPixel=s,this._reversePixels=t,this._length=s-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){F(this.options.afterUpdate,[this])}beforeSetDimensions(){F(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){F(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),F(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){F(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s],o.label=F(e.callback,[o.value,s,t],this)}afterTickToLabelConversion(){F(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){F(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,s=Sn(this.ticks.length,t.ticks.maxTicksLimit),n=e.minRotation||0,o=e.maxRotation;let a=n,r,l,c;if(!this._isVisible()||!e.display||n>=o||s<=1||!this.isHorizontal()){this.labelRotation=n;return}const d=this._getLabelSizes(),h=d.widest.width,u=d.highest.height,f=G(this.chart.width-h,0,this.maxWidth);r=t.offset?this.maxWidth/s:f/(s-1),h+6>r&&(r=f/(s-(t.offset?.5:1)),l=this.maxHeight-be(t.grid)-e.padding-Tn(t.title,this.chart.options.font),c=Math.sqrt(h*h+u*u),a=_s(Math.min(Math.asin(G((d.highest.height+6)/r,-1,1)),Math.asin(G(l/c,-1,1))-Math.asin(G(u/c,-1,1)))),a=Math.max(n,Math.min(o,a))),this.labelRotation=a}afterCalculateLabelRotation(){F(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){F(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:s,title:n,grid:o}}=this,a=this._isVisible(),r=this.isHorizontal();if(a){const l=Tn(n,e.options.font);if(r?(t.width=this.maxWidth,t.height=be(o)+l):(t.height=this.maxHeight,t.width=be(o)+l),s.display&&this.ticks.length){const{first:c,last:d,widest:h,highest:u}=this._getLabelSizes(),f=s.padding*2,p=ft(this.labelRotation),g=Math.cos(p),m=Math.sin(p);if(r){const b=s.mirror?0:m*h.width+g*u.height;t.height=Math.min(this.maxHeight,t.height+b+f)}else{const b=s.mirror?0:g*h.width+m*u.height;t.width=Math.min(this.maxWidth,t.width+b+f)}this._calculatePadding(c,d,m,g)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,s,n){const{ticks:{align:o,padding:a},position:r}=this.options,l=this.labelRotation!==0,c=r!=="top"&&this.axis==="x";if(this.isHorizontal()){const d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,f=0;l?c?(u=n*t.width,f=s*e.height):(u=s*t.height,f=n*e.width):o==="start"?f=e.width:o==="end"?u=t.width:o!=="inner"&&(u=t.width/2,f=e.width/2),this.paddingLeft=Math.max((u-d+a)*this.width/(this.width-d),0),this.paddingRight=Math.max((f-h+a)*this.width/(this.width-h),0)}else{let d=e.height/2,h=t.height/2;o==="start"?(d=0,h=t.height):o==="end"&&(d=e.height,h=0),this.paddingTop=d+a,this.paddingBottom=h+a}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){F(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,s;for(e=0,s=t.length;e<s;e++)O(t[e].label)&&(t.splice(e,1),s--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let s=this.ticks;e<s.length&&(s=Mn(s,e)),this._labelSizes=t=this._computeLabelSizes(s,s.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,s){const{ctx:n,_longestTextCache:o}=this,a=[],r=[],l=Math.floor(e/Sn(e,s));let c=0,d=0,h,u,f,p,g,m,b,y,w,x,v;for(h=0;h<e;h+=l){if(p=t[h].label,g=this._resolveTickFontOptions(h),n.font=m=g.string,b=o[m]=o[m]||{data:{},gc:[]},y=g.lineHeight,w=x=0,!O(p)&&!$(p))w=yi(n,b.data,b.gc,w,p),x=y;else if($(p))for(u=0,f=p.length;u<f;++u)v=p[u],!O(v)&&!$(v)&&(w=yi(n,b.data,b.gc,w,v),x+=y);a.push(w),r.push(x),c=Math.max(w,c),d=Math.max(x,d)}fc(o,e);const _=a.indexOf(c),k=r.indexOf(d),S=T=>({width:a[T]||0,height:r[T]||0});return{first:S(0),last:S(e-1),widest:S(_),highest:S(k),widths:a,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return tr(this._alignToPixels?jt(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const s=e[t];return s.$context||(s.$context=pc(this.getContext(),t,s))}return this.$context||(this.$context=gc(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=ft(this.labelRotation),s=Math.abs(Math.cos(e)),n=Math.abs(Math.sin(e)),o=this._getLabelSizes(),a=t.autoSkipPadding||0,r=o?o.widest.width+a:0,l=o?o.highest.height+a:0;return this.isHorizontal()?l*s>r*n?r/s:l/n:l*n<r*s?l/s:r/n}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,s=this.chart,n=this.options,{grid:o,position:a,border:r}=n,l=o.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),u=be(o),f=[],p=r.setContext(this.getContext()),g=p.display?p.width:0,m=g/2,b=function(N){return jt(s,N,g)};let y,w,x,v,_,k,S,T,A,D,C,q;if(a==="top")y=b(this.bottom),k=this.bottom-u,T=y-m,D=b(t.top)+m,q=t.bottom;else if(a==="bottom")y=b(this.top),D=t.top,q=b(t.bottom)-m,k=y+m,T=this.top+u;else if(a==="left")y=b(this.right),_=this.right-u,S=y-m,A=b(t.left)+m,C=t.right;else if(a==="right")y=b(this.left),A=t.left,C=b(t.right)-m,_=y+m,S=this.left+u;else if(e==="x"){if(a==="center")y=b((t.top+t.bottom)/2+.5);else if(R(a)){const N=Object.keys(a)[0],V=a[N];y=b(this.chart.scales[N].getPixelForValue(V))}D=t.top,q=t.bottom,k=y+m,T=k+u}else if(e==="y"){if(a==="center")y=b((t.left+t.right)/2);else if(R(a)){const N=Object.keys(a)[0],V=a[N];y=b(this.chart.scales[N].getPixelForValue(V))}_=y-m,S=_-u,A=t.left,C=t.right}const at=P(n.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/at));for(w=0;w<h;w+=B){const N=this.getContext(w),V=o.setContext(N),ut=r.setContext(N),K=V.lineWidth,te=V.color,Ue=ut.dash||[],ee=ut.dashOffset,ue=V.tickWidth,Nt=V.tickColor,fe=V.tickBorderDash||[],$t=V.tickBorderDashOffset;x=uc(this,w,l),x!==void 0&&(v=jt(s,x,K),c?_=S=A=C=v:k=T=D=q=v,f.push({tx1:_,ty1:k,tx2:S,ty2:T,x1:A,y1:D,x2:C,y2:q,width:K,color:te,borderDash:Ue,borderDashOffset:ee,tickWidth:ue,tickColor:Nt,tickBorderDash:fe,tickBorderDashOffset:$t}))}return this._ticksLength=h,this._borderValue=y,f}_computeLabelItems(t){const e=this.axis,s=this.options,{position:n,ticks:o}=s,a=this.isHorizontal(),r=this.ticks,{align:l,crossAlign:c,padding:d,mirror:h}=o,u=be(s.grid),f=u+d,p=h?-d:f,g=-ft(this.labelRotation),m=[];let b,y,w,x,v,_,k,S,T,A,D,C,q="middle";if(n==="top")_=this.bottom-p,k=this._getXAxisLabelAlignment();else if(n==="bottom")_=this.top+p,k=this._getXAxisLabelAlignment();else if(n==="left"){const B=this._getYAxisLabelAlignment(u);k=B.textAlign,v=B.x}else if(n==="right"){const B=this._getYAxisLabelAlignment(u);k=B.textAlign,v=B.x}else if(e==="x"){if(n==="center")_=(t.top+t.bottom)/2+f;else if(R(n)){const B=Object.keys(n)[0],N=n[B];_=this.chart.scales[B].getPixelForValue(N)+f}k=this._getXAxisLabelAlignment()}else if(e==="y"){if(n==="center")v=(t.left+t.right)/2-f;else if(R(n)){const B=Object.keys(n)[0],N=n[B];v=this.chart.scales[B].getPixelForValue(N)}k=this._getYAxisLabelAlignment(u).textAlign}e==="y"&&(l==="start"?q="top":l==="end"&&(q="bottom"));const at=this._getLabelSizes();for(b=0,y=r.length;b<y;++b){w=r[b],x=w.label;const B=o.setContext(this.getContext(b));S=this.getPixelForTick(b)+o.labelOffset,T=this._resolveTickFontOptions(b),A=T.lineHeight,D=$(x)?x.length:1;const N=D/2,V=B.color,ut=B.textStrokeColor,K=B.textStrokeWidth;let te=k;a?(v=S,k==="inner"&&(b===y-1?te=this.options.reverse?"left":"right":b===0?te=this.options.reverse?"right":"left":te="center"),n==="top"?c==="near"||g!==0?C=-D*A+A/2:c==="center"?C=-at.highest.height/2-N*A+A:C=-at.highest.height+A/2:c==="near"||g!==0?C=A/2:c==="center"?C=at.highest.height/2-N*A:C=at.highest.height-D*A,h&&(C*=-1),g!==0&&!B.showLabelBackdrop&&(v+=A/2*Math.sin(g))):(_=S,C=(1-D)*A/2);let Ue;if(B.showLabelBackdrop){const ee=st(B.backdropPadding),ue=at.heights[b],Nt=at.widths[b];let fe=C-ee.top,$t=0-ee.left;switch(q){case"middle":fe-=ue/2;break;case"bottom":fe-=ue;break}switch(k){case"center":$t-=Nt/2;break;case"right":$t-=Nt;break;case"inner":b===y-1?$t-=Nt:b>0&&($t-=Nt/2);break}Ue={left:$t,top:fe,width:Nt+ee.width,height:ue+ee.height,color:B.backdropColor}}m.push({label:x,font:T,textOffset:C,options:{rotation:g,color:V,strokeColor:ut,strokeWidth:K,textAlign:te,textBaseline:q,translation:[v,_],backdrop:Ue}})}return m}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ft(this.labelRotation))return t==="top"?"left":"right";let n="center";return e.align==="start"?n="left":e.align==="end"?n="right":e.align==="inner"&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:s,mirror:n,padding:o}}=this.options,a=this._getLabelSizes(),r=t+o,l=a.widest.width;let c,d;return e==="left"?n?(d=this.right+o,s==="near"?c="left":s==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-r,s==="near"?c="right":s==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?n?(d=this.left+o,s==="near"?c="right":s==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+r,s==="near"?c="left":s==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:s,top:n,width:o,height:a}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(s,n,o,a),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(o=>o.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,s=this.ctx,n=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let o,a;const r=(l,c,d)=>{!d.width||!d.color||(s.save(),s.lineWidth=d.width,s.strokeStyle=d.color,s.setLineDash(d.borderDash||[]),s.lineDashOffset=d.borderDashOffset,s.beginPath(),s.moveTo(l.x,l.y),s.lineTo(c.x,c.y),s.stroke(),s.restore())};if(e.display)for(o=0,a=n.length;o<a;++o){const l=n[o];e.drawOnChartArea&&r({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&r({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:s,grid:n}}=this,o=s.setContext(this.getContext()),a=s.display?o.width:0;if(!a)return;const r=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,d,h,u;this.isHorizontal()?(c=jt(t,this.left,a)-a/2,d=jt(t,this.right,r)+r/2,h=u=l):(h=jt(t,this.top,a)-a/2,u=jt(t,this.bottom,r)+r/2,c=d=l),e.save(),e.lineWidth=o.width,e.strokeStyle=o.color,e.beginPath(),e.moveTo(c,h),e.lineTo(d,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const s=this.ctx,n=this._computeLabelArea();n&&Ci(s,n);const o=this.getLabelItems(t);for(const a of o){const r=a.options,l=a.font,c=a.label,d=a.textOffset;Zt(s,c,0,d,l,r)}n&&Oi(s)}drawTitle(){const{ctx:t,options:{position:e,title:s,reverse:n}}=this;if(!s.display)return;const o=X(s.font),a=st(s.padding),r=s.align;let l=o.lineHeight/2;e==="bottom"||e==="center"||R(e)?(l+=a.bottom,$(s.text)&&(l+=o.lineHeight*(s.text.length-1))):l+=a.top;const{titleX:c,titleY:d,maxWidth:h,rotation:u}=bc(this,l,e,r);Zt(t,s.text,0,0,o,{color:s.color,maxWidth:h,rotation:u,textAlign:mc(r,e,n),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,s=P(t.grid&&t.grid.z,-1),n=P(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Qt.prototype.draw?[{z:e,draw:o=>{this.draw(o)}}]:[{z:s,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:n,draw:()=>{this.drawBorder()}},{z:e,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),s=this.axis+"AxisID",n=[];let o,a;for(o=0,a=e.length;o<a;++o){const r=e[o];r[s]===this.id&&(!t||r.type===t)&&n.push(r)}return n}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return X(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class ei{constructor(t,e,s){this.type=t,this.scope=e,this.override=s,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let s;xc(e)&&(s=this.register(e));const n=this.items,o=t.id,a=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+t);return o in n||(n[o]=t,yc(t,a,s),this.override&&H.override(t.id,t.overrides)),a}get(t){return this.items[t]}unregister(t){const e=this.items,s=t.id,n=this.scope;s in e&&delete e[s],n&&s in H[n]&&(delete H[n][s],this.override&&delete Jt[s])}}function yc(i,t,e){const s=Ee(Object.create(null),[e?H.get(e):{},H.get(t),i.defaults]);H.set(t,s),i.defaultRoutes&&vc(t,i.defaultRoutes),i.descriptors&&H.describe(t,i.descriptors)}function vc(i,t){Object.keys(t).forEach(e=>{const s=e.split("."),n=s.pop(),o=[i].concat(s).join("."),a=t[e].split("."),r=a.pop(),l=a.join(".");H.route(o,n,l,r)})}function xc(i){return"id"in i&&"defaults"in i}class wc{constructor(){this.controllers=new ei(gt,"datasets",!0),this.elements=new ei(pt,"elements"),this.plugins=new ei(Object,"plugins"),this.scales=new ei(Qt,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,s){[...e].forEach(n=>{const o=s||this._getRegistryForType(n);s||o.isForType(n)||o===this.plugins&&n.id?this._exec(t,o,n):I(n,a=>{const r=s||this._getRegistryForType(a);this._exec(t,r,a)})})}_exec(t,e,s){const n=ws(t);F(s["before"+n],[],s),e[t](s),F(s["after"+n],[],s)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const s=this._typedRegistries[e];if(s.isForType(t))return s}return this.plugins}_get(t,e,s){const n=e.get(t);if(n===void 0)throw new Error('"'+t+'" is not a registered '+s+".");return n}}var bt=new wc;class _c{constructor(){this._init=void 0}notify(t,e,s,n){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const o=n?this._descriptors(t).filter(n):this._descriptors(t),a=this._notify(o,t,e,s);return e==="afterDestroy"&&(this._notify(o,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),a}_notify(t,e,s,n){n=n||{};for(const o of t){const a=o.plugin,r=a[s],l=[e,n,o.options];if(F(r,l,a)===!1&&n.cancelable)return!1}return!0}invalidate(){O(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const s=t&&t.config,n=P(s.options&&s.options.plugins,{}),o=kc(s);return n===!1&&!e?[]:Mc(t,o,n,e)}_notifyStateChanges(t){const e=this._oldCache||[],s=this._cache,n=(o,a)=>o.filter(r=>!a.some(l=>r.plugin.id===l.plugin.id));this._notify(n(e,s),t,"stop"),this._notify(n(s,e),t,"start")}}function kc(i){const t={},e=[],s=Object.keys(bt.plugins.items);for(let o=0;o<s.length;o++)e.push(bt.getPlugin(s[o]));const n=i.plugins||[];for(let o=0;o<n.length;o++){const a=n[o];e.indexOf(a)===-1&&(e.push(a),t[a.id]=!0)}return{plugins:e,localIds:t}}function Sc(i,t){return!t&&i===!1?null:i===!0?{}:i}function Mc(i,{plugins:t,localIds:e},s,n){const o=[],a=i.getContext();for(const r of t){const l=r.id,c=Sc(s[l],n);c!==null&&o.push({plugin:r,options:Tc(i.config,{plugin:r,local:e[l]},c,a)})}return o}function Tc(i,{plugin:t,local:e},s,n){const o=i.pluginScopeKeys(t),a=i.getOptionScopes(s,o);return e&&t.defaults&&a.push(t.defaults),i.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function is(i,t){const e=H.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Dc(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function Pc(i,t){return i===t?"_index_":"_value_"}function Dn(i){if(i==="x"||i==="y"||i==="r")return i}function Ac(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function ss(i,...t){if(Dn(i))return i;for(const e of t){const s=e.axis||Ac(e.position)||i.length>1&&Dn(i[0].toLowerCase());if(s)return s}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function Pn(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function Cc(i,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(s=>s.xAxisID===i||s.yAxisID===i);if(e.length)return Pn(i,"x",e[0])||Pn(i,"y",e[0])}return{}}function Oc(i,t){const e=Jt[i.type]||{scales:{}},s=t.scales||{},n=is(i.type,t),o=Object.create(null);return Object.keys(s).forEach(a=>{const r=s[a];if(!R(r))return console.error(`Invalid scale configuration for scale: ${a}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${a}`);const l=ss(a,r,Cc(a,i),H.scales[r.type]),c=Pc(l,n),d=e.scales||{};o[a]=Me(Object.create(null),[{axis:l},r,d[l],d[c]])}),i.data.datasets.forEach(a=>{const r=a.type||i.type,l=a.indexAxis||is(r,t),d=(Jt[r]||{}).scales||{};Object.keys(d).forEach(h=>{const u=Dc(h,l),f=a[u+"AxisID"]||u;o[f]=o[f]||Object.create(null),Me(o[f],[{axis:u},s[f],d[h]])})}),Object.keys(o).forEach(a=>{const r=o[a];Me(r,[H.scales[r.type],H.scale])}),o}function qo(i){const t=i.options||(i.options={});t.plugins=P(t.plugins,{}),t.scales=Oc(i,t)}function Xo(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function Rc(i){return i=i||{},i.data=Xo(i.data),qo(i),i}const An=new Map,Go=new Set;function ii(i,t){let e=An.get(i);return e||(e=t(),An.set(i,e),Go.add(e)),e}const ye=(i,t,e)=>{const s=Bt(t,e);s!==void 0&&i.add(s)};class Ec{constructor(t){this._config=Rc(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Xo(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),qo(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ii(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ii(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ii(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,s=this.type;return ii(`${s}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const s=this._scopeCache;let n=s.get(t);return(!n||e)&&(n=new Map,s.set(t,n)),n}getOptionScopes(t,e,s){const{options:n,type:o}=this,a=this._cachedScopes(t,s),r=a.get(e);if(r)return r;const l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(h=>ye(l,t,h))),d.forEach(h=>ye(l,n,h)),d.forEach(h=>ye(l,Jt[o]||{},h)),d.forEach(h=>ye(l,H,h)),d.forEach(h=>ye(l,Qi,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),Go.has(e)&&a.set(e,c),c}chartOptionScopes(){const{options:t,type:e}=this;return[t,Jt[e]||{},H.datasets[e]||{},{type:e},H,Qi]}resolveNamedOptions(t,e,s,n=[""]){const o={$shared:!0},{resolver:a,subPrefixes:r}=Cn(this._resolverCache,t,n);let l=a;if(Ic(a,e)){o.$shared=!1,s=Ft(s)?s():s;const c=this.createResolver(t,s,r);l=re(a,s,c)}for(const c of e)o[c]=l[c];return o}createResolver(t,e,s=[""],n){const{resolver:o}=Cn(this._resolverCache,t,s);return R(e)?re(o,e,void 0,n):o}}function Cn(i,t,e){let s=i.get(t);s||(s=new Map,i.set(t,s));const n=e.join();let o=s.get(n);return o||(o={resolver:Ds(t,e),subPrefixes:e.filter(r=>!r.toLowerCase().includes("hover"))},s.set(n,o)),o}const Lc=i=>R(i)&&Object.getOwnPropertyNames(i).some(t=>Ft(i[t]));function Ic(i,t){const{isScriptable:e,isIndexable:s}=Do(i);for(const n of t){const o=e(n),a=s(n),r=(a||o)&&i[n];if(o&&(Ft(r)||Lc(r))||a&&$(r))return!0}return!1}var Bc="4.5.1";const Fc=["top","bottom","left","right","chartArea"];function On(i,t){return i==="top"||i==="bottom"||Fc.indexOf(i)===-1&&t==="x"}function Rn(i,t){return function(e,s){return e[i]===s[i]?e[t]-s[t]:e[i]-s[i]}}function En(i){const t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),F(e&&e.onComplete,[i],t)}function zc(i){const t=i.chart,e=t.options.animation;F(e&&e.onProgress,[i],t)}function Ko(i){return Cs()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}const ui={},Ln=i=>{const t=Ko(i);return Object.values(ui).filter(e=>e.canvas===t).pop()};function Nc(i,t,e){const s=Object.keys(i);for(const n of s){const o=+n;if(o>=t){const a=i[n];delete i[n],(e>0||o>t)&&(i[o+e]=a)}}}function $c(i,t,e,s){return!e||i.type==="mouseout"?null:s?t:i}class kt{static register(...t){bt.add(...t),In()}static unregister(...t){bt.remove(...t),In()}constructor(t,e){const s=this.config=new Ec(e),n=Ko(t),o=Ln(n);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=s.createResolver(s.chartOptionScopes(),this.getContext());this.platform=new(s.platform||nc(n)),this.platform.updateConfig(s);const r=this.platform.acquireContext(n,a.aspectRatio),l=r&&r.canvas,c=l&&l.height,d=l&&l.width;if(this.id=Ha(),this.ctx=r,this.canvas=l,this.width=d,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new _c,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=nr(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],ui[this.id]=this,!r||!l){console.error("Failed to create chart: can't acquire context from the given item");return}xt.listen(this,"complete",En),xt.listen(this,"progress",zc),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:s,height:n,_aspectRatio:o}=this;return O(t)?e&&o?o:n?s/n:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return bt}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():sn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Qs(this.canvas,this.ctx),this}stop(){return xt.stop(this),this}resize(t,e){xt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const s=this.options,n=this.canvas,o=s.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(n,t,e,o),r=s.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,sn(this,r,!0)&&(this.notifyPlugins("resize",{size:a}),F(s.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};I(e,(s,n)=>{s.id=n})}buildOrUpdateScales(){const t=this.options,e=t.scales,s=this.scales,n=Object.keys(s).reduce((a,r)=>(a[r]=!1,a),{});let o=[];e&&(o=o.concat(Object.keys(e).map(a=>{const r=e[a],l=ss(a,r),c=l==="r",d=l==="x";return{options:r,dposition:c?"chartArea":d?"bottom":"left",dtype:c?"radialLinear":d?"category":"linear"}}))),I(o,a=>{const r=a.options,l=r.id,c=ss(l,r),d=P(r.type,a.dtype);(r.position===void 0||On(r.position,c)!==On(a.dposition))&&(r.position=a.dposition),n[l]=!0;let h=null;if(l in s&&s[l].type===d)h=s[l];else{const u=bt.getScale(d);h=new u({id:l,type:d,ctx:this.ctx,chart:this}),s[h.id]=h}h.init(r,t)}),I(n,(a,r)=>{a||delete s[r]}),I(s,a=>{it.configure(this,a,a.options),it.addBox(this,a)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,s=t.length;if(t.sort((n,o)=>n.index-o.index),s>e){for(let n=e;n<s;++n)this._destroyDatasetMeta(n);t.splice(e,s-e)}this._sortedMetasets=t.slice(0).sort(Rn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((s,n)=>{e.filter(o=>o===s._dataset).length===0&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let s,n;for(this._removeUnreferencedMetasets(),s=0,n=e.length;s<n;s++){const o=e[s];let a=this.getDatasetMeta(s);const r=o.type||this.config.type;if(a.type&&a.type!==r&&(this._destroyDatasetMeta(s),a=this.getDatasetMeta(s)),a.type=r,a.indexAxis=o.indexAxis||is(r,this.options),a.order=o.order||0,a.index=s,a.label=""+o.label,a.visible=this.isDatasetVisible(s),a.controller)a.controller.updateIndex(s),a.controller.linkScales();else{const l=bt.getController(r),{datasetElementType:c,dataElementType:d}=H.datasets[r];Object.assign(l,{dataElementType:bt.getElement(d),datasetElementType:c&&bt.getElement(c)}),a.controller=new l(this,s),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){I(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const s=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),n=this._animationsDisabled=!s.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let c=0,d=this.data.datasets.length;c<d;c++){const{controller:h}=this.getDatasetMeta(c),u=!n&&o.indexOf(h)===-1;h.buildOrUpdateElements(u),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=s.layout.autoPadding?a:0,this._updateLayout(a),n||I(o,c=>{c.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Rn("z","_idx"));const{_active:r,_lastEvent:l}=this;l?this._eventHandler(l,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){I(this.scales,t=>{it.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),s=new Set(t.events);(!Vs(e,s)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:s,start:n,count:o}of e){const a=s==="_removeElements"?-o:o;Nc(t,n,a)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,s=o=>new Set(t.filter(a=>a[0]===o).map((a,r)=>r+","+a.splice(1).join(","))),n=s(0);for(let o=1;o<e;o++)if(!Vs(n,s(o)))return;return Array.from(n).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;it.update(this,this.width,this.height,t);const e=this.chartArea,s=e.width<=0||e.height<=0;this._layers=[],I(this.boxes,n=>{s&&n.position==="chartArea"||(n.configure&&n.configure(),this._layers.push(...n._layers()))},this),this._layers.forEach((n,o)=>{n._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,s=this.data.datasets.length;e<s;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,s=this.data.datasets.length;e<s;++e)this._updateDataset(e,Ft(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const s=this.getDatasetMeta(t),n={meta:s,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",n)!==!1&&(s.controller._update(e),n.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",n))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(xt.has(this)?this.attached&&!xt.running(this)&&xt.start(this):(this.draw(),En({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:s,height:n}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(s,n)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,s=[];let n,o;for(n=0,o=e.length;n<o;++n){const a=e[n];(!t||a.visible)&&s.push(a)}return s}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,s={meta:t,index:t.index,cancelable:!0},n=zo(this,t);this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(n&&Ci(e,n),t.controller.draw(),n&&Oi(e),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(t){return Pt(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,s,n){const o=Fl.modes[e];return typeof o=="function"?o(this,t,s,n):[]}getDatasetMeta(t){const e=this.data.datasets[t],s=this._metasets;let n=s.filter(o=>o&&o._dataset===e).pop();return n||(n={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},s.push(n)),n}getContext(){return this.$context||(this.$context=zt(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const s=this.getDatasetMeta(t);return typeof s.hidden=="boolean"?!s.hidden:!e.hidden}setDatasetVisibility(t,e){const s=this.getDatasetMeta(t);s.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,s){const n=s?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,n);Le(e)?(o.data[e].hidden=!s,this.update()):(this.setDatasetVisibility(t,s),a.update(o,{visible:s}),this.update(r=>r.datasetIndex===t?n:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),xt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Qs(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ui[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,s=(o,a)=>{e.addEventListener(this,o,a),t[o]=a},n=(o,a,r)=>{o.offsetX=a,o.offsetY=r,this._eventHandler(o)};I(this.options.events,o=>s(o,n))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,s=(l,c)=>{e.addEventListener(this,l,c),t[l]=c},n=(l,c)=>{t[l]&&(e.removeEventListener(this,l,c),delete t[l])},o=(l,c)=>{this.canvas&&this.resize(l,c)};let a;const r=()=>{n("attach",r),this.attached=!0,this.resize(),s("resize",o),s("detach",a)};a=()=>{this.attached=!1,n("resize",o),this._stop(),this._resize(0,0),s("attach",r)},e.isAttached(this.canvas)?r():a()}unbindEvents(){I(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},I(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,s){const n=s?"set":"remove";let o,a,r,l;for(e==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+n+"DatasetHoverStyle"]()),r=0,l=t.length;r<l;++r){a=t[r];const c=a&&this.getDatasetMeta(a.datasetIndex).controller;c&&c[n+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],s=t.map(({datasetIndex:o,index:a})=>{const r=this.getDatasetMeta(o);if(!r)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:r.data[a],index:a}});!pi(s,e)&&(this._active=s,this._lastEvent=null,this._updateHoverStyles(s,e))}notifyPlugins(t,e,s){return this._plugins.notify(this,t,e,s)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,s){const n=this.options.hover,o=(l,c)=>l.filter(d=>!c.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=o(e,t),r=s?t:o(t,e);a.length&&this.updateHoverStyle(a,n.mode,!1),r.length&&n.mode&&this.updateHoverStyle(r,n.mode,!0)}_eventHandler(t,e){const s={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},n=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",s,n)===!1)return;const o=this._handleEvent(t,e,s.inChartArea);return s.cancelable=!1,this.notifyPlugins("afterEvent",s,n),(o||s.changed)&&this.render(),this}_handleEvent(t,e,s){const{_active:n=[],options:o}=this,a=e,r=this._getActiveElements(t,n,s,a),l=qa(t),c=$c(t,this._lastEvent,s,l);s&&(this._lastEvent=null,F(o.onHover,[t,r,this],this),l&&F(o.onClick,[t,r,this],this));const d=!pi(r,n);return(d||e)&&(this._active=r,this._updateHoverStyles(r,n,e)),this._lastEvent=c,d}_getActiveElements(t,e,s,n){if(t.type==="mouseout")return[];if(!s)return e;const o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,n)}}M(kt,"defaults",H),M(kt,"instances",ui),M(kt,"overrides",Jt),M(kt,"registry",bt),M(kt,"version",Bc),M(kt,"getChart",Ln);function In(){return I(kt.instances,i=>i._plugins.invalidate())}function Hc(i,t,e){const{startAngle:s,x:n,y:o,outerRadius:a,innerRadius:r,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,h=Math.min(c/a,Z(s-e));if(i.beginPath(),i.arc(n,o,a-c/2,s+h/2,e-h/2),r>0){const u=Math.min(c/r,Z(s-e));i.arc(n,o,r+c/2,e-u/2,s+u/2,!0)}else{const u=Math.min(c/2,a*Z(s-e));if(d==="round")i.arc(n,o,u,e-E/2,s+E/2,!0);else if(d==="bevel"){const f=2*u*u,p=-f*Math.cos(e+E/2)+n,g=-f*Math.sin(e+E/2)+o,m=f*Math.cos(s+E/2)+n,b=f*Math.sin(s+E/2)+o;i.lineTo(p,g),i.lineTo(m,b)}}i.closePath(),i.moveTo(0,0),i.rect(0,0,i.canvas.width,i.canvas.height),i.clip("evenodd")}function jc(i,t,e){const{startAngle:s,pixelMargin:n,x:o,y:a,outerRadius:r,innerRadius:l}=t;let c=n/r;i.beginPath(),i.arc(o,a,r,s-c,e+c),l>n?(c=n/l,i.arc(o,a,l,e+c,s-c,!0)):i.arc(o,a,n,e+Y,s-Y),i.closePath(),i.clip()}function Wc(i){return Ts(i,["outerStart","outerEnd","innerStart","innerEnd"])}function Vc(i,t,e,s){const n=Wc(i.options.borderRadius),o=(e-t)/2,a=Math.min(o,s*t/2),r=l=>{const c=(e-Math.min(o,l))*s/2;return G(l,0,Math.min(o,c))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:G(n.innerStart,0,a),innerEnd:G(n.innerEnd,0,a)}}function se(i,t,e,s){return{x:e+i*Math.cos(t),y:s+i*Math.sin(t)}}function wi(i,t,e,s,n,o){const{x:a,y:r,startAngle:l,pixelMargin:c,innerRadius:d}=t,h=Math.max(t.outerRadius+s+e-c,0),u=d>0?d+s+e+c:0;let f=0;const p=n-l;if(s){const B=d>0?d-s:0,N=h>0?h-s:0,V=(B+N)/2,ut=V!==0?p*V/(V+s):p;f=(p-ut)/2}const g=Math.max(.001,p*h-e/E)/h,m=(p-g)/2,b=l+m+f,y=n-m-f,{outerStart:w,outerEnd:x,innerStart:v,innerEnd:_}=Vc(t,u,h,y-b),k=h-w,S=h-x,T=b+w/k,A=y-x/S,D=u+v,C=u+_,q=b+v/D,at=y-_/C;if(i.beginPath(),o){const B=(T+A)/2;if(i.arc(a,r,h,T,B),i.arc(a,r,h,B,A),x>0){const K=se(S,A,a,r);i.arc(K.x,K.y,x,A,y+Y)}const N=se(C,y,a,r);if(i.lineTo(N.x,N.y),_>0){const K=se(C,at,a,r);i.arc(K.x,K.y,_,y+Y,at+Math.PI)}const V=(y-_/u+(b+v/u))/2;if(i.arc(a,r,u,y-_/u,V,!0),i.arc(a,r,u,V,b+v/u,!0),v>0){const K=se(D,q,a,r);i.arc(K.x,K.y,v,q+Math.PI,b-Y)}const ut=se(k,b,a,r);if(i.lineTo(ut.x,ut.y),w>0){const K=se(k,T,a,r);i.arc(K.x,K.y,w,b-Y,T)}}else{i.moveTo(a,r);const B=Math.cos(T)*h+a,N=Math.sin(T)*h+r;i.lineTo(B,N);const V=Math.cos(A)*h+a,ut=Math.sin(A)*h+r;i.lineTo(V,ut)}i.closePath()}function Yc(i,t,e,s,n){const{fullCircles:o,startAngle:a,circumference:r}=t;let l=t.endAngle;if(o){wi(i,t,e,s,l,n);for(let c=0;c<o;++c)i.fill();isNaN(r)||(l=a+(r%z||z))}return wi(i,t,e,s,l,n),i.fill(),l}function Uc(i,t,e,s,n){const{fullCircles:o,startAngle:a,circumference:r,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:h,borderDashOffset:u,borderRadius:f}=l,p=l.borderAlign==="inner";if(!c)return;i.setLineDash(h||[]),i.lineDashOffset=u,p?(i.lineWidth=c*2,i.lineJoin=d||"round"):(i.lineWidth=c,i.lineJoin=d||"bevel");let g=t.endAngle;if(o){wi(i,t,e,s,g,n);for(let m=0;m<o;++m)i.stroke();isNaN(r)||(g=a+(r%z||z))}p&&jc(i,t,g),l.selfJoin&&g-a>=E&&f===0&&d!=="miter"&&Hc(i,t,g),o||(wi(i,t,e,s,g,n),i.stroke())}class _e extends pt{constructor(e){super();M(this,"circumference");M(this,"endAngle");M(this,"fullCircles");M(this,"innerRadius");M(this,"outerRadius");M(this,"pixelMargin");M(this,"startAngle");this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,s,n){const o=this.getProps(["x","y"],n),{angle:a,distance:r}=bo(o,{x:e,y:s}),{startAngle:l,endAngle:c,innerRadius:d,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),f=(this.options.spacing+this.options.borderWidth)/2,p=P(u,c-l),g=Ie(a,l,c)&&l!==c,m=p>=z||g,b=Tt(r,d+f,h+f);return m&&b}getCenterPoint(e){const{x:s,y:n,startAngle:o,endAngle:a,innerRadius:r,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:d}=this.options,h=(o+a)/2,u=(r+l+d+c)/2;return{x:s+Math.cos(h)*u,y:n+Math.sin(h)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:s,circumference:n}=this,o=(s.offset||0)/4,a=(s.spacing||0)/2,r=s.circular;if(this.pixelMargin=s.borderAlign==="inner"?.33:0,this.fullCircles=n>z?Math.floor(n/z):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const l=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(l)*o,Math.sin(l)*o);const c=1-Math.sin(Math.min(E,n||0)),d=o*c;e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,Yc(e,this,d,a,r),Uc(e,this,d,a,r),e.restore()}}M(_e,"id","arc"),M(_e,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),M(_e,"defaultRoutes",{backgroundColor:"backgroundColor"}),M(_e,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"});function Jo(i,t,e=t){i.lineCap=P(e.borderCapStyle,t.borderCapStyle),i.setLineDash(P(e.borderDash,t.borderDash)),i.lineDashOffset=P(e.borderDashOffset,t.borderDashOffset),i.lineJoin=P(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=P(e.borderWidth,t.borderWidth),i.strokeStyle=P(e.borderColor,t.borderColor)}function qc(i,t,e){i.lineTo(e.x,e.y)}function Xc(i){return i.stepped?mr:i.tension||i.cubicInterpolationMode==="monotone"?br:qc}function Zo(i,t,e={}){const s=i.length,{start:n=0,end:o=s-1}=e,{start:a,end:r}=t,l=Math.max(n,a),c=Math.min(o,r),d=n<a&&o<a||n>r&&o>r;return{count:s,start:l,loop:t.loop,ilen:c<l&&!d?s+c-l:c-l}}function Gc(i,t,e,s){const{points:n,options:o}=t,{count:a,start:r,loop:l,ilen:c}=Zo(n,e,s),d=Xc(o);let{move:h=!0,reverse:u}=s||{},f,p,g;for(f=0;f<=c;++f)p=n[(r+(u?c-f:f))%a],!p.skip&&(h?(i.moveTo(p.x,p.y),h=!1):d(i,g,p,u,o.stepped),g=p);return l&&(p=n[(r+(u?c:0))%a],d(i,g,p,u,o.stepped)),!!l}function Kc(i,t,e,s){const n=t.points,{count:o,start:a,ilen:r}=Zo(n,e,s),{move:l=!0,reverse:c}=s||{};let d=0,h=0,u,f,p,g,m,b;const y=x=>(a+(c?r-x:x))%o,w=()=>{g!==m&&(i.lineTo(d,m),i.lineTo(d,g),i.lineTo(d,b))};for(l&&(f=n[y(0)],i.moveTo(f.x,f.y)),u=0;u<=r;++u){if(f=n[y(u)],f.skip)continue;const x=f.x,v=f.y,_=x|0;_===p?(v<g?g=v:v>m&&(m=v),d=(h*d+x)/++h):(w(),i.lineTo(x,v),p=_,h=0,g=m=v),b=v}w()}function ns(i){const t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Kc:Gc}function Jc(i){return i.stepped?Gr:i.tension||i.cubicInterpolationMode==="monotone"?Kr:Ut}function Zc(i,t,e,s){let n=t._path;n||(n=t._path=new Path2D,t.path(n,e,s)&&n.closePath()),Jo(i,t.options),i.stroke(n)}function Qc(i,t,e,s){const{segments:n,options:o}=t,a=ns(t);for(const r of n)Jo(i,o,r.style),i.beginPath(),a(i,t,r,{start:e,end:e+s-1})&&i.closePath(),i.stroke()}const td=typeof Path2D=="function";function ed(i,t,e,s){td&&!t.options.segment?Zc(i,t,e,s):Qc(i,t,e,s)}class Et extends pt{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const s=this.options;if((s.tension||s.cubicInterpolationMode==="monotone")&&!s.stepped&&!this._pointsUpdated){const n=s.spanGaps?this._loop:this._fullLoop;Hr(this._points,s,t,n,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=il(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,s=t.length;return s&&e[t[s-1].end]}interpolate(t,e){const s=this.options,n=t[e],o=this.points,a=Fo(this,{property:e,start:n,end:n});if(!a.length)return;const r=[],l=Jc(s);let c,d;for(c=0,d=a.length;c<d;++c){const{start:h,end:u}=a[c],f=o[h],p=o[u];if(f===p){r.push(f);continue}const g=Math.abs((n-f[e])/(p[e]-f[e])),m=l(f,p,g,s.stepped);m[e]=t[e],r.push(m)}return r.length===1?r[0]:r}pathSegment(t,e,s){return ns(this)(t,this,e,s)}path(t,e,s){const n=this.segments,o=ns(this);let a=this._loop;e=e||0,s=s||this.points.length-e;for(const r of n)a&=o(t,this,r,{start:e,end:e+s-1});return!!a}draw(t,e,s,n){const o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),ed(t,this,s,n),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}M(Et,"id","line"),M(Et,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),M(Et,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),M(Et,"descriptors",{_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"});function Bn(i,t,e,s){const n=i.options,{[e]:o}=i.getProps([e],s);return Math.abs(t-o)<n.radius+n.hitRadius}class fi extends pt{constructor(e){super();M(this,"parsed");M(this,"skip");M(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,s,n){const o=this.options,{x:a,y:r}=this.getProps(["x","y"],n);return Math.pow(e-a,2)+Math.pow(s-r,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(e,s){return Bn(this,e,"x",s)}inYRange(e,s){return Bn(this,e,"y",s)}getCenterPoint(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}size(e){e=e||this.options||{};let s=e.radius||0;s=Math.max(s,s&&e.hoverRadius||0);const n=s&&e.borderWidth||0;return(s+n)*2}draw(e,s){const n=this.options;this.skip||n.radius<.1||!Pt(this,s,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,ts(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}M(fi,"id","point"),M(fi,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),M(fi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Qo(i,t){const{x:e,y:s,base:n,width:o,height:a}=i.getProps(["x","y","base","width","height"],t);let r,l,c,d,h;return i.horizontal?(h=a/2,r=Math.min(e,n),l=Math.max(e,n),c=s-h,d=s+h):(h=o/2,r=e-h,l=e+h,c=Math.min(s,n),d=Math.max(s,n)),{left:r,top:c,right:l,bottom:d}}function Lt(i,t,e,s){return i?0:G(t,e,s)}function id(i,t,e){const s=i.options.borderWidth,n=i.borderSkipped,o=To(s);return{t:Lt(n.top,o.top,0,e),r:Lt(n.right,o.right,0,t),b:Lt(n.bottom,o.bottom,0,e),l:Lt(n.left,o.left,0,t)}}function sd(i,t,e){const{enableBorderRadius:s}=i.getProps(["enableBorderRadius"]),n=i.options.borderRadius,o=Gt(n),a=Math.min(t,e),r=i.borderSkipped,l=s||R(n);return{topLeft:Lt(!l||r.top||r.left,o.topLeft,0,a),topRight:Lt(!l||r.top||r.right,o.topRight,0,a),bottomLeft:Lt(!l||r.bottom||r.left,o.bottomLeft,0,a),bottomRight:Lt(!l||r.bottom||r.right,o.bottomRight,0,a)}}function nd(i){const t=Qo(i),e=t.right-t.left,s=t.bottom-t.top,n=id(i,e/2,s/2),o=sd(i,e/2,s/2);return{outer:{x:t.left,y:t.top,w:e,h:s,radius:o},inner:{x:t.left+n.l,y:t.top+n.t,w:e-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function Ui(i,t,e,s){const n=t===null,o=e===null,r=i&&!(n&&o)&&Qo(i,s);return r&&(n||Tt(t,r.left,r.right))&&(o||Tt(e,r.top,r.bottom))}function od(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function ad(i,t){i.rect(t.x,t.y,t.w,t.h)}function qi(i,t,e={}){const s=i.x!==e.x?-t:0,n=i.y!==e.y?-t:0,o=(i.x+i.w!==e.x+e.w?t:0)-s,a=(i.y+i.h!==e.y+e.h?t:0)-n;return{x:i.x+s,y:i.y+n,w:i.w+o,h:i.h+a,radius:i.radius}}class gi extends pt{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:s,backgroundColor:n}}=this,{inner:o,outer:a}=nd(this),r=od(a.radius)?Be:ad;t.save(),(a.w!==o.w||a.h!==o.h)&&(t.beginPath(),r(t,qi(a,e,o)),t.clip(),r(t,qi(o,-e,a)),t.fillStyle=s,t.fill("evenodd")),t.beginPath(),r(t,qi(o,e)),t.fillStyle=n,t.fill(),t.restore()}inRange(t,e,s){return Ui(this,t,e,s)}inXRange(t,e){return Ui(this,t,null,e)}inYRange(t,e){return Ui(this,null,t,e)}getCenterPoint(t){const{x:e,y:s,base:n,horizontal:o}=this.getProps(["x","y","base","horizontal"],t);return{x:o?(e+n)/2:e,y:o?s:(s+n)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}M(gi,"id","bar"),M(gi,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),M(gi,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var rd=Object.freeze({__proto__:null,ArcElement:_e,BarElement:gi,LineElement:Et,PointElement:fi});const os=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Fn=os.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function ta(i){return os[i%os.length]}function ea(i){return Fn[i%Fn.length]}function ld(i,t){return i.borderColor=ta(t),i.backgroundColor=ea(t),++t}function cd(i,t){return i.backgroundColor=i.data.map(()=>ta(t++)),t}function dd(i,t){return i.backgroundColor=i.data.map(()=>ea(t++)),t}function hd(i){let t=0;return(e,s)=>{const n=i.getDatasetMeta(s).controller;n instanceof qt?t=cd(e,t):n instanceof Ae?t=dd(e,t):n&&(t=ld(e,t))}}function zn(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function ud(i){return i&&(i.borderColor||i.backgroundColor)}function fd(){return H.borderColor!=="rgba(0,0,0,0.1)"||H.backgroundColor!=="rgba(0,0,0,0.1)"}var gd={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;const{data:{datasets:s},options:n}=i.config,{elements:o}=n,a=zn(s)||ud(n)||o&&zn(o)||fd();if(!e.forceOverride&&a)return;const r=hd(i);s.forEach(r)}};function pd(i,t,e,s,n){const o=n.samples||s;if(o>=e)return i.slice(t,t+e);const a=[],r=(e-2)/(o-2);let l=0;const c=t+e-1;let d=t,h,u,f,p,g;for(a[l++]=i[d],h=0;h<o-2;h++){let m=0,b=0,y;const w=Math.floor((h+1)*r)+1+t,x=Math.min(Math.floor((h+2)*r)+1,e)+t,v=x-w;for(y=w;y<x;y++)m+=i[y].x,b+=i[y].y;m/=v,b/=v;const _=Math.floor(h*r)+1+t,k=Math.min(Math.floor((h+1)*r)+1,e)+t,{x:S,y:T}=i[d];for(f=p=-1,y=_;y<k;y++)p=.5*Math.abs((S-m)*(i[y].y-T)-(S-i[y].x)*(b-T)),p>f&&(f=p,u=i[y],g=y);a[l++]=u,d=g}return a[l++]=i[c],a}function md(i,t,e,s){let n=0,o=0,a,r,l,c,d,h,u,f,p,g;const m=[],b=t+e-1,y=i[t].x,x=i[b].x-y;for(a=t;a<t+e;++a){r=i[a],l=(r.x-y)/x*s,c=r.y;const v=l|0;if(v===d)c<p?(p=c,h=a):c>g&&(g=c,u=a),n=(o*n+r.x)/++o;else{const _=a-1;if(!O(h)&&!O(u)){const k=Math.min(h,u),S=Math.max(h,u);k!==f&&k!==_&&m.push({...i[k],x:n}),S!==f&&S!==_&&m.push({...i[S],x:n})}a>0&&_!==f&&m.push(i[_]),m.push(r),d=v,o=0,p=g=c,h=u=f=a}}return m}function ia(i){if(i._decimated){const t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Nn(i){i.data.datasets.forEach(t=>{ia(t)})}function bd(i,t){const e=t.length;let s=0,n;const{iScale:o}=i,{min:a,max:r,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(s=G(Dt(t,o.axis,a).lo,0,e-1)),c?n=G(Dt(t,o.axis,r).hi+1,s,e)-s:n=e-s,{start:s,count:n}}var yd={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){Nn(i);return}const s=i.width;i.data.datasets.forEach((n,o)=>{const{_data:a,indexAxis:r}=n,l=i.getDatasetMeta(o),c=a||n.data;if(xe([r,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const d=i.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||i.options.parsing)return;let{start:h,count:u}=bd(l,c);const f=e.threshold||4*s;if(u<=f){ia(n);return}O(a)&&(n._data=c,delete n.data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(g){this._data=g}}));let p;switch(e.algorithm){case"lttb":p=pd(c,h,u,s,e);break;case"min-max":p=md(c,h,u,s);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}n._decimated=p})},destroy(i){Nn(i)}};function vd(i,t,e){const s=i.segments,n=i.points,o=t.points,a=[];for(const r of s){let{start:l,end:c}=r;c=Li(l,c,n);const d=as(e,n[l],n[c],r.loop);if(!t.segments){a.push({source:r,target:d,start:n[l],end:n[c]});continue}const h=Fo(t,d);for(const u of h){const f=as(e,o[u.start],o[u.end],u.loop),p=Bo(r,n,f);for(const g of p)a.push({source:g,target:u,start:{[e]:$n(d,f,"start",Math.max)},end:{[e]:$n(d,f,"end",Math.min)}})}}return a}function as(i,t,e,s){if(s)return;let n=t[i],o=e[i];return i==="angle"&&(n=Z(n),o=Z(o)),{property:i,start:n,end:o}}function xd(i,t){const{x:e=null,y:s=null}=i||{},n=t.points,o=[];return t.segments.forEach(({start:a,end:r})=>{r=Li(a,r,n);const l=n[a],c=n[r];s!==null?(o.push({x:l.x,y:s}),o.push({x:c.x,y:s})):e!==null&&(o.push({x:e,y:l.y}),o.push({x:e,y:c.y}))}),o}function Li(i,t,e){for(;t>i;t--){const s=e[t];if(!isNaN(s.x)&&!isNaN(s.y))break}return t}function $n(i,t,e,s){return i&&t?s(i[e],t[e]):i?i[e]:t?t[e]:0}function sa(i,t){let e=[],s=!1;return $(i)?(s=!0,e=i):e=xd(i,t),e.length?new Et({points:e,options:{tension:0},_loop:s,_fullLoop:s}):null}function Hn(i){return i&&i.fill!==!1}function wd(i,t,e){let n=i[t].fill;const o=[t];let a;if(!e)return n;for(;n!==!1&&o.indexOf(n)===-1;){if(!j(n))return n;if(a=i[n],!a)return!1;if(a.visible)return n;o.push(n),n=a.fill}return!1}function _d(i,t,e){const s=Td(i);if(R(s))return isNaN(s.value)?!1:s;let n=parseFloat(s);return j(n)&&Math.floor(n)===n?kd(s[0],t,n,e):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function kd(i,t,e,s){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=s?!1:e}function Sd(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:R(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Md(i,t,e){let s;return i==="start"?s=e:i==="end"?s=t.options.reverse?t.min:t.max:R(i)?s=i.value:s=t.getBaseValue(),s}function Td(i){const t=i.options,e=t.fill;let s=P(e&&e.target,e);return s===void 0&&(s=!!t.backgroundColor),s===!1||s===null?!1:s===!0?"origin":s}function Dd(i){const{scale:t,index:e,line:s}=i,n=[],o=s.segments,a=s.points,r=Pd(t,e);r.push(sa({x:null,y:t.bottom},s));for(let l=0;l<o.length;l++){const c=o[l];for(let d=c.start;d<=c.end;d++)Ad(n,a[d],r)}return new Et({points:n,options:{}})}function Pd(i,t){const e=[],s=i.getMatchingVisibleMetas("line");for(let n=0;n<s.length;n++){const o=s[n];if(o.index===t)break;o.hidden||e.unshift(o.dataset)}return e}function Ad(i,t,e){const s=[];for(let n=0;n<e.length;n++){const o=e[n],{first:a,last:r,point:l}=Cd(o,t,"x");if(!(!l||a&&r)){if(a)s.unshift(l);else if(i.push(l),!r)break}}i.push(...s)}function Cd(i,t,e){const s=i.interpolate(t,e);if(!s)return{};const n=s[e],o=i.segments,a=i.points;let r=!1,l=!1;for(let c=0;c<o.length;c++){const d=o[c],h=a[d.start][e],u=a[d.end][e];if(Tt(n,h,u)){r=n===h,l=n===u;break}}return{first:r,last:l,point:s}}class na{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,s){const{x:n,y:o,radius:a}=this;return e=e||{start:0,end:z},t.arc(n,o,a,e.end,e.start,!0),!s.bounds}interpolate(t){const{x:e,y:s,radius:n}=this,o=t.angle;return{x:e+Math.cos(o)*n,y:s+Math.sin(o)*n,angle:o}}}function Od(i){const{chart:t,fill:e,line:s}=i;if(j(e))return Rd(t,e);if(e==="stack")return Dd(i);if(e==="shape")return!0;const n=Ed(i);return n instanceof na?n:sa(n,s)}function Rd(i,t){const e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function Ed(i){return(i.scale||{}).getPointPositionForValue?Id(i):Ld(i)}function Ld(i){const{scale:t={},fill:e}=i,s=Sd(e,t);if(j(s)){const n=t.isHorizontal();return{x:n?s:null,y:n?null:s}}return null}function Id(i){const{scale:t,fill:e}=i,s=t.options,n=t.getLabels().length,o=s.reverse?t.max:t.min,a=Md(e,t,o),r=[];if(s.grid.circular){const l=t.getPointPositionForValue(0,o);return new na({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<n;++l)r.push(t.getPointPositionForValue(l,a));return r}function Xi(i,t,e){const s=Od(t),{chart:n,index:o,line:a,scale:r,axis:l}=t,c=a.options,d=c.fill,h=c.backgroundColor,{above:u=h,below:f=h}=d||{},p=n.getDatasetMeta(o),g=zo(n,p);s&&a.points.length&&(Ci(i,e),Bd(i,{line:a,target:s,above:u,below:f,area:e,scale:r,axis:l,clip:g}),Oi(i))}function Bd(i,t){const{line:e,target:s,above:n,below:o,area:a,scale:r,clip:l}=t,c=e._loop?"angle":t.axis;i.save();let d=o;o!==n&&(c==="x"?(jn(i,s,a.top),Gi(i,{line:e,target:s,color:n,scale:r,property:c,clip:l}),i.restore(),i.save(),jn(i,s,a.bottom)):c==="y"&&(Wn(i,s,a.left),Gi(i,{line:e,target:s,color:o,scale:r,property:c,clip:l}),i.restore(),i.save(),Wn(i,s,a.right),d=n)),Gi(i,{line:e,target:s,color:d,scale:r,property:c,clip:l}),i.restore()}function jn(i,t,e){const{segments:s,points:n}=t;let o=!0,a=!1;i.beginPath();for(const r of s){const{start:l,end:c}=r,d=n[l],h=n[Li(l,c,n)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(d.x,e),i.lineTo(d.x,d.y)),a=!!t.pathSegment(i,r,{move:a}),a?i.closePath():i.lineTo(h.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function Wn(i,t,e){const{segments:s,points:n}=t;let o=!0,a=!1;i.beginPath();for(const r of s){const{start:l,end:c}=r,d=n[l],h=n[Li(l,c,n)];o?(i.moveTo(d.x,d.y),o=!1):(i.lineTo(e,d.y),i.lineTo(d.x,d.y)),a=!!t.pathSegment(i,r,{move:a}),a?i.closePath():i.lineTo(e,h.y)}i.lineTo(e,t.first().y),i.closePath(),i.clip()}function Gi(i,t){const{line:e,target:s,property:n,color:o,scale:a,clip:r}=t,l=vd(e,s,n);for(const{source:c,target:d,start:h,end:u}of l){const{style:{backgroundColor:f=o}={}}=c,p=s!==!0;i.save(),i.fillStyle=f,Fd(i,a,r,p&&as(n,h,u)),i.beginPath();const g=!!e.pathSegment(i,c);let m;if(p){g?i.closePath():Vn(i,s,u,n);const b=!!s.pathSegment(i,d,{move:g,reverse:!0});m=g&&b,m||Vn(i,s,h,n)}i.closePath(),i.fill(m?"evenodd":"nonzero"),i.restore()}}function Fd(i,t,e,s){const n=t.chart.chartArea,{property:o,start:a,end:r}=s||{};if(o==="x"||o==="y"){let l,c,d,h;o==="x"?(l=a,c=n.top,d=r,h=n.bottom):(l=n.left,c=a,d=n.right,h=r),i.beginPath(),e&&(l=Math.max(l,e.left),d=Math.min(d,e.right),c=Math.max(c,e.top),h=Math.min(h,e.bottom)),i.rect(l,c,d-l,h-c),i.clip()}}function Vn(i,t,e,s){const n=t.interpolate(e,s);n&&i.lineTo(n.x,n.y)}var zd={id:"filler",afterDatasetsUpdate(i,t,e){const s=(i.data.datasets||[]).length,n=[];let o,a,r,l;for(a=0;a<s;++a)o=i.getDatasetMeta(a),r=o.dataset,l=null,r&&r.options&&r instanceof Et&&(l={visible:i.isDatasetVisible(a),index:a,fill:_d(r,a,s),chart:i,axis:o.controller.options.indexAxis,scale:o.vScale,line:r}),o.$filler=l,n.push(l);for(a=0;a<s;++a)l=n[a],!(!l||l.fill===!1)&&(l.fill=wd(n,a,e.propagate))},beforeDraw(i,t,e){const s=e.drawTime==="beforeDraw",n=i.getSortedVisibleDatasetMetas(),o=i.chartArea;for(let a=n.length-1;a>=0;--a){const r=n[a].$filler;r&&(r.line.updateControlPoints(o,r.axis),s&&r.fill&&Xi(i.ctx,r,o))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const s=i.getSortedVisibleDatasetMetas();for(let n=s.length-1;n>=0;--n){const o=s[n].$filler;Hn(o)&&Xi(i.ctx,o,i.chartArea)}},beforeDatasetDraw(i,t,e){const s=t.meta.$filler;!Hn(s)||e.drawTime!=="beforeDatasetDraw"||Xi(i.ctx,s,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Yn=(i,t)=>{let{boxHeight:e=t,boxWidth:s=t}=i;return i.usePointStyle&&(e=Math.min(e,t),s=i.pointStyleWidth||Math.min(s,t)),{boxWidth:s,boxHeight:e,itemHeight:Math.max(t,e)}},Nd=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index;class Un extends pt{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,s){this.maxWidth=t,this.maxHeight=e,this._margins=s,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=F(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(s=>t.filter(s,this.chart.data))),t.sort&&(e=e.sort((s,n)=>t.sort(s,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const s=t.labels,n=X(s.font),o=n.size,a=this._computeTitleHeight(),{boxWidth:r,itemHeight:l}=Yn(s,o);let c,d;e.font=n.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(a,o,r,l)+10):(d=this.maxHeight,c=this._fitCols(a,n,r,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,s,n){const{ctx:o,maxWidth:a,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=n+r;let h=t;o.textAlign="left",o.textBaseline="middle";let u=-1,f=-d;return this.legendItems.forEach((p,g)=>{const m=s+e/2+o.measureText(p.text).width;(g===0||c[c.length-1]+m+2*r>a)&&(h+=d,c[c.length-(g>0?0:1)]=0,f+=d,u++),l[g]={left:0,top:f,row:u,width:m,height:n},c[c.length-1]+=m+r}),h}_fitCols(t,e,s,n){const{ctx:o,maxHeight:a,options:{labels:{padding:r}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=a-t;let h=r,u=0,f=0,p=0,g=0;return this.legendItems.forEach((m,b)=>{const{itemWidth:y,itemHeight:w}=$d(s,e,o,m,n);b>0&&f+w+2*r>d&&(h+=u+r,c.push({width:u,height:f}),p+=u+r,g++,u=f=0),l[b]={left:p,top:f,col:g,width:y,height:w},u=Math.max(u,y),f+=w+r}),h+=u,c.push({width:u,height:f}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:s,labels:{padding:n},rtl:o}}=this,a=ne(o,this.left,this.width);if(this.isHorizontal()){let r=0,l=J(s,this.left+n,this.right-this.lineWidths[r]);for(const c of e)r!==c.row&&(r=c.row,l=J(s,this.left+n,this.right-this.lineWidths[r])),c.top+=this.top+t+n,c.left=a.leftForLtr(a.x(l),c.width),l+=c.width+n}else{let r=0,l=J(s,this.top+t+n,this.bottom-this.columnSizes[r].height);for(const c of e)c.col!==r&&(r=c.col,l=J(s,this.top+t+n,this.bottom-this.columnSizes[r].height)),c.top=l,c.left+=this.left+n,c.left=a.leftForLtr(a.x(c.left),c.width),l+=c.height+n}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;Ci(t,this),this._draw(),Oi(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:s,ctx:n}=this,{align:o,labels:a}=t,r=H.color,l=ne(t.rtl,this.left,this.width),c=X(a.font),{padding:d}=a,h=c.size,u=h/2;let f;this.drawTitle(),n.textAlign=l.textAlign("left"),n.textBaseline="middle",n.lineWidth=.5,n.font=c.string;const{boxWidth:p,boxHeight:g,itemHeight:m}=Yn(a,h),b=function(_,k,S){if(isNaN(p)||p<=0||isNaN(g)||g<0)return;n.save();const T=P(S.lineWidth,1);if(n.fillStyle=P(S.fillStyle,r),n.lineCap=P(S.lineCap,"butt"),n.lineDashOffset=P(S.lineDashOffset,0),n.lineJoin=P(S.lineJoin,"miter"),n.lineWidth=T,n.strokeStyle=P(S.strokeStyle,r),n.setLineDash(P(S.lineDash,[])),a.usePointStyle){const A={radius:g*Math.SQRT2/2,pointStyle:S.pointStyle,rotation:S.rotation,borderWidth:T},D=l.xPlus(_,p/2),C=k+u;Mo(n,A,D,C,a.pointStyleWidth&&p)}else{const A=k+Math.max((h-g)/2,0),D=l.leftForLtr(_,p),C=Gt(S.borderRadius);n.beginPath(),Object.values(C).some(q=>q!==0)?Be(n,{x:D,y:A,w:p,h:g,radius:C}):n.rect(D,A,p,g),n.fill(),T!==0&&n.stroke()}n.restore()},y=function(_,k,S){Zt(n,S.text,_,k+m/2,c,{strikethrough:S.hidden,textAlign:l.textAlign(S.textAlign)})},w=this.isHorizontal(),x=this._computeTitleHeight();w?f={x:J(o,this.left+d,this.right-s[0]),y:this.top+d+x,line:0}:f={x:this.left+d,y:J(o,this.top+x+d,this.bottom-e[0].height),line:0},Eo(this.ctx,t.textDirection);const v=m+d;this.legendItems.forEach((_,k)=>{n.strokeStyle=_.fontColor,n.fillStyle=_.fontColor;const S=n.measureText(_.text).width,T=l.textAlign(_.textAlign||(_.textAlign=a.textAlign)),A=p+u+S;let D=f.x,C=f.y;l.setWidth(this.width),w?k>0&&D+A+d>this.right&&(C=f.y+=v,f.line++,D=f.x=J(o,this.left+d,this.right-s[f.line])):k>0&&C+v>this.bottom&&(D=f.x=D+e[f.line].width+d,f.line++,C=f.y=J(o,this.top+x+d,this.bottom-e[f.line].height));const q=l.x(D);if(b(q,C,_),D=or(T,D+p+u,w?D+A:this.right,t.rtl),y(l.x(D),C,_),w)f.x+=A+d;else if(typeof _.text!="string"){const at=c.lineHeight;f.y+=oa(_,at)+d}else f.y+=v}),Lo(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,s=X(e.font),n=st(e.padding);if(!e.display)return;const o=ne(t.rtl,this.left,this.width),a=this.ctx,r=e.position,l=s.size/2,c=n.top+l;let d,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),d=this.top+c,h=J(t.align,h,this.right-u);else{const p=this.columnSizes.reduce((g,m)=>Math.max(g,m.height),0);d=c+J(t.align,this.top,this.bottom-p-t.labels.padding-this._computeTitleHeight())}const f=J(r,h,h+u);a.textAlign=o.textAlign(Ss(r)),a.textBaseline="middle",a.strokeStyle=e.color,a.fillStyle=e.color,a.font=s.string,Zt(a,e.text,f,d,s)}_computeTitleHeight(){const t=this.options.title,e=X(t.font),s=st(t.padding);return t.display?e.lineHeight+s.height:0}_getLegendItemAt(t,e){let s,n,o;if(Tt(t,this.left,this.right)&&Tt(e,this.top,this.bottom)){for(o=this.legendHitBoxes,s=0;s<o.length;++s)if(n=o[s],Tt(t,n.left,n.left+n.width)&&Tt(e,n.top,n.top+n.height))return this.legendItems[s]}return null}handleEvent(t){const e=this.options;if(!Wd(t.type,e))return;const s=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const n=this._hoveredItem,o=Nd(n,s);n&&!o&&F(e.onLeave,[t,n,this],this),this._hoveredItem=s,s&&!o&&F(e.onHover,[t,s,this],this)}else s&&F(e.onClick,[t,s,this],this)}}function $d(i,t,e,s,n){const o=Hd(s,i,t,e),a=jd(n,s,t.lineHeight);return{itemWidth:o,itemHeight:a}}function Hd(i,t,e,s){let n=i.text;return n&&typeof n!="string"&&(n=n.reduce((o,a)=>o.length>a.length?o:a)),t+e.size/2+s.measureText(n).width}function jd(i,t,e){let s=i;return typeof t.text!="string"&&(s=oa(t,e)),s}function oa(i,t){const e=i.text?i.text.length:0;return t*e}function Wd(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var Vd={id:"legend",_element:Un,start(i,t,e){const s=i.legend=new Un({ctx:i.ctx,options:e,chart:i});it.configure(i,s,e),it.addBox(i,s)},stop(i){it.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){const s=i.legend;it.configure(i,s,e),s.options=e},afterUpdate(i){const t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){const s=t.datasetIndex,n=e.chart;n.isDatasetVisible(s)?(n.hide(s),t.hidden=!0):(n.show(s),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){const t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(e?0:void 0),d=st(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:s||c.pointStyle,rotation:c.rotation,textAlign:n||c.textAlign,borderRadius:a&&(r||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}};class Es extends pt{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const s=this.options;if(this.left=0,this.top=0,!s.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const n=$(s.text)?s.text.length:1;this._padding=st(s.padding);const o=n*X(s.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:s,bottom:n,right:o,options:a}=this,r=a.align;let l=0,c,d,h;return this.isHorizontal()?(d=J(r,s,o),h=e+t,c=o-s):(a.position==="left"?(d=s+t,h=J(r,n,e),l=E*-.5):(d=o-t,h=J(r,e,n),l=E*.5),c=n-e),{titleX:d,titleY:h,maxWidth:c,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const s=X(e.font),o=s.lineHeight/2+this._padding.top,{titleX:a,titleY:r,maxWidth:l,rotation:c}=this._drawArgs(o);Zt(t,e.text,0,0,s,{color:e.color,maxWidth:l,rotation:c,textAlign:Ss(e.align),textBaseline:"middle",translation:[a,r]})}}function Yd(i,t){const e=new Es({ctx:i.ctx,options:t,chart:i});it.configure(i,e,t),it.addBox(i,e),i.titleBlock=e}var Ud={id:"title",_element:Es,start(i,t,e){Yd(i,e)},stop(i){const t=i.titleBlock;it.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){const s=i.titleBlock;it.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const si=new WeakMap;var qd={id:"subtitle",start(i,t,e){const s=new Es({ctx:i.ctx,options:e,chart:i});it.configure(i,s,e),it.addBox(i,s),si.set(i,s)},stop(i){it.removeBox(i,si.get(i)),si.delete(i)},beforeUpdate(i,t,e){const s=si.get(i);it.configure(i,s,e),s.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ke={average(i){if(!i.length)return!1;let t,e,s=new Set,n=0,o=0;for(t=0,e=i.length;t<e;++t){const r=i[t].element;if(r&&r.hasValue()){const l=r.tooltipPosition();s.add(l.x),n+=l.y,++o}}return o===0||s.size===0?!1:{x:[...s].reduce((r,l)=>r+l)/s.size,y:n/o}},nearest(i,t){if(!i.length)return!1;let e=t.x,s=t.y,n=Number.POSITIVE_INFINITY,o,a,r;for(o=0,a=i.length;o<a;++o){const l=i[o].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),d=Zi(t,c);d<n&&(n=d,r=l)}}if(r){const l=r.tooltipPosition();e=l.x,s=l.y}return{x:e,y:s}}};function mt(i,t){return t&&($(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function wt(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Xd(i,t){const{element:e,datasetIndex:s,index:n}=t,o=i.getDatasetMeta(s).controller,{label:a,value:r}=o.getLabelAndValue(n);return{chart:i,label:a,parsed:o.getParsed(n),raw:i.data.datasets[s].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:e}}function qn(i,t){const e=i.chart.ctx,{body:s,footer:n,title:o}=i,{boxWidth:a,boxHeight:r}=t,l=X(t.bodyFont),c=X(t.titleFont),d=X(t.footerFont),h=o.length,u=n.length,f=s.length,p=st(t.padding);let g=p.height,m=0,b=s.reduce((x,v)=>x+v.before.length+v.lines.length+v.after.length,0);if(b+=i.beforeBody.length+i.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),b){const x=t.displayColors?Math.max(r,l.lineHeight):l.lineHeight;g+=f*x+(b-f)*l.lineHeight+(b-1)*t.bodySpacing}u&&(g+=t.footerMarginTop+u*d.lineHeight+(u-1)*t.footerSpacing);let y=0;const w=function(x){m=Math.max(m,e.measureText(x).width+y)};return e.save(),e.font=c.string,I(i.title,w),e.font=l.string,I(i.beforeBody.concat(i.afterBody),w),y=t.displayColors?a+2+t.boxPadding:0,I(s,x=>{I(x.before,w),I(x.lines,w),I(x.after,w)}),y=0,e.font=d.string,I(i.footer,w),e.restore(),m+=p.width,{width:m,height:g}}function Gd(i,t){const{y:e,height:s}=t;return e<s/2?"top":e>i.height-s/2?"bottom":"center"}function Kd(i,t,e,s){const{x:n,width:o}=s,a=e.caretSize+e.caretPadding;if(i==="left"&&n+o+a>t.width||i==="right"&&n-o-a<0)return!0}function Jd(i,t,e,s){const{x:n,width:o}=e,{width:a,chartArea:{left:r,right:l}}=i;let c="center";return s==="center"?c=n<=(r+l)/2?"left":"right":n<=o/2?c="left":n>=a-o/2&&(c="right"),Kd(c,i,t,e)&&(c="center"),c}function Xn(i,t,e){const s=e.yAlign||t.yAlign||Gd(i,e);return{xAlign:e.xAlign||t.xAlign||Jd(i,t,e,s),yAlign:s}}function Zd(i,t){let{x:e,width:s}=i;return t==="right"?e-=s:t==="center"&&(e-=s/2),e}function Qd(i,t,e){let{y:s,height:n}=i;return t==="top"?s+=e:t==="bottom"?s-=n+e:s-=n/2,s}function Gn(i,t,e,s){const{caretSize:n,caretPadding:o,cornerRadius:a}=i,{xAlign:r,yAlign:l}=e,c=n+o,{topLeft:d,topRight:h,bottomLeft:u,bottomRight:f}=Gt(a);let p=Zd(t,r);const g=Qd(t,l,c);return l==="center"?r==="left"?p+=c:r==="right"&&(p-=c):r==="left"?p-=Math.max(d,u)+n:r==="right"&&(p+=Math.max(h,f)+n),{x:G(p,0,s.width-t.width),y:G(g,0,s.height-t.height)}}function ni(i,t,e){const s=st(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-s.right:i.x+s.left}function Kn(i){return mt([],wt(i))}function th(i,t,e){return zt(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function Jn(i,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}const aa={beforeTitle:vt,title(i){if(i.length>0){const t=i[0],e=t.chart.data.labels,s=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(s>0&&t.dataIndex<s)return e[t.dataIndex]}return""},afterTitle:vt,beforeBody:vt,beforeLabel:vt,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");const e=i.formattedValue;return O(e)||(t+=e),t},labelColor(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){const e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:vt,afterBody:vt,beforeFooter:vt,footer:vt,afterFooter:vt};function nt(i,t,e,s){const n=i[t].call(e,s);return typeof n>"u"?aa[t].call(e,s):n}class rs extends pt{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,s=this.options.setContext(this.getContext()),n=s.enabled&&e.options.animation&&s.animations,o=new No(this.chart,n);return n._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=th(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:s}=e,n=nt(s,"beforeTitle",this,t),o=nt(s,"title",this,t),a=nt(s,"afterTitle",this,t);let r=[];return r=mt(r,wt(n)),r=mt(r,wt(o)),r=mt(r,wt(a)),r}getBeforeBody(t,e){return Kn(nt(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:s}=e,n=[];return I(t,o=>{const a={before:[],lines:[],after:[]},r=Jn(s,o);mt(a.before,wt(nt(r,"beforeLabel",this,o))),mt(a.lines,nt(r,"label",this,o)),mt(a.after,wt(nt(r,"afterLabel",this,o))),n.push(a)}),n}getAfterBody(t,e){return Kn(nt(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:s}=e,n=nt(s,"beforeFooter",this,t),o=nt(s,"footer",this,t),a=nt(s,"afterFooter",this,t);let r=[];return r=mt(r,wt(n)),r=mt(r,wt(o)),r=mt(r,wt(a)),r}_createItems(t){const e=this._active,s=this.chart.data,n=[],o=[],a=[];let r=[],l,c;for(l=0,c=e.length;l<c;++l)r.push(Xd(this.chart,e[l]));return t.filter&&(r=r.filter((d,h,u)=>t.filter(d,h,u,s))),t.itemSort&&(r=r.sort((d,h)=>t.itemSort(d,h,s))),I(r,d=>{const h=Jn(t.callbacks,d);n.push(nt(h,"labelColor",this,d)),o.push(nt(h,"labelPointStyle",this,d)),a.push(nt(h,"labelTextColor",this,d))}),this.labelColors=n,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=r,r}update(t,e){const s=this.options.setContext(this.getContext()),n=this._active;let o,a=[];if(!n.length)this.opacity!==0&&(o={opacity:0});else{const r=ke[s.position].call(this,n,this._eventPosition);a=this._createItems(s),this.title=this.getTitle(a,s),this.beforeBody=this.getBeforeBody(a,s),this.body=this.getBody(a,s),this.afterBody=this.getAfterBody(a,s),this.footer=this.getFooter(a,s);const l=this._size=qn(this,s),c=Object.assign({},r,l),d=Xn(this.chart,s,c),h=Gn(s,c,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:r.x,caretY:r.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&s.external&&s.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,s,n){const o=this.getCaretPosition(t,s,n);e.lineTo(o.x1,o.y1),e.lineTo(o.x2,o.y2),e.lineTo(o.x3,o.y3)}getCaretPosition(t,e,s){const{xAlign:n,yAlign:o}=this,{caretSize:a,cornerRadius:r}=s,{topLeft:l,topRight:c,bottomLeft:d,bottomRight:h}=Gt(r),{x:u,y:f}=t,{width:p,height:g}=e;let m,b,y,w,x,v;return o==="center"?(x=f+g/2,n==="left"?(m=u,b=m-a,w=x+a,v=x-a):(m=u+p,b=m+a,w=x-a,v=x+a),y=m):(n==="left"?b=u+Math.max(l,d)+a:n==="right"?b=u+p-Math.max(c,h)-a:b=this.caretX,o==="top"?(w=f,x=w-a,m=b-a,y=b+a):(w=f+g,x=w+a,m=b+a,y=b-a),v=w),{x1:m,x2:b,x3:y,y1:w,y2:x,y3:v}}drawTitle(t,e,s){const n=this.title,o=n.length;let a,r,l;if(o){const c=ne(s.rtl,this.x,this.width);for(t.x=ni(this,s.titleAlign,s),e.textAlign=c.textAlign(s.titleAlign),e.textBaseline="middle",a=X(s.titleFont),r=s.titleSpacing,e.fillStyle=s.titleColor,e.font=a.string,l=0;l<o;++l)e.fillText(n[l],c.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r,l+1===o&&(t.y+=s.titleMarginBottom-r)}}_drawColorBox(t,e,s,n,o){const a=this.labelColors[s],r=this.labelPointStyles[s],{boxHeight:l,boxWidth:c}=o,d=X(o.bodyFont),h=ni(this,"left",o),u=n.x(h),f=l<d.lineHeight?(d.lineHeight-l)/2:0,p=e.y+f;if(o.usePointStyle){const g={radius:Math.min(c,l)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},m=n.leftForLtr(u,c)+c/2,b=p+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ts(t,g,m,b),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ts(t,g,m,b)}else{t.lineWidth=R(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const g=n.leftForLtr(u,c),m=n.leftForLtr(n.xPlus(u,1),c-2),b=Gt(a.borderRadius);Object.values(b).some(y=>y!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Be(t,{x:g,y:p,w:c,h:l,radius:b}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Be(t,{x:m,y:p+1,w:c-2,h:l-2,radius:b}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(g,p,c,l),t.strokeRect(g,p,c,l),t.fillStyle=a.backgroundColor,t.fillRect(m,p+1,c-2,l-2))}t.fillStyle=this.labelTextColors[s]}drawBody(t,e,s){const{body:n}=this,{bodySpacing:o,bodyAlign:a,displayColors:r,boxHeight:l,boxWidth:c,boxPadding:d}=s,h=X(s.bodyFont);let u=h.lineHeight,f=0;const p=ne(s.rtl,this.x,this.width),g=function(S){e.fillText(S,p.x(t.x+f),t.y+u/2),t.y+=u+o},m=p.textAlign(a);let b,y,w,x,v,_,k;for(e.textAlign=a,e.textBaseline="middle",e.font=h.string,t.x=ni(this,m,s),e.fillStyle=s.bodyColor,I(this.beforeBody,g),f=r&&m!=="right"?a==="center"?c/2+d:c+2+d:0,x=0,_=n.length;x<_;++x){for(b=n[x],y=this.labelTextColors[x],e.fillStyle=y,I(b.before,g),w=b.lines,r&&w.length&&(this._drawColorBox(e,t,x,p,s),u=Math.max(h.lineHeight,l)),v=0,k=w.length;v<k;++v)g(w[v]),u=h.lineHeight;I(b.after,g)}f=0,u=h.lineHeight,I(this.afterBody,g),t.y-=o}drawFooter(t,e,s){const n=this.footer,o=n.length;let a,r;if(o){const l=ne(s.rtl,this.x,this.width);for(t.x=ni(this,s.footerAlign,s),t.y+=s.footerMarginTop,e.textAlign=l.textAlign(s.footerAlign),e.textBaseline="middle",a=X(s.footerFont),e.fillStyle=s.footerColor,e.font=a.string,r=0;r<o;++r)e.fillText(n[r],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+s.footerSpacing}}drawBackground(t,e,s,n){const{xAlign:o,yAlign:a}=this,{x:r,y:l}=t,{width:c,height:d}=s,{topLeft:h,topRight:u,bottomLeft:f,bottomRight:p}=Gt(n.cornerRadius);e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.beginPath(),e.moveTo(r+h,l),a==="top"&&this.drawCaret(t,e,s,n),e.lineTo(r+c-u,l),e.quadraticCurveTo(r+c,l,r+c,l+u),a==="center"&&o==="right"&&this.drawCaret(t,e,s,n),e.lineTo(r+c,l+d-p),e.quadraticCurveTo(r+c,l+d,r+c-p,l+d),a==="bottom"&&this.drawCaret(t,e,s,n),e.lineTo(r+f,l+d),e.quadraticCurveTo(r,l+d,r,l+d-f),a==="center"&&o==="left"&&this.drawCaret(t,e,s,n),e.lineTo(r,l+h),e.quadraticCurveTo(r,l,r+h,l),e.closePath(),e.fill(),n.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,s=this.$animations,n=s&&s.x,o=s&&s.y;if(n||o){const a=ke[t.position].call(this,this._active,this._eventPosition);if(!a)return;const r=this._size=qn(this,t),l=Object.assign({},a,this._size),c=Xn(e,t,l),d=Gn(t,l,c,e);(n._to!==d.x||o._to!==d.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=r.width,this.height=r.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let s=this.opacity;if(!s)return;this._updateAnimationTarget(e);const n={width:this.width,height:this.height},o={x:this.x,y:this.y};s=Math.abs(s)<.001?0:s;const a=st(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=s,this.drawBackground(o,t,n,e),Eo(t,e.textDirection),o.y+=a.top,this.drawTitle(o,t,e),this.drawBody(o,t,e),this.drawFooter(o,t,e),Lo(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const s=this._active,n=t.map(({datasetIndex:r,index:l})=>{const c=this.chart.getDatasetMeta(r);if(!c)throw new Error("Cannot find a dataset at index "+r);return{datasetIndex:r,element:c.data[l],index:l}}),o=!pi(s,n),a=this._positionChanged(n,e);(o||a)&&(this._active=n,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,s=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const n=this.options,o=this._active||[],a=this._getActiveElements(t,o,e,s),r=this._positionChanged(a,t),l=e||!pi(a,o)||r;return l&&(this._active=a,(n.enabled||n.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,s,n){const o=this.options;if(t.type==="mouseout")return[];if(!n)return e.filter(r=>this.chart.data.datasets[r.datasetIndex]&&this.chart.getDatasetMeta(r.datasetIndex).controller.getParsed(r.index)!==void 0);const a=this.chart.getElementsAtEventForMode(t,o.mode,o,s);return o.reverse&&a.reverse(),a}_positionChanged(t,e){const{caretX:s,caretY:n,options:o}=this,a=ke[o.position].call(this,t,e);return a!==!1&&(s!==a.x||n!==a.y)}}M(rs,"positioners",ke);var eh={id:"tooltip",_element:rs,positioners:ke,afterInit(i,t,e){e&&(i.tooltip=new rs({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){const t=i.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){const e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aa},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},ih=Object.freeze({__proto__:null,Colors:gd,Decimation:yd,Filler:zd,Legend:Vd,SubTitle:qd,Title:Ud,Tooltip:eh});const sh=(i,t,e,s)=>(typeof t=="string"?(e=i.push(t)-1,s.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function nh(i,t,e,s){const n=i.indexOf(t);if(n===-1)return sh(i,t,e,s);const o=i.lastIndexOf(t);return n!==o?e:n}const oh=(i,t)=>i===null?null:G(Math.round(i),0,t);function Zn(i){const t=this.getLabels();return i>=0&&i<t.length?t[i]:i}class ls extends Qt{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const s=this.getLabels();for(const{index:n,label:o}of e)s[n]===o&&s.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(O(t))return null;const s=this.getLabels();return e=isFinite(e)&&s[e]===t?e:nh(s,t,P(e,t),this._addedLabels),oh(e,s.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:s,max:n}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(s=0),e||(n=this.getLabels().length-1)),this.min=s,this.max=n}buildTicks(){const t=this.min,e=this.max,s=this.options.offset,n=[];let o=this.getLabels();o=t===0&&e===o.length-1?o:o.slice(t,e+1),this._valueRange=Math.max(o.length-(s?0:1),1),this._startValue=this.min-(s?.5:0);for(let a=t;a<=e;a++)n.push({value:a});return n}getLabelForValue(t){return Zn.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}M(ls,"id","category"),M(ls,"defaults",{ticks:{callback:Zn}});function ah(i,t){const e=[],{bounds:n,step:o,min:a,max:r,precision:l,count:c,maxTicks:d,maxDigits:h,includeBounds:u}=i,f=o||1,p=d-1,{min:g,max:m}=t,b=!O(a),y=!O(r),w=!O(c),x=(m-g)/(h+1);let v=Us((m-g)/p/f)*f,_,k,S,T;if(v<1e-14&&!b&&!y)return[{value:g},{value:m}];T=Math.ceil(m/v)-Math.floor(g/v),T>p&&(v=Us(T*v/p/f)*f),O(l)||(_=Math.pow(10,l),v=Math.ceil(v*_)/_),n==="ticks"?(k=Math.floor(g/v)*v,S=Math.ceil(m/v)*v):(k=g,S=m),b&&y&&o&&Za((r-a)/o,v/1e3)?(T=Math.round(Math.min((r-a)/v,d)),v=(r-a)/T,k=a,S=r):w?(k=b?a:k,S=y?r:S,T=c-1,v=(S-k)/T):(T=(S-k)/v,Te(T,Math.round(T),v/1e3)?T=Math.round(T):T=Math.ceil(T));const A=Math.max(qs(v),qs(k));_=Math.pow(10,O(l)?A:l),k=Math.round(k*_)/_,S=Math.round(S*_)/_;let D=0;for(b&&(u&&k!==a?(e.push({value:a}),k<a&&D++,Te(Math.round((k+D*v)*_)/_,a,Qn(a,x,i))&&D++):k<a&&D++);D<T;++D){const C=Math.round((k+D*v)*_)/_;if(y&&C>r)break;e.push({value:C})}return y&&u&&S!==r?e.length&&Te(e[e.length-1].value,r,Qn(r,x,i))?e[e.length-1].value=r:e.push({value:r}):(!y||S===r)&&e.push({value:S}),e}function Qn(i,t,{horizontal:e,minRotation:s}){const n=ft(s),o=(e?Math.sin(n):Math.cos(n))||.001,a=.75*t*(""+i).length;return Math.min(t/o,a)}class _i extends Qt{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return O(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:o}=this;const a=l=>n=e?n:l,r=l=>o=s?o:l;if(t){const l=yt(n),c=yt(o);l<0&&c<0?r(0):l>0&&c>0&&a(0)}if(n===o){let l=o===0?1:Math.abs(o*.05);r(o+l),t||a(n-l)}this.min=n,this.max=o}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:s}=t,n;return s?(n=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,n>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${n} ticks. Limiting to 1000.`),n=1e3)):(n=this.computeTickLimit(),e=e||11),e&&(n=Math.min(e,n)),n}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let s=this.getTickLimit();s=Math.max(2,s);const n={maxTicks:s,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},o=this._range||this,a=ah(n,o);return t.bounds==="ticks"&&mo(a,this,"value"),t.reverse?(a.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),a}configure(){const t=this.ticks;let e=this.min,s=this.max;if(super.configure(),this.options.offset&&t.length){const n=(s-e)/Math.max(t.length-1,1)/2;e-=n,s+=n}this._startValue=e,this._endValue=s,this._valueRange=s-e}getLabelForValue(t){return Ve(t,this.chart.options.locale,this.options.ticks.format)}}class cs extends _i{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=j(t)?t:0,this.max=j(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,s=ft(this.options.ticks.minRotation),n=(t?Math.sin(s):Math.cos(s))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,o.lineHeight/n))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}M(cs,"id","linear"),M(cs,"defaults",{ticks:{callback:Ai.formatters.numeric}});const ze=i=>Math.floor(Ot(i)),Vt=(i,t)=>Math.pow(10,ze(i)+t);function to(i){return i/Math.pow(10,ze(i))===1}function eo(i,t,e){const s=Math.pow(10,e),n=Math.floor(i/s);return Math.ceil(t/s)-n}function rh(i,t){const e=t-i;let s=ze(e);for(;eo(i,t,s)>10;)s++;for(;eo(i,t,s)<10;)s--;return Math.min(s,ze(i))}function lh(i,{min:t,max:e}){t=rt(i.min,t);const s=[],n=ze(t);let o=rh(t,e),a=o<0?Math.pow(10,Math.abs(o)):1;const r=Math.pow(10,o),l=n>o?Math.pow(10,n):0,c=Math.round((t-l)*a)/a,d=Math.floor((t-l)/r/10)*r*10;let h=Math.floor((c-d)/Math.pow(10,o)),u=rt(i.min,Math.round((l+d+h*Math.pow(10,o))*a)/a);for(;u<e;)s.push({value:u,major:to(u),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(o++,h=2,a=o>=0?1:a),u=Math.round((l+d+h*Math.pow(10,o))*a)/a;const f=rt(i.max,u);return s.push({value:f,major:to(f),significand:h}),s}class ds extends Qt{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const s=_i.prototype.parse.apply(this,[t,e]);if(s===0){this._zero=!0;return}return j(s)&&s>0?s:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=j(t)?Math.max(0,t):null,this.max=j(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!j(this._userMin)&&(this.min=t===Vt(this.min,0)?Vt(this.min,-1):Vt(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let s=this.min,n=this.max;const o=r=>s=t?s:r,a=r=>n=e?n:r;s===n&&(s<=0?(o(1),a(10)):(o(Vt(s,-1)),a(Vt(n,1)))),s<=0&&o(Vt(n,-1)),n<=0&&a(Vt(s,1)),this.min=s,this.max=n}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},s=lh(e,this);return t.bounds==="ticks"&&mo(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}getLabelForValue(t){return t===void 0?"0":Ve(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=Ot(t),this._valueRange=Ot(this.max)-Ot(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Ot(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}M(ds,"id","logarithmic"),M(ds,"defaults",{ticks:{callback:Ai.formatters.logarithmic,major:{enabled:!0}}});function hs(i){const t=i.ticks;if(t.display&&i.display){const e=st(t.backdropPadding);return P(t.font&&t.font.size,H.font.size)+e.height}return 0}function ch(i,t,e){return e=$(e)?e:[e],{w:pr(i,t.string,e),h:e.length*t.lineHeight}}function io(i,t,e,s,n){return i===s||i===n?{start:t-e/2,end:t+e/2}:i<s||i>n?{start:t-e,end:t}:{start:t,end:t+e}}function dh(i){const t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),s=[],n=[],o=i._pointLabels.length,a=i.options.pointLabels,r=a.centerPointLabels?E/o:0;for(let l=0;l<o;l++){const c=a.setContext(i.getPointLabelContext(l));n[l]=c.padding;const d=i.getPointPosition(l,i.drawingArea+n[l],r),h=X(c.font),u=ch(i.ctx,h,i._pointLabels[l]);s[l]=u;const f=Z(i.getIndexAngle(l)+r),p=Math.round(_s(f)),g=io(p,d.x,u.w,0,180),m=io(p,d.y,u.h,90,270);hh(e,t,f,g,m)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=gh(i,s,n)}function hh(i,t,e,s,n){const o=Math.abs(Math.sin(e)),a=Math.abs(Math.cos(e));let r=0,l=0;s.start<t.l?(r=(t.l-s.start)/o,i.l=Math.min(i.l,t.l-r)):s.end>t.r&&(r=(s.end-t.r)/o,i.r=Math.max(i.r,t.r+r)),n.start<t.t?(l=(t.t-n.start)/a,i.t=Math.min(i.t,t.t-l)):n.end>t.b&&(l=(n.end-t.b)/a,i.b=Math.max(i.b,t.b+l))}function uh(i,t,e){const s=i.drawingArea,{extra:n,additionalAngle:o,padding:a,size:r}=e,l=i.getPointPosition(t,s+n+a,o),c=Math.round(_s(Z(l.angle+Y))),d=bh(l.y,r.h,c),h=ph(c),u=mh(l.x,r.w,h);return{visible:!0,x:l.x,y:d,textAlign:h,left:u,top:d,right:u+r.w,bottom:d+r.h}}function fh(i,t){if(!t)return!0;const{left:e,top:s,right:n,bottom:o}=i;return!(Pt({x:e,y:s},t)||Pt({x:e,y:o},t)||Pt({x:n,y:s},t)||Pt({x:n,y:o},t))}function gh(i,t,e){const s=[],n=i._pointLabels.length,o=i.options,{centerPointLabels:a,display:r}=o.pointLabels,l={extra:hs(o)/2,additionalAngle:a?E/n:0};let c;for(let d=0;d<n;d++){l.padding=e[d],l.size=t[d];const h=uh(i,d,l);s.push(h),r==="auto"&&(h.visible=fh(h,c),h.visible&&(c=h))}return s}function ph(i){return i===0||i===180?"center":i<180?"left":"right"}function mh(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function bh(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function yh(i,t,e){const{left:s,top:n,right:o,bottom:a}=e,{backdropColor:r}=t;if(!O(r)){const l=Gt(t.borderRadius),c=st(t.backdropPadding);i.fillStyle=r;const d=s-c.left,h=n-c.top,u=o-s+c.width,f=a-n+c.height;Object.values(l).some(p=>p!==0)?(i.beginPath(),Be(i,{x:d,y:h,w:u,h:f,radius:l}),i.fill()):i.fillRect(d,h,u,f)}}function vh(i,t){const{ctx:e,options:{pointLabels:s}}=i;for(let n=t-1;n>=0;n--){const o=i._pointLabelItems[n];if(!o.visible)continue;const a=s.setContext(i.getPointLabelContext(n));yh(e,a,o);const r=X(a.font),{x:l,y:c,textAlign:d}=o;Zt(e,i._pointLabels[n],l,c+r.lineHeight/2,r,{color:a.color,textAlign:d,textBaseline:"middle"})}}function ra(i,t,e,s){const{ctx:n}=i;if(e)n.arc(i.xCenter,i.yCenter,t,0,z);else{let o=i.getPointPosition(0,t);n.moveTo(o.x,o.y);for(let a=1;a<s;a++)o=i.getPointPosition(a,t),n.lineTo(o.x,o.y)}}function xh(i,t,e,s,n){const o=i.ctx,a=t.circular,{color:r,lineWidth:l}=t;!a&&!s||!r||!l||e<0||(o.save(),o.strokeStyle=r,o.lineWidth=l,o.setLineDash(n.dash||[]),o.lineDashOffset=n.dashOffset,o.beginPath(),ra(i,e,a,s),o.closePath(),o.stroke(),o.restore())}function wh(i,t,e){return zt(i,{label:e,index:t,type:"pointLabel"})}class Se extends _i{constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=st(hs(this.options)/2),e=this.width=this.maxWidth-t.width,s=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+s/2+t.top),this.drawingArea=Math.floor(Math.min(e,s)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=j(t)&&!isNaN(t)?t:0,this.max=j(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/hs(this.options))}generateTickLabels(t){_i.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,s)=>{const n=F(this.options.pointLabels.callback,[e,s],this);return n||n===0?n:""}).filter((e,s)=>this.chart.getDataVisibility(s))}fit(){const t=this.options;t.display&&t.pointLabels.display?dh(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,s,n){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((s-n)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,s,n))}getIndexAngle(t){const e=z/(this._pointLabels.length||1),s=this.options.startAngle||0;return Z(t*e+ft(s))}getDistanceFromCenterForValue(t){if(O(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(O(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const s=e[t];return wh(this.getContext(),t,s)}}getPointPosition(t,e,s=0){const n=this.getIndexAngle(t)-Y+s;return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter,angle:n}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:s,right:n,bottom:o}=this._pointLabelItems[t];return{left:e,top:s,right:n,bottom:o}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const s=this.ctx;s.save(),s.beginPath(),ra(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),s.closePath(),s.fillStyle=t,s.fill(),s.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:s,grid:n,border:o}=e,a=this._pointLabels.length;let r,l,c;if(e.pointLabels.display&&vh(this,a),n.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);const u=this.getContext(h),f=n.setContext(u),p=o.setContext(u);xh(this,f,l,a,p)}}),s.display){for(t.save(),r=a-1;r>=0;r--){const d=s.setContext(this.getPointLabelContext(r)),{color:h,lineWidth:u}=d;!u||!h||(t.lineWidth=u,t.strokeStyle=h,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(r,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,s=e.ticks;if(!s.display)return;const n=this.getIndexAngle(0);let o,a;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(n),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const c=s.setContext(this.getContext(l)),d=X(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,a=t.measureText(r.label).width,t.fillStyle=c.backdropColor;const h=st(c.backdropPadding);t.fillRect(-a/2-h.left,-o-d.size/2-h.top,a+h.width,d.size+h.height)}Zt(t,r.label,0,-o,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}}M(Se,"id","radialLinear"),M(Se,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ai.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}}),M(Se,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),M(Se,"descriptors",{angleLines:{_fallback:"grid"}});const Ii={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ot=Object.keys(Ii);function so(i,t){return i-t}function no(i,t){if(O(t))return null;const e=i._adapter,{parser:s,round:n,isoWeekday:o}=i._parseOpts;let a=t;return typeof s=="function"&&(a=s(a)),j(a)||(a=typeof s=="string"?e.parse(a,s):e.parse(a)),a===null?null:(n&&(a=n==="week"&&(ae(o)||o===!0)?e.startOf(a,"isoWeek",o):e.startOf(a,n)),+a)}function oo(i,t,e,s){const n=ot.length;for(let o=ot.indexOf(i);o<n-1;++o){const a=Ii[ot[o]],r=a.steps?a.steps:Number.MAX_SAFE_INTEGER;if(a.common&&Math.ceil((e-t)/(r*a.size))<=s)return ot[o]}return ot[n-1]}function _h(i,t,e,s,n){for(let o=ot.length-1;o>=ot.indexOf(e);o--){const a=ot[o];if(Ii[a].common&&i._adapter.diff(n,s,a)>=t-1)return a}return ot[e?ot.indexOf(e):0]}function kh(i){for(let t=ot.indexOf(i)+1,e=ot.length;t<e;++t)if(Ii[ot[t]].common)return ot[t]}function ao(i,t,e){if(!e)i[t]=!0;else if(e.length){const{lo:s,hi:n}=ks(e,t),o=e[s]>=t?e[s]:e[n];i[o]=!0}}function Sh(i,t,e,s){const n=i._adapter,o=+n.startOf(t[0].value,s),a=t[t.length-1].value;let r,l;for(r=o;r<=a;r=+n.add(r,1,s))l=e[r],l>=0&&(t[l].major=!0);return t}function ro(i,t,e){const s=[],n={},o=t.length;let a,r;for(a=0;a<o;++a)r=t[a],n[r]=a,s.push({value:r,major:!1});return o===0||!e?s:Sh(i,s,n,e)}class Ne extends Qt{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const s=t.time||(t.time={}),n=this._adapter=new Rl._date(t.adapters.date);n.init(e),Me(s.displayFormats,n.formats()),this._parseOpts={parser:s.parser,round:s.round,isoWeekday:s.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:no(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,s=t.time.unit||"day";let{min:n,max:o,minDefined:a,maxDefined:r}=this.getUserBounds();function l(c){!a&&!isNaN(c.min)&&(n=Math.min(n,c.min)),!r&&!isNaN(c.max)&&(o=Math.max(o,c.max))}(!a||!r)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),n=j(n)&&!isNaN(n)?n:+e.startOf(Date.now(),s),o=j(o)&&!isNaN(o)?o:+e.endOf(Date.now(),s)+1,this.min=Math.min(n,o-1),this.max=Math.max(n+1,o)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],s=t[t.length-1]),{min:e,max:s}}buildTicks(){const t=this.options,e=t.time,s=t.ticks,n=s.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&n.length&&(this.min=this._userMin||n[0],this.max=this._userMax||n[n.length-1]);const o=this.min,a=this.max,r=ir(n,o,a);return this._unit=e.unit||(s.autoSkip?oo(e.minUnit,this.min,this.max,this._getLabelCapacity(o)):_h(this,r.length,e.minUnit,this.min,this.max)),this._majorUnit=!s.major.enabled||this._unit==="year"?void 0:kh(this._unit),this.initOffsets(n),t.reverse&&r.reverse(),ro(this,r,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,s=0,n,o;this.options.offset&&t.length&&(n=this.getDecimalForValue(t[0]),t.length===1?e=1-n:e=(this.getDecimalForValue(t[1])-n)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?s=o:s=(o-this.getDecimalForValue(t[t.length-2]))/2);const a=t.length<3?.5:.25;e=G(e,0,a),s=G(s,0,a),this._offsets={start:e,end:s,factor:1/(e+1+s)}}_generate(){const t=this._adapter,e=this.min,s=this.max,n=this.options,o=n.time,a=o.unit||oo(o.minUnit,e,s,this._getLabelCapacity(e)),r=P(n.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,c=ae(l)||l===!0,d={};let h=e,u,f;if(c&&(h=+t.startOf(h,"isoWeek",l)),h=+t.startOf(h,c?"day":a),t.diff(s,e,a)>1e5*r)throw new Error(e+" and "+s+" are too far apart with stepSize of "+r+" "+a);const p=n.ticks.source==="data"&&this.getDataTimestamps();for(u=h,f=0;u<s;u=+t.add(u,r,a),f++)ao(d,u,p);return(u===s||n.bounds==="ticks"||f===1)&&ao(d,u,p),Object.keys(d).sort(so).map(g=>+g)}getLabelForValue(t){const e=this._adapter,s=this.options.time;return s.tooltipFormat?e.format(t,s.tooltipFormat):e.format(t,s.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,o=this._unit,a=e||n[o];return this._adapter.format(t,a)}_tickFormatFunction(t,e,s,n){const o=this.options,a=o.ticks.callback;if(a)return F(a,[t,e,s],this);const r=o.time.displayFormats,l=this._unit,c=this._majorUnit,d=l&&r[l],h=c&&r[c],u=s[e],f=c&&h&&u&&u.major;return this._adapter.format(t,n||(f?h:d))}generateTickLabels(t){let e,s,n;for(e=0,s=t.length;e<s;++e)n=t[e],n.label=this._tickFormatFunction(n.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,s=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+s)*e.factor)}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+s*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,s=this.ctx.measureText(t).width,n=ft(this.isHorizontal()?e.maxRotation:e.minRotation),o=Math.cos(n),a=Math.sin(n),r=this._resolveTickFontOptions(0).size;return{w:s*o+r*a,h:s*a+r*o}}_getLabelCapacity(t){const e=this.options.time,s=e.displayFormats,n=s[e.unit]||s.millisecond,o=this._tickFormatFunction(t,0,ro(this,[t],this._majorUnit),n),a=this._getLabelSize(o),r=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return r>0?r:1}getDataTimestamps(){let t=this._cache.data||[],e,s;if(t.length)return t;const n=this.getMatchingVisibleMetas();if(this._normalized&&n.length)return this._cache.data=n[0].controller.getAllParsedValues(this);for(e=0,s=n.length;e<s;++e)t=t.concat(n[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,s;if(t.length)return t;const n=this.getLabels();for(e=0,s=n.length;e<s;++e)t.push(no(this,n[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return vo(t.sort(so))}}M(Ne,"id","time"),M(Ne,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function oi(i,t,e){let s=0,n=i.length-1,o,a,r,l;e?(t>=i[s].pos&&t<=i[n].pos&&({lo:s,hi:n}=Dt(i,"pos",t)),{pos:o,time:r}=i[s],{pos:a,time:l}=i[n]):(t>=i[s].time&&t<=i[n].time&&({lo:s,hi:n}=Dt(i,"time",t)),{time:o,pos:r}=i[s],{time:a,pos:l}=i[n]);const c=a-o;return c?r+(l-r)*(t-o)/c:r}class us extends Ne{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=oi(e,this.min),this._tableRange=oi(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:s}=this,n=[],o=[];let a,r,l,c,d;for(a=0,r=t.length;a<r;++a)c=t[a],c>=e&&c<=s&&n.push(c);if(n.length<2)return[{time:e,pos:0},{time:s,pos:1}];for(a=0,r=n.length;a<r;++a)d=n[a+1],l=n[a-1],c=n[a],Math.round((d+l)/2)!==c&&o.push({time:c,pos:a/(r-1)});return o}_generate(){const t=this.min,e=this.max;let s=super.getDataTimestamps();return(!s.includes(t)||!s.length)&&s.splice(0,0,t),(!s.includes(e)||s.length===1)&&s.push(e),s.sort((n,o)=>n-o)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),s=this.getLabelTimestamps();return e.length&&s.length?t=this.normalize(e.concat(s)):t=e.length?e:s,t=this._cache.all=t,t}getDecimalForValue(t){return(oi(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,s=this.getDecimalForPixel(t)/e.factor-e.end;return oi(this._table,s*this._tableRange+this._minPos,!0)}}M(us,"id","timeseries"),M(us,"defaults",Ne.defaults);var Mh=Object.freeze({__proto__:null,CategoryScale:ls,LinearScale:cs,LogarithmicScale:ds,RadialLinearScale:Se,TimeScale:Ne,TimeSeriesScale:us});const Th=[Ol,rd,ih,Mh];kt.register(...Th);const Dh=[{term:"Abstract",definition:"A brief summary at the beginning of a research paper outlining the study's purpose, methods, results, and conclusions."},{term:"Citation",definition:"A reference to another study or source, showing where information came from and allowing readers to verify claims."},{term:"Conflict of Interest",definition:"When researchers have financial, professional, or personal interests that could influence their work. Good studies declare these transparently."},{term:"Control Group",definition:"A comparison group that doesn't receive the treatment being tested, used to determine if an intervention actually works."},{term:"Correlation vs. Causation",definition:"Correlation means two things happen together; causation means one causes the other. Correlation does NOT prove causation."},{term:"Data",definition:"The information collected during a study, which can include measurements, observations, survey responses, or other recorded facts."},{term:"Hypothesis",definition:"A testable prediction about what will happen in a study, based on existing knowledge or theory."},{term:"Methods",definition:"The section describing how the study was conducted, including participants, materials, procedures, and analysis techniques."},{term:"Open Access",definition:"Research papers that are freely available to read online without a paywall or subscription. Anyone can access the full text immediately."},{term:"Open Data",definition:"When researchers make their raw data publicly available so others can verify results and conduct their own analyses."},{term:"Paywall",definition:"A barrier that requires payment (often $30+) or institutional access to read a research paper. This limits who can verify the science."},{term:"Peer Review",definition:"A process where other experts in the field evaluate a research paper before publication to check its quality and validity."},{term:"Predatory Journal",definition:"A publication that accepts papers without proper peer review, often charging fees. These journals prioritize profit over scientific quality."},{term:"Preprint",definition:"An early version of a research paper shared publicly before peer review. Useful for rapid communication but not yet vetted by experts."},{term:"Preregistration",definition:"Declaring your research plan and analysis methods publicly before collecting data, which reduces bias and questionable research practices."},{term:"Replication",definition:"Repeating a study to see if the same results occur. Replicable findings are more trustworthy than one-off results."},{term:"Results",definition:"The section presenting what the study found, including statistical outcomes and data visualizations."},{term:"Sample Size",definition:"The number of participants (<i>N</i>) or observations in a study. Larger samples generally provide more reliable results."},{term:"Statistical Significance",definition:"A measure of whether results are likely due to chance or represent a real effect. Typically set at p < 0.05, but context matters."},{term:"Theory",definition:"A well-established explanation for a phenomenon, supported by substantial evidence from multiple studies."},{term:"Variable",definition:"Any factor that can change or be measured in a study, such as age, temperature, or test scores."}],Ph=[{name:"Title",low:"Clickbait: Uses words like 'Miracle,' 'Proven,' 'Cure.' Scarier or better than the actual data.",medium:"Modest: Describes the finding but might leave out limitations to sound more interesting.",high:"Accurate: Boring but true. Describes exactly what happened (e.g., 'Correlation observed in mice')."},{name:"Access",low:"Impossible: Behind a paywall ($30+), no link provided, or 'Contact author' with no reply.",medium:"Difficult: Requires university login, searching through specific databases, or requesting via forums.",high:"Open: One-click access to the full PDF. Free for everyone (Open Access)."},{name:"Source",low:"Suspicious: Marketing blogs, 'Predatory' journals (pay-to-publish), or corporate white papers.",medium:"Unverified: Preprints (not yet reviewed), or mid-tier journals that sometimes favour hype.",high:"Trusted: Top-tier peer-reviewed journals, reputable independent research institutes, or government bodies."},{name:"Theory",low:"Nonsense: Ignores all previous science. Invents new laws of physics/biology without proof.",medium:"Standard: Repeats what we already know without adding much new value.",high:"Robust: Fills a clear gap in knowledge. Uses past research responsibly to build a new argument."},{name:"Methods & Data",low:"Flawed & Closed: Tiny sample size. No control group. Data is secret/hidden.",medium:"Acceptable: Decent sample size. Standard methods. Data available upon request.",high:"Rigorous & Open: Preregistration, large sample size, gold-standard controls, and fully available materials and data."},{name:"Conclusion",low:"Overblown: Claims a fact based on a guess. Confuses correlation with causation.",medium:"Logical: Conclusion mostly fits the results but ignores some alternative explanations.",high:"Nuanced: Very careful. Admits what they don't know. Claims only what the data proves."}],Ah=[{id:"STUDY-1",title:"The impact of chocolate-based breakfasts on mathematical performance in school-aged children",access:"Freely accessible online (Open Access). The journal charges authors a publication fee rather than readers  a common model in predatory publishing that creates the appearance of openness while bypassing rigorous peer review.",overview:"The study relies on the simplified premise that glucose provides immediate fuel for the brain. However, it fails to engage with the substantial body of existing literature describing the sugar crash effect and the impact of sustained energy release on cognitive concentration.",methods:"The researchers observed <i>N</i>=12 children in a single classroom for three days. There was no control group (e.g., children eating a standard breakfast) to compare against. Data availability: The authors state that raw data and individual test scores are not shared due to commercial sensitivity regarding the chocolate brand involved.",conclusion:"The authors conclude that chocolate should be mandatory in school breakfasts to improve national grades. This is a massive generalisation based on a tiny, uncontrolled sample.",source:"Predatory Journal. Published in a pay-to-publish outlet with no rigorous peer review process, often used for marketing stunts disguised as science."},{id:"STUDY-2",title:"New alloy shows promise for lighter aircraft components",access:"Direct PDF link available (Open Access).",overview:"The study builds on standard metallurgical theories regarding titanium-aluminium blends, specifically addressing a known gap in the literature regarding heat resistance at high altitudes. It uses previous stress-testing models responsibly to predict performance.",methods:"The team conducted rigorous stress-testing in controlled lab conditions, repeating the fracture test 500 times. Data availability: Stress-test logs and statistical code are uploaded to a public repository (OSF/GitHub). However, the precise alloy composition ratios have been withheld pending a patent application, which prevents full independent replication of the material itself.",conclusion:"The conclusion is cautious. It states the alloy is significantly lighter but notes it is currently too expensive for commercial use, suggesting further research into manufacturing costs is required.",source:"Respected Field-Specific Journal. A well-regarded peer-reviewed publication specialising in materials science and engineering."},{id:"STUDY-3",title:"The effect of pre-sleep screen time on sleep onset latency",access:"Accessible with difficulty (requires searching the DOI in a university library or using Sci-Hub).",overview:"The hypothesis is grounded in well-established theories regarding blue light emission and the suppression of melatonin (the sleep hormone). It cites robust prior research on circadian rhythms.",methods:"The study surveyed 2,000 adults. However, it relied entirely on self-reported data (participants estimated how much they slept), which is often inaccurate compared to objective tracking. Data availability: Summary tables are provided in the appendix, but raw participant data is not available to protect privacy.",conclusion:"The authors suggest a link between phone use and insomnia but responsibly acknowledge reverse causalitynoting that anxious people might be using their phones because they cannot sleep, rather than the phone causing the sleeplessness.",source:"High-Impact Generalist Journal. A prestigious journal that covers broad scientific topics; known for rigorous peer review but occasionally favours studies with mass appeal."},{id:"STUDY-4",title:"The neuroprotective effects of a daily herbal tea infusion on Alzheimer's disease prevention",access:"Free to read online (Open Access). Like many predatory journals, this outlet charges authors a fee to publish rather than charging readers  a misleading signal of quality.",overview:"The premise is loosely based on traditional folk medicine practices. It ignores current neurological understanding of amyloid plaques and tau tangles, which are the primary biological markers of Alzheimer's disease.",methods:"A 6-week observational study of 40 people who already chose to drink the tea daily. There was no randomised control group. Cognition was measured via brief phone interviews rather than clinical scanning. Data availability: Raw data unavailable due to participant confidentiality.",conclusion:"Overblown. The study confuses a short-term feeling of alertness (likely from caffeine) with the long-term prevention of a complex neurodegenerative disease.",source:"Predatory Journal. The journal website contains broken English and promises publication within 48 hours for a fee, indicating zero peer review."},{id:"STUDY-5",title:"Specific pesticide shows minimal impact on honey bee navigation in field conditions",access:"Open Access (Direct PDF link).",overview:"The study investigates the ecological validity of previous lab-based findings. It questions whether the harm seen in petri dishes translates to real-world farming environments, a valid scientific question.",methods:"A large-scale field trial across 20 farms over two years, using RFID tags to track thousands of individual bees. The methodology was pre-registered (declared before the experiment started) to prevent cherry-picking results. Data availability: Full datasets and tracking code are uploaded to a public repository (Zenodo).",conclusion:"Cautious and specific. It states that at current agricultural usage levels, this specific chemical does not significantly impair homing flight, but explicitly warns against applying this finding to other insect species.",source:"Respected Field-Specific Journal. Published in a top-tier peer-reviewed journal dedicated to ecology and entomology. Note: the field trial was co-funded by the manufacturer of the pesticide under study  a declared conflict of interest. The preregistration limits bias, but commercial influence on which results get published cannot be ruled out."},{id:"STUDY-6",title:"A causal link between Instagram use and adolescent anxiety",access:"Accessible with difficulty (via university library subscription).",overview:"Uses standard social psychology theories regarding social comparison and self-esteem. However, it assumes a direct causal vector without accounting for the complexity of adolescent mental health.",methods:"A cross-sectional survey of 5,000 teenagers taken at a single point in time. While the sample size is large, the method relies entirely on self-reporting for both hours used and anxiety levels. Data availability: Summary statistics provided; raw data available only upon request to the lead author.",conclusion:"Logical but limited. The study establishes a strong correlation but the authors (and the title) imply causation. They fail to address whether anxious teens simply retreat to social media more often.",source:"Mid-Tier Psychology Journal. A legitimate peer-reviewed journal, though one that occasionally publishes correlational studies with catchy titles to boost its impact factor."},{id:"STUDY-7",title:"Eliminating gender bias in recruitment with a novel AI hiring tool",access:"A white paper published directly on the tech companys website (free, but requires an email sign-up).",overview:"The approach assumes that simply removing names from CVs is sufficient to de-bias an algorithmic process. It fails to engage with literature on proxy variables (how AI finds other patterns that correlate with gender).",methods:"The developers tested the AI using CVs from their own previous hiring rounds. They did not account for the fact that their historical hiring data was already biased against women, meaning the AI learned to replicate that bias. Data availability: Data and algorithms are proprietary intellectual property and cannot be shared.",conclusion:"Incorrect. The study claims success because names were hidden, but independent analysis later showed the AI penalised applicants who attended women's colleges or played women's sports.",source:"Corporate White Paper. This is marketing material, not a peer-reviewed scientific study. It has not been vetted by independent experts."},{id:"STUDY-8",title:"Marginal efficiency gains in perovskite solar cells through new layering technique",access:"Accessible via institutional subscription (paywalled). The journal does not offer open access by default; an author-accepted manuscript may be available through a preprint server.",overview:"The study directly addresses a known engineering bottleneck in electron transport layers. It references the specific physics of perovskite crystal degradation responsibly.",methods:"Rigorous laboratory testing under standard solar simulation conditions. The experiment was replicated by a second, independent lab before publication. Data availability: Spectral data and test results are fully published; however, the precise fabrication parameters for the proprietary layer composition have been withheld pending patent approval, limiting full independent replication.",conclusion:"Accurate and boring. Reports a 1.5% efficiency increase. Critically, it notes that the new material degrades faster in humidity, admitting it is not yet ready for commercial use.",source:"Top-Tier Generalist Journal. Published in a journal equivalent to Nature or Science, known for publishing significant breakthroughs with rigorous review."},{id:"STUDY-9",title:"Cognitive desensitisation to real-world pain imagery following violent video game exposure",access:"Behind a paywall.",overview:"Relies on theories of cognitive desensitisation but attempts to map complex behavioural psychology onto simple blood-flow changes in the brain without sufficient justification.",methods:"A laboratory study of 60 university students. Half played a violent game for 20 minutes, half played a puzzle game, then viewed images of injuries whilst in an fMRI scanner. The analysis of specific brain regions was NOT preregistered. Data availability: Data not shared.",conclusion:"The authors claim a definitive link to real-world violence based only on short-term brain activity changes. They did not measure actual aggressive behaviour or long-term effects.",source:"Mid-Tier Journal. A legitimate journal, but one that has been criticised in the past for accepting small-sample neuroscience studies with overreaching titles."},{id:"STUDY-10",title:"Prevalence of microplastic contamination in human blood samples",access:"Open Access.",overview:"Investigates the bioaccumulation of polymers in the human body. This is a novel field, so the theoretical framework is exploratory rather than established.",methods:"The team developed a novel, highly sensitive chemical analysis method (mass spectrometry) to detect tiny plastic particles. Stringent contamination controls were used to ensure plastics from the lab equipment didn't affect results. Data availability: Full methodology and anonymised data concentrations are freely available.",conclusion:"Nuanced and alarming. It confirms the presence of plastics in blood but explicitly states that the health implications of these specific concentrations are currently unknown and require urgent further study.",source:"High-Impact Generalist Journal. Published in a world-leading journal with extremely high rejection rates and rigorous statistical review."},{id:"STUDY-11",title:"An evolutionary explanation for the correlation between height and CEO status in males",access:"Freely available for download (preprint server). Because the paper has not been accepted by a journal, there is no paywall  anyone can read it immediately.",overview:"Uses evolutionary psychology to suggest height signals dominance. It fails to account for the halo effect (social bias) and treats modern corporate structures as if they are prehistoric hunter-gatherer societies.",methods:"The authors looked at the height of CEOs in Fortune 500 companies and compared them to the national average. No measure of actual company performance, profit or leadership skill was included. Data availability: A spreadsheet of CEO heights is available on request.",conclusion:"Overblown. It confuses a societal bias (we promote tall men) with an inherent evolutionary ability (tall men are better leaders).",source:"Preprint Server. The paper has been uploaded to a server but has not yet been peer-reviewed or accepted by a journal."},{id:"STUDY-12",title:"Comparative Efficacy of Lavender Essential Oil vs. Hypnotic Drugs in the Treatment of Insomnia",access:"Behind paywall.",overview:"Based on aromatherapy principles suggesting lavender affects GABA neurotransmitters. However, the mechanism is poorly understood and the study ignores the pharmacological complexity of benzodiazepines.",methods:"A pilot randomised trial of 60 people with mild insomnia. Participants were assigned to lavender oil inhalation, placebo scent, or no treatment. Sleep was measured via self-reported diaries only (no objective actigraphy). The study was not blindedparticipants knew if they received lavender. Data availability: Summary statistics only.",conclusion:"Overblown. The study found a small subjective improvement in sleep onset (15 minutes) but the title claims it 'cures insomnia faster than pills' based on no direct comparison to medication.",source:"Low-Tier Complementary Medicine Journal. A peer-reviewed journal, but one that publishes small, underpowered aromatherapy studies with weak methodology."},{id:"STUDY-13",title:"Dietary Adaptation of Urban Foxes to Include High Levels of Anthropogenic Food Waste",access:"Behind a paywall.",overview:"Relies on standard ecological theory regarding dietary plasticity in opportunistic omnivores (animals that eat anything). It fits well with existing urban ecology literature.",methods:"Rigorous analysis of stomach contents of 300 deceased foxes collected over five years across three cities. Results were compared against rural fox diets. Data availability: Summary tables in the appendix; full dietary datasets nominally available on request, though the corresponding author's response to data-sharing enquiries has reportedly been slow  an effective barrier to independent reanalysis.",conclusion:"Solid. It concludes that urban foxes are highly dependent on anthropogenic (human) food sources, which may have implications for their health and population density.",source:"Respected Field-Specific Journal. A specialised journal for Zoology and Ecology, known for solid, data-driven science."},{id:"STUDY-14",title:"The viability of edible crop cultivation in simulated Martian regolith",access:"Open Access.",overview:"Addresses a crucial gap in knowledge regarding In-Situ Resource Utilisation for future space missions. It applies standard botanical knowledge to a novel soil environment.",methods:"A greenhouse experiment using NASA-developed Mars soil simulant (Regolith). Tested various crop types with different fertiliser additives. Control groups used standard Earth soil. Data availability: All plant growth metrics, soil composition analysis and watering schedules are freely downloadable.",conclusion:"Optimistic but careful. Crops grew, but the authors note they accumulated heavy metals present in the Mars simulant, making them unsafe to eat without further processing. The title misses this vital caveat.",source:"Respected Field-Specific Journal. Published in a leading journal for Space and Planetary Science."},{id:"STUDY-15",title:"The Effect of Passive Listening to Classical Music on Abstract Reasoning Performance",access:"Behind a paywall.",overview:"A rehash of the Mozart Effect, a theory largely debunked by modern psychology. It suggests passive listening boosts general intelligence, rather than just temporary arousal or mood.",methods:"30 students took a short logic test after 10 minutes of Mozart, and another test after 10 minutes of silence, in counterbalanced order (half took Mozart first) to control for learning effects. It did not measure IQ (which is a stable trait), but rather performance on one specific puzzle. The hypothesis was not preregistered. Data availability: Individual test scores are deposited in the journal's supplementary data repository.",conclusion:"Overblown. It found a tiny, temporary improvement in one task and generalised it to raising IQ, implying a permanent cognitive upgrade.",source:"Low-Tier Journal. A peer-reviewed journal, but one with a low impact factor that often publishes novelty psychology studies."},{id:"STUDY-16",title:"The Impact of Freezing Temperatures on Electric Vehicle Battery Range",access:"Open Access.",overview:"Based on known electrochemical properties of lithium-ion batteries. Electrolyte fluid becomes more viscous and internal resistance increases in cold climates; the theory is solid physics.",methods:"Tested five popular EV models in climate-controlled chambers running standard driving cycles at +20C and -10C to ensure fair comparison. Data availability: Full test protocols and detailed discharge curves for all vehicles are available on the institute's website.",conclusion:"Accurate. The study provides real-world data confirming a known limitation of current battery technology. It does not attack EVs but informs consumers in cold climates.",source:"National Research Institute Report. Published by a government-funded transport research body. Highly credible and independent of car manufacturers."},{id:"STUDY-17",title:"A Self-Reported Analysis of Productivity in Remote vs. Office-Based Work Environments",access:"A PDF report downloadable from a website.",overview:"N/A. This is a purely explorative survey with no grounding in management theory or organisational psychology.",methods:"An online survey of 2,000 workers. Productivity was measured solely by asking participants: Do you feel more productive at home? Data availability: Proprietary data, not shared.",conclusion:"Flawed. It uses a subjective feeling (I feel productive) as an objective measure of output.",source:"Corporate Marketing Report. The study was conducted and published by a management consultancy firm that sells remote-work software. A clear conflict of interest."},{id:"STUDY-18",title:"The Role of Gut Microbiota Imbalance as a Primary Causal Factor in Depression",access:"Accessible with difficulty (specialist microbiology journal).",overview:"Investigates the gut-brain axis, a legitimate and exciting new field. However, the theory reduces a complex biopsychosocial disorder (depression) to a single biological cause.",methods:"Transferred fecal microbiota from depressed humans into sterile mice. The specific behavioural scoring criteria were preregistered. The mice showed behavioural changes associated with rodent stress. Data availability: Data available upon request.",conclusion:"Overblown title. The study shows an interesting mechanism in mice, but the title makes a massive leap to claiming it is the sole cause of depression in humans, ignoring trauma and social factors.",source:"Respected Field-Specific Journal. A solid microbiology journal. The study itself is sound; the overreaching title is the problem."},{id:"STUDY-19",title:"A 2,000-year reconstruction of Northern Hemisphere summer temperatures",access:"Behind a paywall (institutional subscription required). Like most journals in this publishing family, the final version requires a subscription. An author-accepted manuscript is available through some university repositories.",overview:"Dendroclimatology (using tree rings as proxies for past climate). The study uses established protocols for calibrating tree ring width against known temperature records.",methods:"Combined thousands of tree-ring datasets from across Europe and Asia. Used rigorous statistical modelling to account for uncertainties and outliers. Data availability: The entire dataset of proxy records and the reconstruction code are hosted on the NOAA Paleoclimatology database.",conclusion:"Robust. It shows current warming is unprecedented in the context of the last two millennia. The conclusion is highly specific about geographical limitations and statistical margins of error.",source:"Top-Tier Generalist Journal. Published in a prestigious journal (e.g., Nature) known for strictly reviewing climate models."},{id:"STUDY-20",title:"The stabilising effect of Bitcoin adoption on the economy of a developing nation",access:"A PDF uploaded to a crypto-enthusiast server.",overview:"Relies on unorthodox economic theories promoted by cryptocurrency advocates, often ignoring standard monetary policy principles regarding inflation and liquidity.",methods:"Looks at economic indicators in the country over a very short period (3 months) after adoption. It ignores massive external factors, such as global oil prices, which affected that economy simultaneously. Data availability: Links to some public charts provided, but no raw economic dataset included.",conclusion:"Flawed correlation. It attributes short-term stabilisation entirely to Bitcoin without evidence, ignoring confounding variables.",source:"Preprint / Blog Post. This is a non-peer-reviewed paper hosted on a community server. It has not been vetted by economists."},{id:"STUDY-21",title:"A Comparative Life-Cycle Assessment of Vertical Farming and Traditional Agriculture",access:"Open Access.",overview:"Uses Life-Cycle Assessment (LCA), a standardised framework for assessing environmental impacts associated with all stages of a product's life.",methods:"Compared data from three operational vertical farms against average data for conventional field farming of lettuce. Accounted for energy use for lighting/heating vs diesel for tractors/transport. Data availability: Full LCA assumptions and input data tables provided in the appendix.",conclusion:"Nuanced. It reveals a trade-off: vertical farming saves land and water, but currently requires massive amounts of electricity, making it higher carbon depending on the local energy grid.",source:"Respected Field-Specific Journal. Published in a reputable journal focusing on Sustainability and Agricultural Science."},{id:"STUDY-22",title:"Objective Tracking of Late-Night Smartphone Use and its Association with Lower Sleep Quality in Adolescents",access:"Behind a paywall.",overview:"Builds on previous survey data but aims to correct the recall bias (memory errors) of those studies by using digital tracking.",methods:"500 teenagers installed an app that tracked exact phone usage times and wore an actigraphy wristband to measure actual sleep patterns for two weeks. The statistical analysis plan was preregistered on OSF to prevent <i>p</i>-hacking. Data availability: Anonymised, aggregated data is available on the Open Science Framework (OSF), but individual raw traces are hidden for privacy.",conclusion:"Strong. The use of objective measurement tools removes memory bias. The conclusion accurately reports a significant negative correlation between screen usage after 10 PM and sleep duration.",source:"High-Impact Generalist Journal. A top-tier journal known for rigorous medical and health sciences research."},{id:"STUDY-23",title:"The efficacy of a novel peptide cream in reversing signs of dermal aging",access:"Behind paywall.",overview:"Investigates topical peptides for collagen synthesis. The biological mechanism (peptide penetration through the stratum corneum) is questionable, and the study does not address bioavailability concerns raised in dermatology literature.",methods:"Company-sponsored trial of 120 women aged 40-60. Participants applied the cream twice daily for 12 weeks. Outcomes measured via participant self-assessment questionnaires ('How old does your skin look?') and non-blinded researcher ratings of photographs. No placebo cream control. Data availability: Published summary only; raw data proprietary.",conclusion:"Overblown. While participants reported feeling their skin looked younger, objective measures like wrinkle depth were not assessed. The title's '20 years younger' claim is based on subjective perception in an unblinded study.",source:"Low-Tier Dermatology Journal. Peer-reviewed but known for accepting industry-sponsored cosmetic studies with weak controls."},{id:"STUDY-24",title:"The efficacy of mindfulness meditation as an intervention for chronic pain: A systematic review",access:"Open Access via Cochrane Library.",overview:"Meta-analysis of 38 randomised controlled trials investigating mindfulness-based interventions for chronic pain conditions. Uses established frameworks from pain neuroscience and psychological interventions.",methods:"Systematic review following Cochrane protocols. Included 3,500+ participants across multiple pain conditions. Pre-registered methodology. Independent reviewers assessed bias. Full PRISMA checklist provided. Data availability: All extracted data and analysis code publicly available.",conclusion:"Cautious and specific. Reports moderate effect size for pain reduction (<i>d</i>=0.33) but notes high heterogeneity between studies. Acknowledges mindfulness works better for some pain types than others and cannot replace medical treatment.",source:"Cochrane Database of Systematic Reviews. Gold-standard source for evidence synthesis. Rigorous peer review and editorial oversight."},{id:"STUDY-25",title:"The application of structured water therapy in chronic disease management",access:"Open access in complementary medicine journal.",overview:"Tests the hypothesis that magnetically-treated water alters H2O molecular clusters, potentially affecting cellular hydration. The proposed mechanism conflicts with established chemistry, but the study attempts to investigate outcomes empirically.",methods:"A non-randomised trial of 80 adults with various chronic conditions (diabetes, arthritis, depression). Half received 'structured water' treatment (water exposed to magnetic fields), half received regular water, but assignment was not blinded. Outcomes measured via self-reported symptom questionnaires over 8 weeks. No objective biomarkers (blood glucose, inflammation markers) were measured. Data availability: Full dataset provided in supplementary materials.",conclusion:"Overblown. The study found subjective improvements in self-reported symptoms but cannot distinguish placebo effects from treatment. The title's claim about 'curing' diseases is not supported by the actual findings.",source:"Low-Tier Complementary Medicine Journal. Peer-reviewed but specialises in alternative therapies and has lower methodological standards than mainstream medical journals."},{id:"STUDY-26",title:"A phase III trial of a novel Alzheimer's drug and its effect on cognitive decline",access:"Behind paywall (45 per article).",overview:"Investigates monoclonal antibody targeting amyloid-beta plaques. Grounded in established Alzheimer's pathology but outcome measure (CDR-SB scale) is somewhat controversial in the field.",methods:"Randomised, double-blind, placebo-controlled trial. <i>N</i>=1,800 participants across 200 sites. 18-month follow-up. However, dropout rate was high (32%), and post-hoc subgroup analyses not pre-registered. Data availability: Summary statistics only; full data available to qualified researchers upon request.",conclusion:"The title overstates findings. The 27% figure refers to relative slowing on one cognitive scale, not functional improvement. Paper acknowledges the drug doesn't restore lost function and has significant side effects (brain swelling in 13% of participants).",source:"High-Impact Medical Journal. Well-respected but the study was funded entirely by the pharmaceutical company developing the drug."},{id:"STUDY-27",title:"The predictive relationship between income inequality and population health outcomes: A longitudinal study",access:"Open Access.",overview:"Uses 40 years of data across 50 countries to examine Gini coefficient and health metrics. Builds on established social epidemiology theories and addresses confounders like absolute poverty and healthcare spending.",methods:"Sophisticated multi-level modelling using WHO and World Bank datasets. Pre-registered analysis plan. Extensive sensitivity analyses. Controls for GDP, healthcare access, education. Data availability: All code and datasets publicly archived. Note: approximately 15% of country-year observations had missing health data requiring multiple imputation; sensitivity analyses confirm findings are robust, but the imputation assumptions are consequential.",conclusion:"Robust but carefully worded. Shows strong association between inequality and life expectancy, infant mortality, and mental health even after controlling for absolute wealth. Acknowledges causation cannot be proven from observational data.",source:"Top-Tier Public Health Journal. Known for rigorous statistical review and replication-friendly practices."},{id:"STUDY-28",title:"The effect of a proprietary energy drink formula on athletic performance",access:"Company-funded study summary on corporate website.",overview:"Tests proprietary caffeine-taurine blend. Ignores decades of sports science showing caffeine effects plateau and vary hugely by individual tolerance.",methods:"Compared 20 athletes drinking the energy drink vs water. No blinding (athletes knew which drink they got). Performance measured on company-owned equipment. No independent verification. Data availability: Proprietary.",conclusion:"Cherry-picked results. The 35% figure comes from one specific sprint test; overall performance improvement was minimal and within normal day-to-day variation.",source:"Corporate White Paper. Research conducted by company's own lab. Lead author is the company's Chief Marketing Officer."},{id:"STUDY-29",title:"An analysis of leaked documents purporting to show underreported vaccine injury rates",access:"Free PDF on conspiracy theory website.",overview:"Misinterprets VAERS data (a passive reporting system for any health event after vaccination, not proven causation). Ignores statistical principles and how VAERS actually works.",methods:"No original research. Selectively quotes decontextualised sentences from regulatory documents. Conflates correlation with causation. No statistical analysis of baseline rates.",conclusion:"Dangerously misleading. Presents normal background illness rates as vaccine injuries. Does not mention that VAERS reports are unverified and anyone can submit them.",source:"Conspiracy Website. Anonymous author. Website also promotes COVID denialism and sells unregulated supplements."},{id:"STUDY-30",title:"Association between Mediterranean diet adherence and dementia risk: A 25-year follow-up study",access:"Behind paywall.",overview:"Prospective cohort study using validated food frequency questionnaires. Builds on established nutrition epidemiology and neurodegeneration research.",methods:"Followed 8,000 participants for 25 years. Used standardised dementia assessments. Controlled for education, exercise, smoking, genetics (APOE4). However, diet was self-reported (not objectively measured) and adherence could change over time. Data availability: Aggregate data in appendix; individual data on request.",conclusion:"Well-balanced. Reports 23% lower dementia incidence in high Mediterranean diet adherence group but acknowledges this is observational and cannot prove the diet caused the reduction (healthier people might choose healthier diets).",source:"Respected Medical Journal. Good reputation but not top-tier. Appropriately rigorous peer review."},{id:"STUDY-31",title:"The impact of daily reading to infants on language skill acquisition at age 3: A randomised trial",access:"Behind a paywall (institutional subscription). Despite being a strong study, the journal does not offer free access by default.",overview:"Tests early literacy intervention grounded in developmental psychology and neurolinguistics. Addresses known socioeconomic disparities in language exposure.",methods:"Cluster-randomised trial (randomisation at community health centre level). <i>N</i>=600 families. Intervention group received books and training. Control group received standard care. Assessments blinded. Pre-registered outcomes. Data availability: De-identified data and analysis scripts on OSF.",conclusion:"Measured and specific. Reports significant improvements in vocabulary and grammar but notes effects were strongest in lower-income families and attenuated by age 5. Does not claim reading alone solves educational inequality.",source:"Top-Tier Developmental Psychology Journal. Known for emphasis on replication and open science."},{id:"STUDY-32",title:"A review of claims linking 5G mobile networks to cancer, autism, and infertility",access:"Shared on social media, links to pseudoscience portal.",overview:"Conflates 5G radio waves with ionising radiation (completely different types of electromagnetic radiation). Ignores physics and biology of how radiation interacts with tissue.",methods:"No study. Article cites unnamed 'scientists' and misrepresents quotes from unrelated research on high-dose ionising radiation (like X-rays).",conclusion:"Pure misinformation. Radio frequency radiation from 5G is non-ionising (cannot break DNA bonds). Claims are biologically impossible at real-world exposure levels.",source:"Social Media Post / Pseudoscience Website. No peer review. Site also promotes flat Earth theory."},{id:"STUDY-33",title:"A machine learning algorithm for early detection of pancreatic cancer from routine blood tests",access:"Open Access.",overview:"Uses metabolomics and machine learning on electronic health records. Pancreatic cancer is notoriously hard to detect early, so this addresses a critical clinical gap.",methods:"Analysed blood samples from 500 eventual pancreatic cancer patients and 1,500 matched controls. External validation cohort of 400 patients. Algorithm development properly separated from testing set. Cross-validated. Data availability: Model code is open-sourced; patient data is technically available to approved researchers, but access requires a formal ethics committee review  a process that typically takes 612 months and is accessible mainly to well-resourced academic institutions.",conclusion:"Promising but appropriately cautious. Notes the 92% accuracy needs prospective validation before clinical use. Acknowledges false positives would cause anxiety and unnecessary procedures. Calls for multi-site replication.",source:"High-Impact Medical AI Journal. Requires detailed reporting of AI methods and external validation."},{id:"STUDY-34",title:"The role of an alkaline diet in cancer prevention through blood pH regulation",access:"Free e-book on wellness influencer's website.",overview:"Fundamentally misunderstands human physiology. Blood pH is tightly regulated (7.35-7.45) regardless of diet; if it changed significantly, you would die.",methods:"No research. Cites debunked theories and misunderstands how metabolism works. No mention of actual cancer biology.",conclusion:"Nonsense. The body maintains pH through breathing and kidney function, not food. Cancer is caused by genetic mutations, not 'acidic blood.'",source:"Wellness Influencer Blog. Author has no medical or scientific credentials. Sells alkaline water machines and supplements."},{id:"STUDY-35",title:"Association between urban green space access and rates of anxiety and depression",access:"Behind paywall.",overview:"Uses satellite imagery to quantify green space and links to mental health survey data. Grounded in environmental psychology and stress-reduction theories.",methods:"Cross-sectional study of 15,000 adults across 50 cities. Clever use of objective green space metrics (NDVI from satellites). However, correlation study - can't prove causation (maybe wealthier, less stressed people move near parks). Data availability: Summary stats only.",conclusion:"Plausible but limited. Shows association but authors acknowledge reverse causation possibility and confounders like income. Calls for experimental interventions.",source:"Mid-Tier Environmental Health Journal. Legitimate peer review but not the most rigorous in the field."},{id:"STUDY-36",title:"The effect of a probiotic yogurt on immune function markers",access:"Press release; full study not published.",overview:"Tests proprietary bacterial strains. Uses 'immune function' vaguely (the immune system has hundreds of components - which one improved?).",methods:"Company internal study. Measured one non-specific immune marker (IgA in saliva) in 30 people for 2 weeks. No control group, no published protocol. Data availability: None.",conclusion:"Marketing claims. The 80% refers to a temporary spike in one immune marker, not actual infection resistance or health outcomes.",source:"Food Company Press Release. Not peer-reviewed. Study conducted by company employees."},{id:"STUDY-37",title:"Psilocybin-assisted therapy for treatment-resistant depression: A double-blind RCT",access:"Open Access.",overview:"Investigates psychedelic therapy for depression. Builds on neuroscience of serotonin receptors and psychological theories of set/setting in psychedelic therapy.",methods:"Randomised, double-blind, placebo-controlled trial. <i>N</i>=100 patients who failed at least 2 antidepressants. Rigorous screening, therapy protocol standardised, independent assessors. 6-month follow-up. Pre-registered. Data availability: Full anonymised data has been deposited in a controlled-access repository; access requires a formal application reviewed by an independent ethics committee, which in practice takes several months and is not straightforward for independent researchers.",conclusion:"Careful interpretation. Shows significant symptom reduction but notes therapy protocol was intensive (not just the drug alone), some patients relapsed, and long-term safety still unknown. Calls for larger trials.",source:"Top-Tier Psychiatry Journal. Known for conservative editorial standards and emphasis on clinical significance."},{id:"STUDY-38",title:"A review of the health risks of genetically modified crops by an industry panel",access:"Free report on biotech industry association website.",overview:"Reviews existing literature on GMO safety. However, panel members are all employed by biotech companies - clear conflict of interest.",methods:"Narrative review (not systematic). Cherry-picks studies showing safety; ignores research raising concerns about pesticide use and biodiversity. No independent critical appraisal.",conclusion:"Biased summary. While many GMOs are likely safe to eat, the panel ignores environmental concerns and dismisses any contrary evidence as 'anti-science.'",source:"Industry Association Report. All authors work for GMO-producing companies. Not independent or peer-reviewed."},{id:"STUDY-39",title:"Accelerating sea level rise through 2100: An analysis of global climate models",access:"Open Access.",overview:"Uses ensemble of climate models (CMIP6) with updated ice sheet dynamics. Builds on established physics of thermal expansion and glaciology.",methods:"Multi-model comparison with rigorous uncertainty quantification. Incorporates satellite data, tide gauges, and paleoclimate proxies for validation. Pre-registered methodology. Data availability: All model outputs and code archived in public repositories.",conclusion:"Sobering but precise. Projects 0.6-1.1m rise by 2100 under current emissions trajectory, with clear uncertainty ranges and regional variations. Acknowledges ice sheet behaviour is the largest source of uncertainty.",source:"Top-Tier Earth Science Journal. Highest standards for climate model reporting and reproducibility."},{id:"STUDY-40",title:"A laboratory analysis of alleged mind-control chemicals in aircraft contrails ('chemtrails')",access:"Anonymous blog post with blurry photos.",overview:"Conspiracy theory. Contrails (condensation trails from aircraft) are water vapour, not chemicals. Basic atmospheric science debunks this.",methods:"No credible methodology. Shows photos of normal contrails. Claims to have 'lab analysis' but provides no chain of custody, no lab credentials, no peer review.",conclusion:"Fabricated. No evidence provided. Contradicts fundamental chemistry and meteorology.",source:"Anonymous Blog. No credentials, no review, no accountability. Site also promotes New World Order conspiracy theories."},{id:"STUDY-41",title:"Efficacy of pre-exposure prophylaxis (PrEP) in reducing HIV transmission risk in a real-world cohort",access:"Open Access.",overview:"Follows high-risk individuals taking daily PrEP medication. Grounded in virology and pharmacokinetics of antiretroviral drugs.",methods:"Prospective cohort of 5,000 participants. Adherence monitored via pharmacy refills and drug level testing. Compared to matched historical controls. Independent outcome ascertainment. Data availability: De-identified data on request.",conclusion:"Strong evidence but emphasises adherence. Near-perfect protection when taken consistently, but effectiveness drops sharply with missed doses. Notes PrEP doesn't protect against other STIs. Notably, the effectiveness estimates rest on comparison to historical controls rather than a concurrent randomised group  a meaningful methodological limitation the authors acknowledge only briefly in the supplementary material.",source:"Top-Tier Infectious Disease Journal. Rigorous review and high clinical relevance standards."},{id:"STUDY-42",title:"The effect of testosterone therapy on youth and vitality in men over 40",access:"Published in supplement industry magazine.",overview:"Promotes off-label testosterone use for 'anti-aging.' Downplays cardiovascular risks and ignores endocrinology showing normal age-related decline isn't a disease.",methods:"Retrospective review of clinic patients (no control group). Patients self-selected for treatment and reported 'feeling better' (subjective). No long-term safety monitoring. Data availability: None.",conclusion:"Irresponsible. Conflates correlation with causation and ignores serious side effects (heart attack, stroke, prostate issues). Written by clinic owner who profits from selling testosterone.",source:"Men's Health Magazine / Clinic Advertising. Not peer-reviewed. Author owns testosterone clinic mentioned in article."},{id:"STUDY-43",title:"Correction of the sickle cell mutation in a human patient trial using CRISPR gene editing",access:"Behind paywall.",overview:"Uses CRISPR-Cas9 to edit patient's own hematopoietic stem cells, correcting the genetic mutation causing sickle cell disease. Grounded in molecular biology and gene therapy.",methods:"Single-arm trial (no control group - unethical to withhold treatment from sick patients). <i>N</i>=15 patients with severe sickle cell disease. 2-year follow-up. Rigorous safety monitoring. Data availability: Patient-level data restricted; summary data in paper.",conclusion:"The title overclaims for a 15-patient single-arm trial. 'Correction of the mutation' implies completeness that two years of follow-up cannot yet establish. The paper itself is more careful: all patients showed meaningful improvement, but long-term durability is unknown, the procedure is extremely expensive, and off-target editing was detected in 2 patients (ongoing monitoring required).",source:"Top-Tier Medical Journal. Requires independent data monitoring boards for clinical trials."},{id:"STUDY-44",title:"The efficacy of an organic diet in preventing all diseases: A 10-year study",access:"Published on organic food industry website.",overview:"Massively overstates findings. 'All diseases' claim ignores genetics, smoking, exercise, and countless other factors.",methods:"Observational study comparing organic food shoppers to general population. No control for income, education, or overall healthy lifestyle (people who buy organic often exercise more, smoke less, etc.). Data availability: Not provided.",conclusion:"Misleading. Any observed health differences likely due to confounding factors (wealthier, health-conscious people) not the organic label itself.",source:"Organic Trade Association Report. Study funded by organic industry. Authors work for organic certification bodies."},{id:"STUDY-45",title:"The effect of hourly breaks from sitting on metabolic risk markers in office workers",access:"Open Access.",overview:"Tests interrupting prolonged sitting with short activity breaks. Based on metabolic physiology and epidemiology of sedentary behaviour.",methods:"Randomised crossover trial. <i>N</i>=40 participants. Measured blood glucose, insulin, and lipids after 8-hour sitting vs sitting interrupted by 3-minute walks every hour. Lab-controlled conditions. Pre-registered. Data availability: Full data on OSF.",conclusion:"Measured findings. Shows improvements in glucose metabolism but notes this was short-term, in controlled conditions. Doesn't claim breaks alone prevent diabetes or heart disease.",source:"Respected Exercise Physiology Journal. Good methodological standards."},{id:"STUDY-46",title:"The efficacy of a 'detox' tea for toxin removal and adipose tissue reduction",access:"Influencer Instagram post with affiliate link.",overview:"Scientifically nonsensical. The liver and kidneys detoxify the body; no tea can 'flush toxins.' 'Belly fat' cannot be spot-reduced.",methods:"No study. Influencer's personal testimonial plus paid actors in before/after photos. No measurements, no controls, no biology.",conclusion:"Fraudulent marketing. The tea is a laxative causing temporary water weight loss (and dehydration), not fat loss.",source:"Social Media Influencer. Paid promotion. No scientific credentials. FTC violations for undisclosed advertising."},{id:"STUDY-47",title:"The impact of participatory budgeting on civic engagement in marginalised communities",access:"Open Access.",overview:"Studies democratic innovation where residents directly decide local spending. Grounded in political science theories of deliberative democracy and empowerment.",methods:"Mixed methods: quantitative analysis of voting records across 30 cities plus qualitative interviews with participants. Pre-registered analysis. Control cities matched on demographics. Data availability: Quantitative data public; interview transcripts available on request (privacy).",conclusion:"Nuanced. Shows increased participation in marginalised groups but notes effects vary by implementation quality and existing political culture. Doesn't claim participatory budgeting solves all governance problems.",source:"Top-Tier Political Science Journal. Known for rigorous mixed-methods standards."},{id:"STUDY-48",title:"The efficacy of magnets in curing arthritis pain by realigning 'body energy fields'",access:"Free PDF on magnet therapy sales website.",overview:"Pseudoscience. The human body has no 'energy fields' that magnets could affect. Static magnets used in therapy are far too weak to penetrate tissue.",methods:"No controlled study. Testimonials from customers who bought magnetic bracelets. No comparison to placebo (which is powerful for subjective pain). Data availability: None.",conclusion:"Placebo effect being sold as medicine. Systematic reviews of actual controlled trials show magnetic therapy performs no better than fake magnets.",source:"Magnet Therapy Company Website. Selling magnets for 150 each. Site also claims magnets cure diabetes and cancer."}];let dt=0,L=[],St=[],Mt=[],U=null,W={},Ye={},ce={},ht=0,Q="",$e=!1,ki=new Set,He={},fs=!1,lt={title:0,access:0,source:0,theory:0,methods:0,conclusion:0};const Si=[{key:"title",label:" Title"},{key:"access",label:" Access"},{key:"source",label:" Source"},{key:"theory",label:" Theory"},{key:"methods",label:" Methods & Data"},{key:"conclusion",label:" Conclusion"}],Mi=10*60*1e3,lo=5*60*1e3,Ch=50*60*1e3,Oh=5e3,la=["click","keydown","touchstart","scroll","mousemove"];let oe=null,Ce=null,Oe=null,gs=null,ps=!1,Ti=[];const Di={"STUDY-1":1,"STUDY-4":1,"STUDY-29":1,"STUDY-32":1,"STUDY-34":1,"STUDY-40":1,"STUDY-46":1,"STUDY-48":1,"STUDY-7":2,"STUDY-11":2,"STUDY-17":2,"STUDY-20":2,"STUDY-28":2,"STUDY-36":2,"STUDY-38":2,"STUDY-42":2,"STUDY-44":2,"STUDY-9":3,"STUDY-12":3,"STUDY-15":3,"STUDY-23":3,"STUDY-25":3,"STUDY-6":4,"STUDY-18":4,"STUDY-26":4,"STUDY-30":4,"STUDY-35":4,"STUDY-3":5,"STUDY-5":5,"STUDY-13":5,"STUDY-14":5,"STUDY-16":5,"STUDY-21":5,"STUDY-27":5,"STUDY-45":5,"STUDY-2":6,"STUDY-8":6,"STUDY-10":6,"STUDY-22":6,"STUDY-31":6,"STUDY-33":6,"STUDY-37":6,"STUDY-41":6,"STUDY-43":6,"STUDY-19":7,"STUDY-24":7,"STUDY-39":7,"STUDY-47":7},de=100;function Ls(i){return!i||typeof i!="object"?[]:Object.values(i).map(t=>typeof t=="number"?t:t&&typeof t=="object"?t.rating:null).filter(t=>Number.isFinite(t)&&t>=1&&t<=7)}function ms(i){return i>=90?"":i>=75?"":i>=60?"":""}function ca(i){const t=document.getElementById(i);if(!t)return;let e=!1,s=null;t.addEventListener("mouseenter",()=>{e||(s=setTimeout(()=>{n(t)},900))}),t.addEventListener("mouseleave",()=>{s&&(clearTimeout(s),s=null)}),t.addEventListener("click",o=>{e||(o.preventDefault(),s&&(clearTimeout(s),s=null),n(t))}),t.addEventListener("touchstart",o=>{e||(o.preventDefault(),n(t))},{passive:!1}),t.addEventListener("celebrate",()=>{n(t,"celebration")}),(i==="logo-icon"||i==="navbar-logo")&&setInterval(()=>{e||(t.classList.add("shake-intense"),setTimeout(()=>{t.classList.remove("shake-intense")},2e3))},8e3);function n(o,a="mixed"){if(e&&a!=="celebration")return;e=!0;const r=["droplet","droplet-star","droplet-heart","droplet-sparkle","droplet-bubble"],l=a==="celebration";o.classList.add("flipping");const c=o.src,d=c.replace("unlock-lab-icon.svg","unlock-lab-icon-inverted.svg");setTimeout(()=>{o.src=d},600),l||setTimeout(()=>{const m=o.getBoundingClientRect(),b=m.left+m.width,y=m.top,w=a==="celebration"?20:12,x=0;for(let v=0;v<w;v++){const _=document.createElement("div");if(l)_.className="droplet droplet-celebration-refill droplet-refill";else if(a==="mixed"){const A=r[Math.floor(Math.random()*r.length)];_.className=`droplet ${A} droplet-refill`}else _.className=`droplet ${a} droplet-refill`;const k=b+(Math.random()-.5)*window.innerWidth*.4,S=(Math.random()-.5)*20,T=y-x+S;_.style.left=`${k}px`,_.style.top=`${x}px`,_.style.width=`${2+Math.random()*.5}vw`,_.style.height=`${(2+Math.random()*.5)*1.2}vw`,_.style.setProperty("--travel-distance",`${T}px`),_.style.animationDelay=`${v*45}ms`,h.appendChild(_)}},2500),setTimeout(()=>{o.src=c},3800);const h=document.createElement("div");h.className="droplet-container",document.body.appendChild(h);const u=o.getBoundingClientRect(),f=a==="celebration"?15:8,p=l?window.innerWidth/2:u.left+u.width,g=l?0:u.top;for(let m=0;m<f;m++){const b=document.createElement("div");if(l)b.className="droplet droplet-celebration";else if(a==="mixed"){const _=r[Math.floor(Math.random()*r.length)];b.className=`droplet ${_}`}else b.className=`droplet ${a}`;const y=l?(Math.random()-.5)*window.innerWidth*1.5:(Math.random()-.5)*20,w=(Math.random()-.5)*(l?40:20),x=l?1.5+Math.random():1+Math.random()*.5,v=m*(l?40:50);b.style.left=`${p+y}px`,b.style.top=`${g+w}px`,b.style.width=`${x}vw`,b.style.height=`${x*1.2}vw`,b.style.animationDelay=`${v}ms`,h.appendChild(b)}setTimeout(()=>{const m=o.getBoundingClientRect(),b=m.left,y=m.top+m.height;for(let w=0;w<f;w++){const x=document.createElement("div");if(l)x.className="droplet droplet-celebration";else if(a==="mixed"){const S=r[Math.floor(Math.random()*r.length)];x.className=`droplet ${S}`}else x.className=`droplet ${a}`;const v=l?(Math.random()-.5)*window.innerWidth*1.5:(Math.random()-.5)*20,_=(Math.random()-.5)*(l?40:20),k=l?1.5+Math.random():1+Math.random()*.5;x.style.left=`${b+v}px`,x.style.top=`${y+_}px`,x.style.width=`${k}vw`,x.style.height=`${k*1.2}vw`,h.appendChild(x)}},600),setTimeout(()=>{o.classList.remove("flipping"),h.remove(),a!=="celebration"?e=!1:setTimeout(()=>{e=!1},500)},4e3)}}function Rh(){["logo-icon","navbar-logo","guide-logo","final-logo"].forEach(t=>ca(t))}document.addEventListener("DOMContentLoaded",async()=>{Rh();const t=new URLSearchParams(window.location.search).get("session");if(t){document.getElementById("page-welcome").classList.remove("active"),await iu(t);return}const e=Ih();U||(U=Eh()),Q=localStorage.getItem("userName"),Q||(Q=await Lh(),localStorage.setItem("userName",Q)),zh(),await ga(),console.log("Content loaded. Papers:",L.length),console.log("Glossary items:",St?St.length:"NOT LOADED"),console.log("Rubric categories:",Mt?Mt.length:"NOT LOADED"),console.log("Paper data sample (first paper):",L[0]),jh(),console.log("Paper pages generated"),L.forEach((a,r)=>{ca(`paper-logo-${r}`)}),console.log("Checking if paper pages were created...");for(let a=0;a<Math.min(10,L.length);a++){const r=document.getElementById(`page-paper-${a}`);console.log(`Paper ${a} (${L[a].id}) page element:`,r?"EXISTS":"NOT FOUND")}Fh(),console.log("Rendering glossary and rubric..."),console.log("Glossary data:",St),console.log("Rubric data:",Mt),Is(),Bs(),console.log("Glossary and rubric rendered");const s=document.getElementById("glossary-content"),n=document.getElementById("rubric-content");if(console.log("After rendering - glossary-content has HTML:",s?s.innerHTML.length>0?"YES ("+s.innerHTML.length+" chars)":"NO (empty)":"ELEMENT NOT FOUND"),console.log("After rendering - rubric-content has HTML:",n?n.innerHTML.length>0?"YES ("+n.innerHTML.length+" chars)":"NO (empty)":"ELEMENT NOT FOUND"),e&&Object.keys(W).length>0&&Bh(),Nh(),$h(),ht>0){const a=document.getElementById("total-score-header");if(a){const r=Object.keys(W).length,l=r>0?Math.round(ht/r):0,c=ms(l);a.innerHTML=`<span class="medal-icon">${c}</span> ${l}%`,document.getElementById("score-banner").style.display="flex"}}const o=e&&dt>0?dt:0;console.log("Showing page:",o,"hasState:",e,"currentPage:",dt),he(o)});window.nextPage=Wh;window.previousPage=Vh;window.enableSubmit=Xh;window.submitRating=Gh;window.showHelp=Kh;window.closeHelp=zs;window.showTab=Jh;window.finishEarly=Yh;function Eh(){return"session_"+Date.now()+"_"+Math.random().toString(36).substr(2,9)}function Ki(){const i=["Red","Blue","Green","Yellow","Purple","Orange","Pink","Teal","Brave","Wise","Swift","Tall","Happy","Clever","Bright","Quick","Mighty","Gentle","Bold","Cheerful","Curious","Friendly","Kind","Peaceful"],t=["Fox","Raccoon","Owl","Sparrow","Robin","Falcon","Eagle","Hawk","Rabbit","Squirrel","Deer","Bear","Wolf","Otter","Badger","Hedgehog","Dolphin","Seal","Penguin","Panda","Koala","Tiger","Lion","Leopard"],e=i[Math.floor(Math.random()*i.length)],s=t[Math.floor(Math.random()*t.length)],n=Math.floor(Math.random()*100).toString().padStart(2,"0");return`${e} ${s} ${n}`}async function Lh(){const i=et(tt,"leaderboard");try{const t=await At(i),e=new Set;if(t.exists()){const o=t.val();Object.values(o).forEach(a=>{a.userName&&e.add(a.userName)})}let s=0,n;do if(n=Ki(),s++,s>=500){const o=Ki();let a=1;for(n=`${o}-${a}`;e.has(n);)a++,n=`${o}-${a}`;break}while(e.has(n));return n}catch(t){return console.error("Error checking username uniqueness:",t),Ki()}}function je(){const i={currentPage:dt,userRatings:W,userPredictions:Ye,paperScores:ce,totalScore:ht,sessionId:U,hasUsedBackButton:$e,celebratedPapers:Array.from(ki),pageDisplayTimestamps:He,criterionTokens:lt};localStorage.setItem("workshopState",JSON.stringify(i))}function Ih(){try{const i=localStorage.getItem("workshopState");if(i){const t=JSON.parse(i);return dt=t.currentPage||0,W=t.userRatings||{},Ye=t.userPredictions||{},ce=t.paperScores||{},ht=t.totalScore||0,U=t.sessionId||null,$e=t.hasUsedBackButton||!1,ki=new Set(t.celebratedPapers||[]),He=t.pageDisplayTimestamps||{},lt=t.criterionTokens||{title:0,access:0,source:0,theory:0,methods:0,conclusion:0},!0}}catch(i){console.error("Error loading state:",i)}return!1}function Bh(){Object.keys(W).forEach(i=>{const t=L.findIndex(e=>e.id===i);if(t>=0){const e=document.getElementById(`rating-section-${t}`),s=document.getElementById(`results-${t}`);if(e&&(e.style.display="none"),s){s.style.display="block";const n=ce[i];if(n!==void 0){const r=document.getElementById(`score-${t}`);r&&(r.textContent=`${n}%`,r.style.fontSize="2rem",r.style.fontWeight="bold")}const o=W[i],a=Ye[i];o&&a&&pa(t,i,o,a,!0)}}})}function Fh(){const i=document.getElementById("navbar-username");i&&(i.textContent=Q);const t=document.getElementById("username-display-save");t&&(t.textContent=Q);const e=document.getElementById("username-display-inline");e&&(e.textContent=Q)}function zh(){oe=Date.now(),ua(),la.forEach(i=>{document.addEventListener(i,da,{passive:!0})}),gs=setTimeout(()=>{fa()},Ch),setInterval(Pi,3e4),Pi()}function da(){const i=Date.now();oe&&i-oe<Oh||(oe=i,ps=!1,ua())}function ha(){return oe?Mi-(Date.now()-oe):Mi}function ua(){Ce&&clearTimeout(Ce),Oe&&clearTimeout(Oe),Oe=setTimeout(()=>{const i=ha();!ps&&i>0&&i<=lo&&(ps=!0,alert(" 5 minutes until your session disconnects due to inactivity."))},Mi-lo),Ce=setTimeout(()=>{fa()},Mi)}function Pi(){const i=ha(),t=Math.max(0,Math.floor(i/6e4)),e=Object.keys(W).length,s=L.length||48,n=Math.max(0,s-e),o=document.getElementById("session-timer");o&&(i>0?(o.textContent=`${t} min | ${n} paper${n!==1?"s":""} left`,o.style.color=i<=5*6e4?"#f56565":""):(o.textContent="Session ending...",o.style.color="#f56565"))}function fa(){if(Ti.forEach(t=>{typeof t=="function"&&t()}),Ti=[],U){const t=et(tt,`active/${U}`);Xt(t,null)}Ce&&clearTimeout(Ce),Oe&&clearTimeout(Oe),gs&&clearTimeout(gs),la.forEach(t=>{document.removeEventListener(t,da)});const i=document.createElement("div");i.style.cssText=`
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        color: white;
        text-align: center;
        padding: 20px;
    `,i.innerHTML=`
        <div>
            <h2 style="margin-bottom: 20px; color: white;"> Session Disconnected</h2>
            <p style="margin-bottom: 20px; color: white;">
                Your session ended due to inactivity.<br>
                Thank you for participating!
            </p>
            <button onclick="location.reload()" style="
                background: #667eea;
                color: white;
                border: none;
                padding: 12px 24px;
                border-radius: 8px;
                font-size: 16px;
                cursor: pointer;
            ">Start New Session</button>
        </div>
    `,document.body.appendChild(i)}function Nh(){const i=et(tt,`active/${U}`);Xt(i,{joinedAt:Date.now(),lastActive:Date.now()}),setInterval(()=>{Xt(i,{joinedAt:Date.now(),lastActive:Date.now()})},3e4),window.addEventListener("beforeunload",()=>{Xt(i,null)})}function $h(){const i=document.getElementById("participant-counter");i&&(i.style.display="none");const t=et(tt,"active"),e=bs(t,s=>{const n=s.val();if(i)if(n&&Object.keys(n).length>0){const o=Object.keys(n).filter(a=>{const r=n[a].timestamp;return r&&Date.now()-r<6e4}).length;o>0?(i.textContent=`${o} participant${o!==1?"s":""} active`,i.style.display="inline-block"):i.style.display="none"}else i.style.display="none"},s=>{console.error("Error updating participant count:",s),i&&(i.style.display="none")});Ti.push(e)}function Hh(){if(!L||!L.length||!U){console.warn("Cannot shuffle papers: papers or sessionId not initialized");return}let i=0;for(let e=0;e<U.length;e++)i=(i<<5)-i+U.charCodeAt(e),i=i&i;function t(){return i=(i*9301+49297)%233280,i/233280}for(let e=L.length-1;e>0;e--){const s=Math.floor(t()*(e+1));[L[e],L[s]]=[L[s],L[e]]}}async function ga(i=!0){try{St=Dh,Mt=Ph,L=[...Ah],i&&U&&Hh();const t=document.getElementById("total-papers");t&&(t.textContent=Object.keys(W).length||0)}catch(t){console.error("Error loading content:",t),alert(`Error loading workshop content: ${t.message}

Please try:
1. Hard refresh (Ctrl+Shift+R or Cmd+Shift+R)
2. Clear browser cache
3. Contact support if issue persists`)}}function Is(){console.log("renderGlossary called");const i=document.getElementById("glossary-content"),t=document.getElementById("modal-glossary");if(console.log("Glossary content element:",i),console.log("Modal glossary element:",t),console.log("Glossary data:",St),!St||St.length===0){console.error("Glossary data not loaded or empty",St);const s='<p style="color: red;">Error: Glossary data failed to load. Please refresh the page.</p>';i&&(i.innerHTML=s),t&&(t.innerHTML=s);return}const e=St.map(s=>`
        <div class="glossary-item">
            <div class="glossary-term">${s.term}</div>
            <div class="glossary-definition">${s.definition}</div>
        </div>
    `).join("");console.log("Generated glossary HTML length:",e.length),console.log("Generated glossary HTML (first 200 chars):",e.substring(0,200)),i?(i.innerHTML=e,console.log("Glossary content updated. Element now contains:",i.innerHTML.substring(0,200))):console.error("glossary-content element not found in DOM"),t?(t.innerHTML=e,console.log("Modal glossary updated")):console.warn("modal-glossary element not found in DOM (this is OK if modal not on current page)")}function Bs(){console.log("renderRubric called");const i=document.getElementById("rubric-content"),t=document.getElementById("modal-rubric");if(console.log("Rubric content element:",i),console.log("Modal rubric element:",t),console.log("Rubric data:",Mt),!Mt||Mt.length===0){console.error("Rubric data not loaded or empty",Mt);const n='<p style="color: red;">Error: Rubric data failed to load. Please refresh the page.</p>';i&&(i.innerHTML=n),t&&(t.innerHTML=n);return}const e=n=>{const o=n.indexOf(":");if(o===-1)return n;const a=n.substring(0,o+1),r=n.substring(o+1);return`<strong>${a}</strong>${r}`},s=`
        <div class="info-box" style="margin-bottom: 1rem; background: #f3e5f5; border-left: 4px solid #9c27b0;">
            <p style="margin: 0;"><strong> Scoring Strategy:</strong> You can freely weigh some criteria more strongly than others when forming your overall rating.</p>
        </div>
        <div style="overflow-x: auto; -webkit-overflow-scrolling: touch;">
            <table class="rubric-table">
                <thead>
                    <tr>
                        <th>Category</th>
                        <th>Low (1-2)</th>
                        <th>Medium (3-5)</th>
                        <th>High (6-7)</th>
                    </tr>
                </thead>
                <tbody>
                    ${Mt.map(n=>`
                        <tr>
                            <td><strong>${n.name}</strong></td>
                            <td>${e(n.low)}</td>
                            <td>${e(n.medium)}</td>
                            <td>${e(n.high)}</td>
                        </tr>
                    `).join("")}
                </tbody>
            </table>
        </div>
    `;console.log("Generated rubric HTML length:",s.length),console.log("Generated rubric HTML (first 200 chars):",s.substring(0,200)),i?(i.innerHTML=s,console.log("Rubric content updated. Element now contains:",i.innerHTML.substring(0,200))):console.error("rubric-content element not found in DOM"),t?(t.innerHTML=s,console.log("Modal rubric updated")):console.warn("modal-rubric element not found in DOM (this is OK if modal not on current page)")}function jh(){const i=document.getElementById("paper-pages"),t=["title","access","source","overview","methods","conclusion"],e=[" Title"," Access"," Source"," Study Overview"," Methods & Data"," Conclusion"];L.forEach((s,n)=>{const o=t.map((r,l)=>{if(r==="title")return"";const c=e[l],d=(s[r]||"").replace("Data availability:","<strong>Data availability:</strong>");return`
                        <div class="paper-section">
                            <h3>${c}</h3>
                            <p>${d}</p>
                        </div>`}).filter(r=>r!=="").join(""),a=`
            <div class="page" id="page-paper-${n}">
                <div class="container">
                    <button class="back-to-previous-btn" onclick="goBackToPreviousStudy()" style="${$e||n===0?"display: none;":""}" title="Go back to previous study (one-time use)">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                        <span>Back to Previous Study</span>
                    </button>
                    <div class="paper-card">
                        <div class="paper-header">
                            <h1 class="paper-title">${s.title}</h1>
                        </div>
                        ${o}
                    </div>
                    
                    <div class="rating-section" id="rating-section-${n}">
                        <div style="background: #fff3e0; padding: 15px; border-radius: 8px; margin-bottom: 25px; border-left: 4px solid #ff9800;">
                            <h3 style="margin: 0 0 10px 0; color: #f57c00;">1 Predict the Crowd</h3>
                            <p style="font-size: 0.95rem; color: #444; margin: 0;">Guess: What will the AVERAGE rating be from all workshop participants? How do you think others will judge the overall quality of this study?</p>
                        </div>
                        <div class="rating-scale">
                            ${[1,2,3,4,5,6,7].map(r=>`
                                <div class="rating-option">
                                    <input type="radio" id="prediction-${n}-${r}" 
                                           name="prediction-${n}" value="${r}"
                                           onchange="enableSubmit(${n})">
                                    <label for="prediction-${n}-${r}">${r}</label>
                                </div>
                            `).join("")}
                        </div>
                        <div class="rating-labels">
                            <span>Low Average</span>
                            <span>High Average</span>
                        </div>
                        
                        <div style="background: #f0f4ff; padding: 15px; border-radius: 8px; margin: 30px 0 15px 0; border-left: 4px solid #667eea;">
                            <h3 style="margin: 0 0 10px 0; color: #667eea;">2 Your Scientific Assessment</h3>
                            <p style="font-size: 0.95rem; color: #444; margin: 0;">Review all six rubric criteria. Then assign your overall quality rating:</p>
                        </div>
                        <div class="rating-scale">
                            ${[1,2,3,4,5,6,7].map(r=>`
                                <div class="rating-option">
                                    <input type="radio" id="rating-${n}-${r}" 
                                           name="rating-${n}" value="${r}"
                                           onchange="enableSubmit(${n})">
                                    <label for="rating-${n}-${r}">${r}</label>
                                </div>
                            `).join("")}
                        </div>
                        <div class="rating-labels">
                            <span>Poor Quality</span>
                            <span>Excellent Quality</span>
                        </div>
                        
                        <button class="submit-rating" id="submit-${n}" 
                                onclick="submitRating(${n}, '${s.id}')" disabled>
                            Submit Both Ratings
                        </button>
                    </div>
                    
                    <div class="results-box" id="results-${n}" style="display: none;">
                        <h3> Rating Submitted!</h3>
                        <div class="score-earned">
                            <div class="score-value" id="score-${n}"></div>
                            <div class="score-message" id="score-msg-${n}"></div>
                        </div>
                        <div class="rating-comparison">
                            <div class="rating-scale-grid">
                                <div class="scale-label">Average Rating</div>
                                <div class="scale-row" id="avg-rating-scale-${n}">
                                    ${[1,2,3,4,5,6,7].map(r=>`<div class="scale-cell" data-value="${r}"></div>`).join("")}
                                </div>
                            </div>
                            <div class="rating-scale-grid">
                                <div class="scale-label">Your Rating</div>
                                <div class="scale-row" id="your-rating-scale-${n}">
                                    ${[1,2,3,4,5,6,7].map(r=>`<div class="scale-cell" data-value="${r}"></div>`).join("")}
                                </div>
                            </div>
                        </div>
                        <div class="participant-count" id="count-${n}">
                            Calculating...
                        </div>
                        <div class="navigation-buttons" style="display: flex; flex-direction: column; gap: 0.75rem; margin-top: 1.5rem;">
                            <button class="btn-primary" onclick="nextPage()">
                                ${n<L.length-1?"Next Paper":"View Results"}
                            </button>
                            <button class="btn-finish" id="finish-btn-${n}" onclick="finishEarly()" style="display: none;">
                                Finish & View Results
                            </button>
                        </div>
                    </div>
                    
                    <div class="page-logo-footer">
                        <img id="paper-logo-${n}" src="unlock-lab-icon.svg" alt="Logo" class="page-logo">
                    </div>
                </div>
            </div>
        `;i.innerHTML+=a})}function he(i){document.querySelectorAll(".page").forEach(o=>o.classList.remove("active"));let e;const s=document.getElementById("navbar-paper-number"),n=document.getElementById("navbar-username");if(i===0)e=document.getElementById("page-welcome"),s&&(s.style.display="none"),n&&(n.style.display="none"),document.getElementById("help-button").classList.remove("visible");else if(i===1)e=document.getElementById("page-guide"),s&&(s.style.display="none"),n&&(n.style.display="none"),document.getElementById("help-button").classList.remove("visible");else if(i<=L.length+1){const o=i-2;e=document.getElementById(`page-paper-${o}`),document.getElementById("help-button").classList.add("visible");const a=L[o].id;if(He[a]=Date.now(),s){const c=Object.keys(W).length;s.textContent=`${c}`,s.style.display="inline"}n&&(n.style.display="none");const r=Object.keys(W).length;(r>0?Math.round(ht/r):0)>0&&(document.getElementById("score-banner").style.display="flex")}else if(i===L.length+2){e=document.getElementById("page-ranking"),document.getElementById("help-button").classList.remove("visible"),s&&(s.style.display="none"),n&&(n.style.display="none");const o=document.getElementById("criteria-token-grid");o&&!o.hasChildNodes()?Uh():Fs()}else e=document.getElementById("page-final"),document.getElementById("help-button").classList.remove("visible"),s&&(s.style.display="none"),n&&(n.style.display="inline"),ma();e?(e.classList.add("active"),window.scrollTo(0,0)):console.error("Target page not found for pageIndex:",i),dt=i,je()}function Wh(){const i=L.length+4;dt<i-1&&he(dt+1)}function Vh(){dt>0&&he(dt-1)}function Yh(){if(Object.keys(W).length<12){alert("Please rate at least 12 studies before finishing.");return}const t=L.length+2;he(t)}function Uh(){lt={title:0,access:0,source:0,theory:0,methods:0,conclusion:0};const i=document.getElementById("criteria-token-grid");i&&(i.innerHTML=Si.map(t=>`
        <div class="criterion-token-row">
            <div class="criterion-token-label">
                <span>${t.label}</span>
                <span class="token-count-badge" id="token-count-${t.key}">0</span>
            </div>
            <div class="token-boxes" id="token-boxes-${t.key}">
                ${Array.from({length:20},(e,s)=>`<div class="token-box" data-criterion="${t.key}" data-index="${s+1}"
                        onclick="handleTokenClick('${t.key}', ${s+1})"></div>`).join("")}
            </div>
        </div>
    `).join(""),Fs(),i.querySelectorAll(".token-box").forEach(t=>{t.addEventListener("mouseenter",()=>{if(t.classList.contains("disabled"))return;const e=t.dataset.criterion,s=parseInt(t.dataset.index);document.querySelectorAll(`#token-boxes-${e} .token-box`).forEach((n,o)=>{n.classList.toggle("hover-fill",o+1<s)})}),t.addEventListener("mouseleave",()=>{const e=t.dataset.criterion;document.querySelectorAll(`#token-boxes-${e} .token-box`).forEach(s=>s.classList.remove("hover-fill"))})}))}window.handleTokenClick=function(i,t){const e=lt[i],o=20-(Object.values(lt).reduce((a,r)=>a+r,0)-e);t>o||(t===e?lt[i]=0:lt[i]=t,Fs())};function Fs(){const i=Object.values(lt).reduce((n,o)=>n+o,0);Si.forEach(n=>{const o=lt[n.key],r=20-(i-o),l=document.getElementById(`token-count-${n.key}`);l&&(l.textContent=o,l.classList.toggle("complete",o>0)),document.querySelectorAll(`[data-criterion="${n.key}"]`).forEach((d,h)=>{const u=h+1;d.classList.toggle("filled",u<=o),d.classList.toggle("disabled",u>r)})});const t=document.getElementById("tokens-used-display");t&&(t.textContent=i);const e=document.getElementById("token-progress-fill");e&&(e.style.width=`${i/20*100}%`);const s=document.getElementById("submit-ranking-btn");if(s){const n=i===20;s.disabled=!n,s.style.opacity=n?"1":"0.5",s.textContent=n?"Submit & View My Results ":`Allocate all 20 tokens to continue (${20-i} remaining)`}}window.submitRanking=async function(){if(Object.values(lt).reduce((t,e)=>t+e,0)===20){try{const t=et(tt,`rankings/${U}`);await Xt(t,{...lt,userName:Q,timestamp:Date.now()})}catch(t){console.error("Error saving criterion ranking:",t)}he(L.length+3)}};function qh(){$e||dt>2&&($e=!0,je(),document.querySelectorAll(".back-to-previous-btn").forEach(t=>{t.style.display="none"}),he(dt-1))}window.goBackToPreviousStudy=qh;function Xh(i){const t=document.querySelector(`input[name="rating-${i}"]:checked`),e=document.querySelector(`input[name="prediction-${i}"]:checked`),s=document.getElementById(`submit-${i}`);s.disabled=!(t&&e)}async function Gh(i,t){const e=document.querySelector(`input[name="rating-${i}"]:checked`),s=document.querySelector(`input[name="prediction-${i}"]:checked`);if(!e||!s){alert("Please provide both your rating and your prediction before submitting.");return}if(Object.keys(W).length>=24){alert("You have reached the maximum of 24 ratings. Please proceed to view your results.");return}const o=parseInt(e.value),a=parseInt(s.value);try{const r=document.getElementById(`submit-${i}`);r.disabled=!0,r.textContent="Submitting...";const l=et(tt,`ratings/${t}`),d=(await At(l)).val();let h=4;if(d){const p=Ls(d),g=Di[t]||4,m=p.reduce((y,w)=>y+w,0)+g*de,b=p.length+de;h=m/b}else h=Di[t]||4;W[t]=o,Ye[t]=a,je(),document.getElementById(`rating-section-${i}`).style.display="none",pa(i,t,o,a,!1,h);const u=He[t]?Date.now()-He[t]:null,f=et(tt,`ratings/${t}/${U}`);await Xt(f,{rating:o,prediction:a,responseTime:u,timestamp:Date.now()})}catch(r){console.error("Error submitting rating:",r),console.error("Error details:",r.code,r.message),alert(`Error submitting rating: ${r.message}

Please check the browser console for details.`);const l=document.getElementById(`submit-${i}`);l.disabled=!1,l.textContent="Submit Both Ratings"}}async function pa(i,t,e,s,n=!1,o=null){const a=document.getElementById(`results-${i}`);if(a.style.display="block",o!==null){const c=document.getElementById(`score-${i}`);if(!c.textContent){const d=Math.abs(s-o),h=Math.max(0,100-Math.round(d*12));ce[t]=h,c.textContent=`${h}%`,c.style.fontSize="2rem",c.style.fontWeight="bold";const u=document.getElementById(`score-msg-${i}`);if(u.innerHTML=d===0?`<strong> Perfect prediction!</strong><br>You nailed it: ${s} = ${o.toFixed(1)}`:d<=.5?`<strong> Outstanding!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  spot on!`:d<=1?`<strong> Excellent work!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  very close!`:d<=1.5?`<strong> Great prediction!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  well done!`:d<=2.5?`<strong> Good attempt!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  getting there!`:`<strong> Keep learning!</strong><br>Predicted ${s}, actual ${o.toFixed(1)}  science perception is tricky!`,u.style.fontSize="0.95rem",u.style.lineHeight="1.5",h>=90&&!ki.has(t)){ki.add(t);const m=document.getElementById(`paper-logo-${i}`);m&&setTimeout(()=>{m.dispatchEvent(new CustomEvent("celebrate"))},500)}const f=document.getElementById("total-score-header"),p=document.getElementById("score-banner");if(f){const m=Object.keys(W).length,b=m>0?Math.round(ht/m):0;if(b>0){const y=ms(b);f.innerHTML=`<span class="medal-icon">${y}</span> ${b}%`,f.style.animation="scoreUpdate 0.5s ease",setTimeout(()=>f.style.animation="",500),p&&(p.style.display="flex")}else p&&(p.style.display="none")}Pi(),je();const g=Object.keys(W).length;if(g===12){const m=document.getElementById(`paper-logo-${i}`);m&&setTimeout(()=>{m.dispatchEvent(new CustomEvent("celebrate"))},800),setTimeout(()=>{alert("Rated 12 papers! Rate a few more papers (recommended) or proceed to view your results.")},1200)}if(g>=12&&i<L.length-1){const m=document.getElementById(`finish-btn-${i}`);m&&(m.style.display="block")}}}const r=et(tt,`ratings/${t}`),l=bs(r,c=>{const d=c.val();if(d){const h=Ls(d),u=Di[t]||4,f=h.reduce((v,_)=>v+_,0)+u*de,p=h.length+de,g=f/p,m=h.length,b=Math.round(g),y=document.getElementById(`your-rating-scale-${i}`),w=document.getElementById(`avg-rating-scale-${i}`);if(y&&w){y.querySelectorAll(".scale-cell").forEach(k=>{k.textContent="",k.className="scale-cell"}),w.querySelectorAll(".scale-cell").forEach(k=>{k.textContent="",k.className="scale-cell"});const v=y.querySelector(`[data-value="${e}"]`);v&&(v.textContent=e,v.className=`scale-cell active rating-${e}`);const _=w.querySelector(`[data-value="${b}"]`);_&&(_.textContent=g.toFixed(1),_.className=`scale-cell active rating-${b}`)}document.getElementById(`count-${i}`).textContent=`Based on ${m} participant${m!==1?"s":""}`;const x=document.getElementById(`score-${i}`);if(!x.textContent&&!n){const v=Math.abs(s-g),_=Math.max(0,100-Math.round(v*12));ce[t]=_,ht+=_,x.textContent=`${_}%`,x.style.fontSize="2rem",x.style.fontWeight="bold",x.style.color=_>=88?"#10b981":_>=76?"#3b82f6":_>=64?"#f59e0b":"#ef4444";const k=document.getElementById(`score-msg-${i}`);k.innerHTML=v===0?`<strong> Perfect prediction!</strong><br>You nailed it: ${s} = ${g.toFixed(1)}`:v<=.5?`<strong> Outstanding!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  spot on!`:v<=1?`<strong> Excellent work!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  very close!`:v<=1.5?`<strong> Great prediction!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  well done!`:v<=2.5?`<strong> Good attempt!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  getting there!`:`<strong> Keep learning!</strong><br>Predicted ${s}, actual ${g.toFixed(1)}  science perception is tricky!`,k.style.fontSize="0.95rem",k.style.lineHeight="1.5";const S=document.getElementById("total-score-header"),T=document.getElementById("score-banner");if(S){const D=Object.keys(W).length,C=D>0?Math.round(ht/D):0;if(C>0){const q=ms(C);S.innerHTML=`<span class="medal-icon">${q}</span> ${C}%`,S.style.animation="scoreUpdate 0.5s ease",setTimeout(()=>S.style.animation="",500),T&&(T.style.display="flex")}else T&&(T.style.display="none")}if(Pi(),je(),Object.keys(W).length>=12&&i<L.length-1){const D=document.getElementById(`finish-btn-${i}`);D&&(D.style.display="block")}}}});Ti.push(l)}function Kh(){document.getElementById("help-modal").classList.add("active"),document.body.style.overflow="hidden"}function zs(){document.getElementById("help-modal").classList.remove("active"),document.body.style.overflow="auto"}function Jh(i){document.querySelectorAll(".tab-btn").forEach(t=>{t.classList.remove("active")}),event.target.classList.add("active"),document.querySelectorAll(".tab-content").forEach(t=>{t.classList.remove("active")}),i==="glossary"?document.getElementById("modal-glossary").classList.add("active"):document.getElementById("modal-rubric").classList.add("active")}window.onclick=function(i){const t=document.getElementById("help-modal");i.target===t&&zs()};window.addEventListener("keydown",function(i){if(i.key==="Escape"){const t=document.getElementById("help-modal");t&&t.classList.contains("active")&&zs()}});function co(i,t){const e=document.getElementById(t);if(!e)return;const s=Si.reduce((n,o)=>n+(i[o.key]||0),0);if(s===0){e.innerHTML='<p style="text-align: center; color: #9ca3af; margin: 0;">No weighting data available.</p>';return}e.innerHTML=Si.map(n=>{const o=i[n.key]||0,a=Math.round(o/s*100);return`
            <div style="margin-bottom: 0.9rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.25rem;">
                    <span style="font-weight: 600; font-size: 0.9rem;">${n.label}</span>
                    <span style="font-weight: 700; color: #d97706; font-size: 0.9rem;">${a}%</span>
                </div>
                <div style="background: #e5e7eb; border-radius: 4px; height: 12px; overflow: hidden;">
                    <div style="width: ${a}%; height: 100%; background: linear-gradient(90deg, #f59e0b, #d97706); border-radius: 4px; transition: width 0.4s ease;"></div>
                </div>
            </div>`}).join("")}function ma(){Is(),Bs(),fs||(ht=Object.values(ce).reduce((o,a)=>o+a,0));const i=Object.keys(W).length,t=i>0?Math.round(ht/i):0;document.getElementById("final-score").textContent=`${t}%`;const e=document.getElementById("total-papers");e&&(e.textContent=i);const s=U;if(s&&At(et(tt,`rankings/${s}`)).then(o=>{if(o.exists())co(o.val(),"criterion-importance-bars");else if(Object.values(lt).reduce((r,l)=>r+l,0)>0)co(lt,"criterion-importance-bars");else{const r=document.getElementById("criterion-importance-section");r&&(r.style.display="none")}}).catch(o=>{console.error("[CriterionImportance] Firebase read error:",o)}),fs){const o=document.getElementById("save-results-section");o&&(o.style.display="none"),document.getElementById("username-display-save").textContent=Q,document.getElementById("username-display-inline").textContent=Q}else{const o=et(tt,`leaderboard/${U}`);Xt(o,{score:ht,timestamp:Date.now(),papersRated:Object.keys(W).length,userName:Q}).then(()=>{document.getElementById("save-results-link").style.display="inline-block",document.getElementById("email-results-link").style.display="inline-block",document.getElementById("username-display-save").textContent=Q,document.getElementById("username-display-inline").textContent=Q}).catch(a=>{console.error("Error saving score:",a)})}Zh();const n=et(tt,"leaderboard");bs(n,o=>{const a=o.val();if(a){const r=Object.entries(a).map(([h,u])=>({id:h,score:u.score,timestamp:u.timestamp,userName:u.userName||"Anonymous",papersRated:u.papersRated||0}));r.sort((h,u)=>u.score-h.score);const l=r.findIndex(h=>h.id===U)+1;document.getElementById("score-rank").textContent=`You ranked #${l} out of ${r.length} participant${r.length!==1?"s":""}!`;const d=r.slice(0,5).map((h,u)=>{const f=h.id===U,p=u===0?"":u===1?"":u===2?"":"",g=h.papersRated>0?Math.round(h.score/h.papersRated):0;return`
                    <div class="leaderboard-entry ${f?"current-user":""}">
                        <span class="rank">${p||`#${u+1}`}</span>
                        <div class="username-container">
                            <span class="username">${h.userName}</span>
                            ${f?'<span class="you-badge">You!</span>':""}
                        </div>
                        <span class="score">${g}%</span>
                    </div>
                `}).join("");document.getElementById("leaderboard-list").innerHTML=d||"<p>Be the first to complete!</p>"}})}async function Zh(){try{const i={},t=L.map(async u=>{const f=et(tt,`ratings/${u.id}`),g=(await At(f)).val();if(g){const m=Ls(g),b=Di[u.id]||4,y=m.reduce((v,_)=>v+_,0)+b*de,w=m.length+de,x=y/w;i[u.id]={average:x,userRating:W[u.id]||null}}});await Promise.all(t);const e=[],s=[],n=[],o=[];if(L.forEach(u=>{if(i[u.id]&&i[u.id].userRating!==null){const f=i[u.id].userRating,p=i[u.id].average,g=f-p;e.push(g),s.push(f),n.push(p),o.push(u.id)}}),e.length===0)return;const a=e.reduce((u,f)=>u+f,0)/e.length,r=e.reduce((u,f)=>u+Math.pow(f-a,2),0)/e.length,l=Math.sqrt(r),c=e.map(u=>Math.abs(u)),d=c.reduce((u,f)=>u+f,0)/c.length;let h="";d<.5&&l<.8?h=` <strong>Spot-On Evaluator!</strong> Your ratings are remarkably well-aligned with the crowd. On average, you deviated by just ${d.toFixed(2)} points from other participants' ratings. Your assessments are well backed by both the baseline quality indicators and the collective wisdom of other evaluators. You're in sync with the scientific consensus!`:d<1&&l<1.5?h=` <strong>Calibrated Scientist.</strong> Your ratings align well with the crowd, averaging ${d.toFixed(2)} points from the consensus. You're consistently backed by other participants' evaluations, showing you've developed a reliable eye for research quality that matches the collective assessment.`:d>2||l>2.5?h=` <strong>Breaking the Mould!</strong> Your ratings deviate substantially from the crowd (average difference: ${d.toFixed(2)} points). You're seeing research quality through a unique lensperhaps you're more critical of methodological flaws, or more generous with preliminary findings. Your independent perspective challenges the consensus!`:h=` <strong>Balanced Contrarian.</strong> Your ratings show notable differences from the average (typical deviation: ${d.toFixed(2)} points). You're neither slavishly following the crowd nor wildly divergentyou're bringing a thoughtful, independent perspective whilst still engaging with the scientific consensus.`,document.getElementById("analysis-summary").innerHTML=h,document.getElementById("rating-analysis").style.display="block",Qh(o,s,n)}catch(i){console.error("Error calculating rating analysis:",i)}}function Qh(i,t,e){const s=document.getElementById("comparison-chart");s&&new kt(s,{type:"line",data:{labels:i,datasets:[{label:"Your Ratings",data:t,borderColor:"#667eea",backgroundColor:"rgba(102, 126, 234, 0.1)",borderWidth:3,pointRadius:5,pointBackgroundColor:"#667eea",tension:0},{label:"Crowd Average",data:e,borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",borderWidth:2,borderDash:[5,5],pointRadius:4,pointBackgroundColor:"#10b981",tension:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top",labels:{font:{size:12,weight:"bold"}}},tooltip:{callbacks:{label:function(n){return`${n.dataset.label}: ${n.parsed.y.toFixed(2)}`}}}},scales:{y:{beginAtZero:!1,min:1,max:7,title:{display:!0,text:"Rating (1-7 scale)",font:{size:14,weight:"bold"}},ticks:{stepSize:1}},x:{title:{display:!0,text:"Studies",font:{size:14,weight:"bold"}},ticks:{maxRotation:45,minRotation:45,font:{size:9}}}}}})}function tu(){const i=`${window.location.origin}${window.location.pathname}?session=${U}`;navigator.clipboard.writeText(i).then(()=>{document.getElementById("link-copied-msg").style.display="block",setTimeout(()=>{document.getElementById("link-copied-msg").style.display="none"},3e3)}).catch(t=>{console.error("Failed to copy link:",t),alert("Failed to copy link. Please copy manually: "+i)})}window.copyResultsLink=tu;function eu(){const i=`${window.location.origin}${window.location.pathname}?session=${U}`,t=`${window.location.origin}/dashboard.html`,e=encodeURIComponent("Your Unlock the Lab Results"),s=encodeURIComponent(`Hello ${Q},

Here are your Unlock the Lab workshop results:

Your Username: ${Q}

Direct Link to Your Results:
${i}

You can also visit the Live Dashboard and enter your username to find your results:
${t}

The dashboard shows real-time statistics and comparisons for all participants.

Thank you for participating!

---
Unlock the Lab Workshop
Dr Pablo Bernabeu, University of Oxford`);window.location.href=`mailto:?subject=${e}&body=${s}`}window.emailResultsLink=eu;async function iu(i){try{fs=!0,await ga(!1),Is(),Bs();const t=l=>l.toLowerCase().replace(/\s+/g,"");let e=et(tt,`leaderboard/${i}`),s=await At(e),n=i;if(!s.exists()){const l=t(i),c=et(tt,"leaderboard"),d=await At(c);if(d.exists()){const h=d.val(),u=Object.keys(h).find(f=>t(f)===l);u&&(n=u,e=et(tt,`leaderboard/${u}`),s=await At(e))}}if(!s.exists()){alert("Username not found. Please check your username and try again."),window.location.href=window.location.pathname;return}const o=s.val();if(U=n,Q=o.userName||"Anonymous",ht=o.score||0,!L||!L.length)throw new Error("Papers data failed to load");const a=L.map(async l=>{const c=et(tt,`ratings/${l.id}/${n}`),d=await At(c);if(d.exists()){const h=d.val();W[l.id]=h.rating,Ye[l.id]=h.prediction}});await Promise.all(a),document.getElementById("page-welcome").classList.remove("active"),document.getElementById("page-final").classList.add("active"),ma();const r=document.getElementById("total-papers");r&&(r.textContent=Object.keys(W).length)}catch(t){console.error("Error loading session results:",t),alert("Error loading results. Please try again."),window.location.href=window.location.pathname}}
