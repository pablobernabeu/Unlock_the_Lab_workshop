import"./modulepreload-polyfill-B5Qt9EMX.js";import{o as f,G as b,s as w,a,b as h,d as n}from"./firebase-config-GGoD4bnV.js";import{r as s,a as v,g as i}from"./firebase-QsoZ-6oB.js";f(a,t=>{t?(I(),d()):E()});window.loginWithGoogle=async function(){const t=document.getElementById("login-error"),e=new b;try{await w(a,e),t.style.display="none"}catch(o){o.code!=="auth/popup-closed-by-user"&&(t.textContent=`Login failed: ${o.message}`,t.style.display="block")}};window.logoutAdmin=async function(){await h(a)};function E(){document.getElementById("login-section").style.display="block",document.getElementById("admin-panel").style.display="none"}function I(){document.getElementById("login-section").style.display="none",document.getElementById("admin-panel").style.display="block"}async function d(){try{const t=s(n,"active"),e=await i(t),o=e.exists()?Object.keys(e.val()).length:0;document.getElementById("active-count").textContent=o;const u=s(n,"ratings"),r=await i(u);let l=0;if(r.exists()){const y=r.val();Object.values(y).forEach(m=>{l+=Object.keys(m).length})}document.getElementById("total-ratings").textContent=l;const g=s(n,"leaderboard"),c=await i(g),p=c.exists()?Object.keys(c.val()).length:0;document.getElementById("leaderboard-count").textContent=p}catch(t){console.error("Error loading stats:",t)}}window.stopAllSessions=async function(){if(!confirm("Are you sure you want to stop all active sessions? This will force all participants to start new sessions."))return;const t=document.getElementById("action-result");t.innerHTML='<p style="color: #f59e0b;">⏳ Stopping all sessions...</p>';try{const e=s(n,"active");await v(e),t.innerHTML='<p style="color: #10b981; padding: 1rem; background: #d1fae5; border-radius: 4px;">✅ All active sessions have been stopped successfully.</p>',await d()}catch(e){t.innerHTML=`<p style="color: #ef4444; padding: 1rem; background: #fef2f2; border-radius: 4px;">❌ Error: ${e.message}</p>`}};window.auth=a;window.database=n;
